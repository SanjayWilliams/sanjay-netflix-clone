/*! For license information please see main.25e46f05.js.LICENSE.txt */
!function(){var e={4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var r=n(3589),i=n(7297),a=n(9301),o=n(9774),u=n(1804),s=n(9145),c=n(5411),l=n(6789),f=n(4531),h=n(6569),d=n(6261);e.exports=function(e){return new Promise((function(t,n){var p,v=e.data,y=e.headers,m=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(v)&&r.isStandardBrowserEnv()&&delete y["Content-Type"];var k=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";y.Authorization="Basic "+btoa(b+":"+w)}var x=u(e.baseURL,e.url);function _(){if(k){var r="getAllResponseHeaders"in k?s(k.getAllResponseHeaders()):null,a={data:m&&"text"!==m&&"json"!==m?k.response:k.responseText,status:k.status,statusText:k.statusText,headers:r,config:e,request:k};i((function(e){t(e),g()}),(function(e){n(e),g()}),a),k=null}}if(k.open(e.method.toUpperCase(),o(x,e.params,e.paramsSerializer),!0),k.timeout=e.timeout,"onloadend"in k?k.onloadend=_:k.onreadystatechange=function(){k&&4===k.readyState&&(0!==k.status||k.responseURL&&0===k.responseURL.indexOf("file:"))&&setTimeout(_)},k.onabort=function(){k&&(n(new f("Request aborted",f.ECONNABORTED,e,k)),k=null)},k.onerror=function(){n(new f("Network Error",f.ERR_NETWORK,e,k,k)),k=null},k.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new f(t,r.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,e,k)),k=null},r.isStandardBrowserEnv()){var I=(e.withCredentials||c(x))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;I&&(y[e.xsrfHeaderName]=I)}"setRequestHeader"in k&&r.forEach(y,(function(e,t){"undefined"===typeof v&&"content-type"===t.toLowerCase()?delete y[t]:k.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(k.withCredentials=!!e.withCredentials),m&&"json"!==m&&(k.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&k.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&k.upload&&k.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){k&&(n(!e||e&&e.type?new h:e),k.abort(),k=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),v||(v=null);var S=d(x);S&&-1===["http","https","file"].indexOf(S)?n(new f("Unsupported protocol "+S+":",f.ERR_BAD_REQUEST,e)):k.send(v)}))}},8036:function(e,t,n){"use strict";var r=n(3589),i=n(4049),a=n(3773),o=n(777);var u=function e(t){var n=new a(t),u=i(a.prototype.request,n);return r.extend(u,a.prototype,n),r.extend(u,n),u.create=function(n){return e(o(t,n))},u}(n(1709));u.Axios=a,u.CanceledError=n(6569),u.CancelToken=n(6857),u.isCancel=n(5517),u.VERSION=n(7600).version,u.toFormData=n(1397),u.AxiosError=n(4531),u.Cancel=u.CanceledError,u.all=function(e){return Promise.all(e)},u.spread=n(8089),u.isAxiosError=n(9580),e.exports=u,e.exports.default=u},6857:function(e,t,n){"use strict";var r=n(6569);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},6569:function(e,t,n){"use strict";var r=n(4531);function i(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(3589).inherits(i,r,{__CANCEL__:!0}),e.exports=i},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var r=n(3589),i=n(9774),a=n(7470),o=n(2733),u=n(777),s=n(1804),c=n(7835),l=c.validators;function f(e){this.defaults=e,this.interceptors={request:new a,response:new a}}f.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=u(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var a,s=[];if(this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)})),!i){var f=[o,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(s),a=Promise.resolve(t);f.length;)a=a.then(f.shift(),f.shift());return a}for(var h=t;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(v){p(v);break}}try{a=o(h)}catch(v){return Promise.reject(v)}for(;s.length;)a=a.then(s.shift(),s.shift());return a},f.prototype.getUri=function(e){e=u(this.defaults,e);var t=s(e.baseURL,e.url);return i(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){f.prototype[e]=function(t,n){return this.request(u(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(u(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}f.prototype[e]=t(),f.prototype[e+"Form"]=t(!0)})),e.exports=f},4531:function(e,t,n){"use strict";var r=n(3589);function i(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var a=i.prototype,o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){o[e]={value:e}})),Object.defineProperties(i,o),Object.defineProperty(a,"isAxiosError",{value:!0}),i.from=function(e,t,n,o,u,s){var c=Object.create(a);return r.toFlatObject(e,c,(function(e){return e!==Error.prototype})),i.call(c,e.message,t,n,o,u),c.name=e.name,s&&Object.assign(c,s),c},e.exports=i},7470:function(e,t,n){"use strict";var r=n(3589);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},1804:function(e,t,n){"use strict";var r=n(4044),i=n(9549);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},2733:function(e,t,n){"use strict";var r=n(3589),i=n(2693),a=n(5517),o=n(1709),u=n(6569);function s(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new u}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(s(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},777:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function u(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function s(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:s};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||a,i=t(e);r.isUndefined(i)&&t!==s||(n[e]=i)})),n}},7297:function(e,t,n){"use strict";var r=n(4531);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var r=n(3589),i=n(1709);e.exports=function(e,t,n){var a=this||i;return r.forEach(n,(function(n){e=n.call(a,e,t)})),e}},1709:function(e,t,n){"use strict";var r=n(3589),i=n(4341),a=n(4531),o=n(6789),u=n(1397),s={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:o,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){if(i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,a=r.isObject(e),o=t&&t["Content-Type"];if((n=r.isFileList(e))||a&&"multipart/form-data"===o){var s=this.env&&this.env.FormData;return u(n?{"files[]":e}:e,s&&new s)}return a||"application/json"===o?(c(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(u){if(o){if("SyntaxError"===u.name)throw a.from(u,a.ERR_BAD_RESPONSE,this,null,this.response);throw u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(s)})),e.exports=l},6789:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:function(e){e.exports={version:"0.27.2"}},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:function(e,t,n){"use strict";var r=n(3589);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),a=o.join("&")}if(a){var u=e.indexOf("#");-1!==u&&(e=e.slice(0,u)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,a,o){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(i)&&u.push("path="+i),r.isString(a)&&u.push("domain="+a),!0===o&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},9580:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},3035:function(e){e.exports=null},9145:function(e,t,n){"use strict";var r=n(3589),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,o={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},6261:function(e){"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},1397:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||new FormData;var n=[];function i(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(a,o){if(r.isPlainObject(a)||r.isArray(a)){if(-1!==n.indexOf(a))throw Error("Circular reference detected in "+o);n.push(a),r.forEach(a,(function(n,a){if(!r.isUndefined(n)){var u,s=o?o+"."+a:a;if(n&&!o&&"object"===typeof n)if(r.endsWith(a,"{}"))n=JSON.stringify(n);else if(r.endsWith(a,"[]")&&(u=r.toArray(n)))return void u.forEach((function(e){!r.isUndefined(e)&&t.append(s,i(e))}));e(n,s)}})),n.pop()}else t.append(o,i(a))}(e),t}},7835:function(e,t,n){"use strict";var r=n(7600).version,i=n(4531),a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};a.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,u){if(!1===e)throw new i(a(r," has been removed"+(t?" in "+t:"")),i.ERR_DEPRECATED);return t&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,u)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),a=r.length;a-- >0;){var o=r[a],u=t[o];if(u){var s=e[o],c=void 0===s||u(s,o,e);if(!0!==c)throw new i("option "+o+" must be "+c,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+o,i.ERR_BAD_OPTION)}},validators:a}},3589:function(e,t,n){"use strict";var r,i=n(4049),a=Object.prototype.toString,o=(r=Object.create(null),function(e){var t=a.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function u(e){return e=e.toLowerCase(),function(t){return o(t)===e}}function s(e){return Array.isArray(e)}function c(e){return"undefined"===typeof e}var l=u("ArrayBuffer");function f(e){return null!==e&&"object"===typeof e}function h(e){if("object"!==o(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var d=u("Date"),p=u("File"),v=u("Blob"),y=u("FileList");function m(e){return"[object Function]"===a.call(e)}var g=u("URLSearchParams");function k(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var b,w=(b="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return b&&e instanceof b});e.exports={isArray:s,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||a.call(e)===t||m(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:f,isPlainObject:h,isUndefined:c,isDate:d,isFile:p,isBlob:v,isFunction:m,isStream:function(e){return f(e)&&m(e.pipe)},isURLSearchParams:g,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:k,merge:function e(){var t={};function n(n,r){h(t[r])&&h(n)?t[r]=e(t[r],n):h(n)?t[r]=e({},n):s(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)k(arguments[r],n);return t},extend:function(e,t,n){return k(t,(function(t,r){e[r]=n&&"function"===typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,i,a,o={};t=t||{};do{for(i=(r=Object.getOwnPropertyNames(e)).length;i-- >0;)o[a=r[i]]||(t[a]=e[a],o[a]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:u,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(c(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:w,isFileList:y}},2110:function(e,t,n){"use strict";var r=n(7441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ee(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Oe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ne(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,It,St,Et=!1,Tt=[],Ct=null,Nt=null,At=null,Ot=new Map,Dt=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Ot.forEach(Vt),Dt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Ot.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return In}var En=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(On),Pn=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Rn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Ur(e,0)}function $n(e){if(H(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&$n(Hn)){var t=[];Gn(t,Hn,e,we(e)),Oe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Hn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ir={};function Sr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),s(t,[e])}for(var Pr=0;Pr<Or.length;Pr++){var Rr=Or[Pr];Dr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Dr(Er,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Oe((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Tr:case Cr:s=mn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Jn;else if(Kn(u))if(Yn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(m=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&jn(e,t)?(e=en(),Zt=Xt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=De(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Si(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ei(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Si(Ni),Si(Ci)}function Ri(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ei(Ci,e)):Si(Ni),Ei(Ni,n)}var Ui=null,Vi=!1,ji=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,zi),i}finally{kt=t,ji=!1}}return null}var qi=[],Ki=0,Gi=null,Wi=0,Hi=[],Qi=0,$i=null,Ji=1,Yi="";function Xi(e,t){qi[Ki++]=Wi,qi[Ki++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=Ji,Hi[Qi++]=Yi,Hi[Qi++]=$i,$i=e;var r=Ji;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else Ji=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Wi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Hi[--Qi],Hi[Qi]=null,Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Ji,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ma.current;Si(ma),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ra(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Di(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Oa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Di(t)?Ai:Ci.current,i.context=Oi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Rc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ja=$a(!0),Ya=$a(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ei(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Oo(){}function Do(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Ro.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return To().memoizedState}function Bo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Wo(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function $o(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Ns.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Jo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Yo,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(To(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Jo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Yo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Ra(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ya(t,null,n,r):Ja(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ps,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ps,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ps,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ps,Ds),Ds|=r;return wu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Di(n)?Ai:Ci.current;return a=Oi(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Oi(t,c=Di(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Aa||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Oi(t,s=Di(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ro(e,t.containerInfo)}function Ou(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Du,Pu,Ru,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Ji,Hi[Qi++]=Yi,Hi[Qi++]=$i,Ji=e.id,Yi=e.overflow,$i=t),(t=Uu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Di(t.type)&&Pi(),Wu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":J(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Du(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":J(e,r),i=$(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Ru(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Rs&&(Rs=3):vc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Rs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>zs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Ye()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ru=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Ju=!1,Yu="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Ju&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,hs(e,t,n),Ju=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Ic(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Ic(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ic(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ic(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ic(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){Ic(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Ye())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,vs(t,e),Ju=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xu=e,f=e.child;null!==f;){for(h=Xu=f;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ic(r,n,y)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Xu=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ic(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ic(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=$u;var c=Ju;if($u=o,(Ju=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Xu=s):xs(i);for(;null!==a;)Xu=a,ks(a,t,n),a=a.sibling;Xu=i,$u=u,Ju=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):bs(e)}}function bs(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function ws(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function xs(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var _s,Is=Math.ceil,Ss=b.ReactCurrentDispatcher,Es=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Os=0,Ds=0,Ps=Ii(0),Rs=0,Ls=null,Ms=0,Fs=0,Us=0,Vs=null,js=null,Bs=0,zs=1/0,qs=null,Ks=!1,Gs=null,Ws=null,Hs=!1,Qs=null,$s=0,Js=0,Ys=null,Xs=-1,Zs=0;function ec(){return 0!==(6&Cs)?Ye():-1!==Xs?Xs:Xs=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Os?Os&-Os:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Js)throw Js=0,Ys=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Rs&&uc(e,Os)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(zs=Ye()+500,Vi&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Os:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Os:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Os===t||(qs=null,zs=Ye()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Ss.current=o,Cs=i,null!==As?t=0:(Ns=null,Os=0,t=Rs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Ye()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,js,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,js,qs),t);break}wc(e,js,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,js,qs),r);break}wc(e,js,qs);break;default:throw Error(a(329))}}}return rc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&oc(t)),e}function oc(e){null===js?js=e:js.push.apply(js,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,js,qs),rc(e,Ye()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(zs=Ye()+500,Vi&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&xc();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&zi()}}function fc(){Ds=Ps.current,Si(Ps)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Pc(e.current,null),Os=Ds=t,Rs=0,Ls=null,Us=Fs=Ms=0,js=Vs=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Es.current=null,null===n||null===n.return){Rs=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Os,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Rs&&(Rs=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function vc(){0!==Rs&&3!==Rs&&2!==Rs||(Rs=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Os)}function yc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Os===t||(qs=null,hc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Ss.current=r,null!==As)throw Error(a(261));return Ns=null,Os=0,Rs}function mc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!$e();)kc(As)}function kc(e){var t=_s(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,Es.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Ds)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Rs=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Rs&&(Rs=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Os=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Es.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Je(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Hs&&(Hs=!1,Qs=e,$s=i),0===(o=e.pendingLanes)&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&xc(),0!==(1&(o=e.pendingLanes))?e===Ys?Js++:(Js=0,Ys=e):Js=0,zi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt($s),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,$s=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var f=Xu;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xu=h;else for(;null!==Xu;){var d=(f=Xu).sibling,p=f.return;if(as(f),f===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var b=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Xu=b;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Ic(s,s.return,x)}if(s===u){Xu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Xu=w;break e}Xu=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function _c(e,t,n){e=Ra(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Ra(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Os&n)===n&&(4===Rs||3===Rs&&(130023424&Os)===Os&&500>Ye()-Bs?hc(e,0):Us|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Nc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Oc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Oc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Oc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case O:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Oc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Oc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Pa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Ra(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Kc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ra(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Oi(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oa(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===O)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ou(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ou(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),_u(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),qu(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Jc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Jc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Ye()),0===(6&Cs)&&(zs=Ye()+500,zi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.s=r.createRoot,r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},7441:function(e,t,n){"use strict";e.exports=n(1372)},8459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},6900:function(e,t,n){"use strict";n(8459)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&R(w,t.startTime-e)}}function x(e,n){v=!1,y&&(y=!1,g(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&R(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,S=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?_():(I=!1,S=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,D=O.port2;O.port1.onmessage=A,_=function(){D.postMessage(null)}}else _=function(){m(A,0)};function P(e){S=e,I||(I=!0,_())}function R(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(E),E=-1):y=!0,R(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},1561:function(e,t,n){"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},7595:function(e,t,n){"use strict";var r=n(2791),i=n(7248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},7248:function(e,t,n){"use strict";e.exports=n(1561)},327:function(e,t,n){"use strict";e.exports=n(7595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f4195f39.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="netflix-build:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunknetflix_build=self.webpackChunknetflix_build||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return $n},SDK_VERSION:function(){return ii},_DEFAULT_ENTRY_NAME:function(){return Gr},_addComponent:function(){return $r},_addOrOverwriteComponent:function(){return Jr},_apps:function(){return Hr},_clearComponents:function(){return ei},_components:function(){return Qr},_getProvider:function(){return Xr},_registerComponent:function(){return Yr},_removeServiceInstance:function(){return Zr},deleteApp:function(){return si},getApp:function(){return oi},getApps:function(){return ui},initializeApp:function(){return ai},onLog:function(){return fi},registerVersion:function(){return li},setLogLevel:function(){return hi}});var t=n(2791),r=n(1250),i=n(7248),a=n(327),o=n(4164);var u=function(e){e()},s=function(){return u},c=t.createContext(null);function l(){return(0,t.useContext)(c)}var f=function(){throw new Error("uSES not initialized!")},h=f,d=function(e,t){return e===t};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=e===c?l:function(){return(0,t.useContext)(e)};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;var i=n(),a=i.store,o=i.subscription,u=i.getServerState,s=h(o.addNestedSub,a.getState,u||a.getState,e,r);return(0,t.useDebugValue)(s),s}}var v=p();n(2110),n(6900);var y={notify:function(){},get:function(){return[]}};function m(e,t){var n,r=y;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=s(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=y)},getListeners:function(){return r}};return o}var g=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var k=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=m(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);g((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||c;return t.createElement(s.Provider,{value:o},i)};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=e===c?l:function(){return(0,t.useContext)(e)};return function(){return n().store}}var w=b();function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=e===c?w:b(e);return function(){return t().dispatch}}var _,I=x();function S(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function E(e){return!!e&&!!e[ve]}function T(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===ye}(e)||Array.isArray(e)||!!e[pe]||!!e.constructor[pe]||R(e)||L(e))}function C(e,t,n){void 0===n&&(n=!1),0===N(e)?(n?Object.keys:me)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function N(e){var t=e[ve];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:R(e)?2:L(e)?3:0}function A(e,t){return 2===N(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function O(e,t){return 2===N(e)?e.get(t):e[t]}function D(e,t,n){var r=N(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function P(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function R(e){return le&&e instanceof Map}function L(e){return fe&&e instanceof Set}function M(e){return e.o||e.t}function F(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ge(e);delete t[ve];for(var n=me(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function U(e,t){return void 0===t&&(t=!1),j(e)||E(e)||!T(e)||(N(e)>1&&(e.set=e.add=e.clear=e.delete=V),Object.freeze(e),t&&C(e,(function(e,t){return U(t,!0)}),!0)),e}function V(){S(2)}function j(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function B(e){var t=ke[e];return t||S(18,e),t}function z(e,t){ke[e]||(ke[e]=t)}function q(){return se}function K(e,t){t&&(B("Patches"),e.u=[],e.s=[],e.v=t)}function G(e){W(e),e.p.forEach(Q),e.p=null}function W(e){e===se&&(se=e.l)}function H(e){return se={p:[],l:se,h:e,m:!0,_:0}}function Q(e){var t=e[ve];0===t.i||1===t.i?t.j():t.O=!0}function $(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||B("ES5").S(t,e,r),r?(n[ve].P&&(G(t),S(4)),T(e)&&(e=J(t,e),t.l||X(t,e)),t.u&&B("Patches").M(n[ve].t,e,t.u,t.s)):e=J(t,n,[]),G(t),t.u&&t.v(t.u,t.s),e!==de?e:void 0}function J(e,t,n){if(j(t))return t;var r=t[ve];if(!r)return C(t,(function(i,a){return Y(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return X(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=F(r.k):r.o;C(3===r.i?new Set(i):i,(function(t,a){return Y(e,r,i,t,a,n)})),X(e,i,!1),n&&e.u&&B("Patches").R(r,n,e.u,e.s)}return r.o}function Y(e,t,n,r,i,a){if(E(i)){var o=J(e,i,a&&t&&3!==t.i&&!A(t.D,r)?a.concat(r):void 0);if(D(n,r,o),!E(o))return;e.m=!1}if(T(i)&&!j(i)){if(!e.h.F&&e._<1)return;J(e,i),t&&t.A.l||X(e,i)}}function X(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&U(t,n)}function Z(e,t){var n=e[ve];return(n?M(n):e)[t]}function ee(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function te(e){e.P||(e.P=!0,e.l&&te(e.l))}function ne(e){e.o||(e.o=F(e.t))}function re(e,t,n){var r=R(t)?B("MapSet").N(t,n):L(t)?B("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:q(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=be;n&&(i=[r],a=we);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.k=s,r.j=u,s}(t,n):B("ES5").J(t,n);return(n?n.A:q()).p.push(r),r}function ie(e){return E(e)||S(22,e),function e(t){if(!T(t))return t;var n,r=t[ve],i=N(t);if(r){if(!r.P&&(r.i<4||!B("ES5").K(r)))return r.t;r.I=!0,n=ae(t,i),r.I=!1}else n=ae(t,i);return C(n,(function(t,i){r&&O(r.t,t)===i||D(n,t,e(i))})),3===i?new Set(n):n}(e)}function ae(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return F(e)}function oe(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[ve];return be.get(t,e)},set:function(t){var n=this[ve];be.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][ve];if(!i.P)switch(i.i){case 5:r(i)&&te(i);break;case 4:n(i)&&te(i)}}}function n(e){for(var t=e.t,n=e.k,r=me(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==ve){var o=t[a];if(void 0===o&&!A(t,a))return!0;var u=n[a],s=u&&u[ve];if(s?s.t!==o:!P(u,o))return!0}}var c=!!t[ve];return r.length!==me(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};z("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=ge(n);delete a[ve];for(var o=me(a),u=0;u<o.length;u++){var s=o[u];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:q(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,ve,{value:a,writable:!0}),i},S:function(e,n,i){i?E(n)&&n[ve].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[ve];if(n){var i=n.t,a=n.k,o=n.D,u=n.i;if(4===u)C(a,(function(t){t!==ve&&(void 0!==i[t]||A(i,t)?o[t]||e(a[t]):(o[t]=!0,te(n)))})),C(i,(function(e){void 0!==a[e]||A(a,e)||(o[e]=!1,te(n))}));else if(5===u){if(r(n)&&(te(n),o.length=!0),a.length<i.length)for(var s=a.length;s<i.length;s++)o[s]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}!function(e){h=e}(a.useSyncExternalStoreWithSelector),function(e){e}(i.useSyncExternalStore),_=o.unstable_batchedUpdates,u=_;var ue,se,ce="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),le="undefined"!=typeof Map,fe="undefined"!=typeof Set,he="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,de=ce?Symbol.for("immer-nothing"):((ue={})["immer-nothing"]=!0,ue),pe=ce?Symbol.for("immer-draftable"):"__$immer_draftable",ve=ce?Symbol.for("immer-state"):"__$immer_state",ye=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),me="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ge=Object.getOwnPropertyDescriptors||function(e){var t={};return me(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},ke={},be={get:function(e,t){if(t===ve)return e;var n=M(e);if(!A(n,t))return function(e,t,n){var r,i=ee(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!T(r)?r:r===Z(e.t,t)?(ne(e),e.o[t]=re(e.A.h,r,e)):r},has:function(e,t){return t in M(e)},ownKeys:function(e){return Reflect.ownKeys(M(e))},set:function(e,t,n){var r=ee(M(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Z(M(e),t),a=null==i?void 0:i[ve];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(P(n,i)&&(void 0!==n||A(e.t,t)))return!0;ne(e),te(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Z(e.t,t)||t in e.t?(e.D[t]=!1,ne(e),te(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=M(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){S(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){S(12)}},we={};C(be,(function(e,t){we[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),we.deleteProperty=function(e,t){return we.set.call(this,e,t,void 0)},we.set=function(e,t,n){return be.set.call(this,e[0],t,n,e[0])};var xe=function(){function e(e){var t=this;this.g=he,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&S(6),void 0!==r&&"function"!=typeof r&&S(7),T(e)){var u=H(t),s=re(t,e,void 0),c=!0;try{o=n(s),c=!1}finally{c?G(u):W(u)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return K(u,r),$(e,u)}),(function(e){throw G(u),e})):(K(u,r),$(o,u))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===de&&(o=void 0),t.F&&U(o,!0),r){var l=[],f=[];B("Patches").M(e,o,l,f),r(l,f)}return o}S(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){T(e)||S(8),E(e)&&(e=ie(e));var t=H(this),n=re(this,e,void 0);return n[ve].C=!0,W(t),n},t.finishDraft=function(e,t){var n=(e&&e[ve]).A;return K(n,t),$(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!he&&S(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=B("Patches").$;return E(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),_e=new xe,Ie=_e.produce,Se=(_e.produceWithPatches.bind(_e),_e.setAutoFreeze.bind(_e),_e.setUseProxies.bind(_e),_e.applyPatches.bind(_e),_e.createDraft.bind(_e),_e.finishDraft.bind(_e),Ie);function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ae="function"===typeof Symbol&&Symbol.observable||"@@observable",Oe=function(){return Math.random().toString(36).substring(7).split("").join(".")},De={INIT:"@@redux/INIT"+Oe(),REPLACE:"@@redux/REPLACE"+Oe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Oe()}};function Pe(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Re(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Ne(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Ne(1));return n(Re)(e,t)}if("function"!==typeof e)throw new Error(Ne(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(Ne(3));return a}function f(e){if("function"!==typeof e)throw new Error(Ne(4));if(s)throw new Error(Ne(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(Ne(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!Pe(e))throw new Error(Ne(7));if("undefined"===typeof e.type)throw new Error(Ne(8));if(s)throw new Error(Ne(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(Ne(10));i=e,h({type:De.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Ne(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Ae]=function(){return this},e}return h({type:De.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[Ae]=p,r}function Le(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:De.INIT}))throw new Error(Ne(12));if("undefined"===typeof n(void 0,{type:De.PROBE_UNKNOWN_ACTION()}))throw new Error(Ne(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(Ne(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Me(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Fe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Ne(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=Me.apply(void 0,a)(n.dispatch),Ce(Ce({},n),{},{dispatch:r})}}}function Ue(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Ve=Ue();Ve.withExtraArgument=Ue;var je=Ve,Be=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ze=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},qe=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Ke=Object.defineProperty,Ge=Object.defineProperties,We=Object.getOwnPropertyDescriptors,He=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,Je=function(e,t,n){return t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ye=function(e,t){for(var n in t||(t={}))Qe.call(t,n)&&Je(e,n,t[n]);if(He)for(var r=0,i=He(t);r<i.length;r++){n=i[r];$e.call(t,n)&&Je(e,n,t[n])}return e},Xe=function(e,t){return Ge(e,We(t))},Ze=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{u(n.next(e))}catch(t){i(t)}},o=function(e){try{u(n.throw(e))}catch(t){i(t)}},u=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};u((n=n.apply(e,t)).next())}))},et="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Me:Me.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function tt(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var nt=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Be(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,qe([void 0],e[0].concat(this)))):new(t.bind.apply(t,qe([void 0],e.concat(this))))},t}(Array);function rt(e){return T(e)?Se(e,(function(){})):e}function it(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new nt);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(je.withExtraArgument(n.extraArgument)):r.push(je));0;return r}(e)}}function at(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Ye(Ye({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function ot(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}var ut=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},st=["name","message","stack","code"],ct=function(e,t){this.payload=e,this.meta=t},lt=function(e,t){this.payload=e,this.meta=t},ft=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=st;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};function ht(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var dt="listenerMiddleware";at(dt+"/add"),at(dt+"/removeAll"),at(dt+"/remove");function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function vt(){vt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==pt(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function yt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function mt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){yt(a,r,i,o,u,"next",e)}function u(e){yt(a,r,i,o,u,"throw",e)}o(void 0)}))}}function gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}oe();!function(e,t,n){var r=at(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:Xe(Ye({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=at(e+"/pending",(function(e,t,n){return{payload:void 0,meta:Xe(Ye({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=at(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||ft)(e||"Rejected"),meta:Xe(Ye({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();Object.assign((function(e){return function(u,s,c){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):ut(),h=new o,d=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),p=!1;var v=function(){return Ze(this,null,(function(){var o,l,v,y,m;return ze(this,(function(g){switch(g.label){case 0:return g.trys.push([0,4,,5]),y=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:s,extra:c}),null===(k=y)||"object"!==typeof k||"function"!==typeof k.then?[3,2]:[4,y];case 1:y=g.sent(),g.label=2;case 2:if(!1===y)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return p=!0,u(i(f,e,null==(l=null==n?void 0:n.getPendingMeta)?void 0:l.call(n,{requestId:f,arg:e},{getState:s,extra:c}))),[4,Promise.race([d,Promise.resolve(t(e,{dispatch:u,getState:s,extra:c,requestId:f,signal:h.signal,rejectWithValue:function(e,t){return new ct(e,t)},fulfillWithValue:function(e,t){return new lt(e,t)}})).then((function(t){if(t instanceof ct)throw t;return t instanceof lt?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return v=g.sent(),[3,5];case 4:return m=g.sent(),v=m instanceof ct?a(null,f,e,m.payload,m.meta):a(m,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||u(v),[2,v]}var k}))}))}();return Object.assign(v,{abort:function(e){p&&(l=e,h.abort())},requestId:f,arg:e,unwrap:function(){return v.then(ht)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}("counter/fetchCount",function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var kt,bt=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:rt(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},u={},s={};function c(){var t="function"===typeof e.extraReducers?ot(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,s=t[2],c=void 0===s?void 0:s,l=Ye(Ye({},i),u);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?ot(t):[t,n,r],o=a[0],u=a[1],s=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return rt(e())};else{var c=rt(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=qe([o[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,n){if(n){var r;if(E(e))return void 0===(r=n(e,t))?e:r;if(T(e))return Se(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,l,o,c)}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,u[c]=n,s[e]=r?at(c,r):at(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:s,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}({name:"user",initialState:{user:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null}}}),wt=bt.actions,xt=wt.login,_t=wt.logout,It=function(e){return e.user.user},St=function(e){var t,n=it(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,u=void 0===o?n():o,s=r.devTools,c=void 0===s||s,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!tt(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Le(a)}var p=u;"function"===typeof p&&(p=p(n));var v=Fe.apply(void 0,p),y=Me;c&&(y=et(Ye({trace:!1},"object"===typeof c&&c)));var m=[v];return Array.isArray(d)?m=qe([v],d):"function"===typeof d&&(m=d(m)),Re(t,f,y.apply(void 0,m))}({reducer:{user:bt.reducer}});function Et(e){if(Array.isArray(e))return e}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ct(e,t){if(e){if("string"===typeof e)return Tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tt(e,t):void 0}}function Nt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function At(e,t){return Et(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||Ct(e,t)||Nt()}function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(kt||(kt={}));var Dt=function(e){return e};var Pt="beforeunload",Rt="popstate";function Lt(e){e.preventDefault(),e.returnValue=""}function Mt(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function Ft(){return Math.random().toString(36).substr(2,8)}function Ut(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function Vt(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var jt=(0,t.createContext)(null);var Bt=(0,t.createContext)(null);var zt=(0,t.createContext)({outlet:null,matches:[]});function qt(e,t){if(!e)throw new Error(t)}function Kt(e,t,n){void 0===n&&(n="/");var r=Xt(("string"===typeof t?Vt(t):t).pathname||"/",n);if(null==r)return null;var i=Gt(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=$t(i[o],r);return a}function Gt(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||qt(!1),a.relativePath=a.relativePath.slice(r.length));var o=Zt([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&qt(!1),Gt(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:Qt(o,e.index),routesMeta:u})})),t}var Wt=/^:\w+$/,Ht=function(e){return"*"===e};function Qt(e,t){var n=e.split("/"),r=n.length;return n.some(Ht)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!Ht(e)})).reduce((function(e,t){return e+(Wt.test(t)?3:""===t?1:10)}),r)}function $t(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Jt({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:Zt([i,l.pathname]),pathnameBase:en(Zt([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=Zt([i,l.pathnameBase]))}return a}function Jt(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=At(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function Yt(e,t,n){var r,i="string"===typeof e?Vt(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Vt(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:tn(a),hash:nn(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function Xt(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var Zt=function(e){return e.join("/").replace(/\/\/+/g,"/")},en=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},tn=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},nn=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function rn(){return null!=(0,t.useContext)(Bt)}function an(){return rn()||qt(!1),(0,t.useContext)(Bt).location}function on(){rn()||qt(!1);var e=(0,t.useContext)(jt),n=e.basename,r=e.navigator,i=(0,t.useContext)(zt).matches,a=an().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=Yt(e,JSON.parse(o),a);"/"!==n&&(i.pathname=Zt([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}function un(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(zt.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function sn(e){qt(!1)}function cn(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?kt.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;rn()&&qt(!1);var h=en(r),d=(0,t.useMemo)((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=Vt(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,_=p.key,I=void 0===_?"default":_,S=(0,t.useMemo)((function(){var e=Xt(y,h);return null==e?null:{pathname:e,search:g,hash:b,state:x,key:I}}),[h,y,g,b,x,I]);return null==S?null:(0,t.createElement)(jt.Provider,{value:d},(0,t.createElement)(Bt.Provider,{children:a,value:{location:S,navigationType:s}}))}function ln(e){var n=e.children,r=e.location;return function(e,n){rn()||qt(!1);var r,i=(0,t.useContext)(zt).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,an());if(n){var c,l="string"===typeof n?Vt(n):n;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||qt(!1),r=l}else r=s;var f=r.pathname||"/",h=Kt(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return un(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:Zt([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:Zt([u,e.pathnameBase])})})),i)}(fn(n),r)}function fn(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==sn&&qt(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=fn(e.props.children)),n.push(r)}else n.push.apply(n,fn(e.props.children))})),n}var hn=n(184);var dn=function(){var e=At(t.useState(!1),2),n=e[0],r=e[1],i=on(),a=function(){window.scrollY>100?r(!0):r(!1)};return t.useEffect((function(){return window.addEventListener("scroll",a),function(){return window.removeEventListener("scroll",a)}}),[]),(0,hn.jsx)("div",{className:"nav ".concat(n&&"nav__black"),children:(0,hn.jsxs)("div",{className:"nav__contents",children:[(0,hn.jsx)("img",{onClick:function(){return i("/")},className:"nav__logo",src:"netflixnb.png",alt:""}),(0,hn.jsx)("img",{onClick:function(){return i("/profile")},className:"nav__avatar",src:"https://mir-s3-cdn-cf.behance.net/project_modules/disp/84c20033850498.56ba69ac290ea.png",alt:""})]})})},pn=n(4569),vn=n.n(pn)().create({baseURL:"https://api.themoviedb.org/3"}),yn="d6e1053a3e80662edd139eb79b25ca8b",mn={fetchTrending:"/trending/all/week?api_key=".concat(yn,"&language=en-US"),fetchNetflixOriginals:"/discover/tv/?api_key=".concat(yn,"&with_networks=213"),fetchTopRated:"/movie/top_rated?api_key=".concat(yn,"&language=en-US"),fetchActionMovies:"/discover/movie?api_key=".concat(yn,"&with_genres=28"),fetchComedyMovies:"/discover/movie?api_key=".concat(yn,"&with_genres=35"),fetchHorrorMovies:"/discover/movie?api_key=".concat(yn,"&with_genres=27"),fetchRomanceMovies:"/discover/movie?api_key=".concat(yn,"&with_genres=10749"),fetchDocumentaries:"/discover/movie?api_key=".concat(yn,"&with_genres=99")};var gn=function(){var e=At(t.useState([]),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){function e(){return(e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn.get(mn.fetchNetflixOriginals);case 2:return t=e.sent,r(t.data.results[Math.floor(Math.random()*t.data.results.length-1)]),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),console.log(n),(0,hn.jsxs)("header",{className:"banner",style:{backgroundSize:"cover",backgroundImage:'url("https://image.tmdb.org/t/p/original/'.concat(n.backdrop_path,'")'),backgroundPosition:"center center"},children:[(0,hn.jsxs)("div",{className:"banner__contents",children:[(0,hn.jsx)("h1",{className:"banner__title",children:(null===n||void 0===n?void 0:n.title)||(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.original_name)}),(0,hn.jsxs)("div",{className:"banner__buttons",children:[(0,hn.jsx)("button",{className:"banner__button",children:"Play"}),(0,hn.jsx)("button",{className:"banner__button",children:"My List"})]}),(0,hn.jsx)("h1",{className:"banner__description",children:function(e,t){return(null===e||void 0===e?void 0:e.length)>t?e.substr(0,t-1)+"...":e}(null===n||void 0===n?void 0:n.overview,150)})]}),(0,hn.jsx)("div",{className:"banner__fadeBottom"})]})};var kn=function(e){var n=e.title,r=e.fetchUrl,i=e.isLargeRow,a=void 0!==i&&i,o=At(t.useState([]),2),u=o[0],s=o[1];return t.useEffect((function(){function e(){return(e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn.get(r);case 2:return t=e.sent,s(t.data.results),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),(0,hn.jsxs)("div",{className:"row",children:[(0,hn.jsx)("h2",{children:n}),(0,hn.jsx)("div",{className:"row__posters",children:u.map((function(e){return(a&&e.poster_path||!a&&e.backdrop_path)&&(0,hn.jsx)("img",{className:"row__poster ".concat(a&&"row__posterLarge"),src:"".concat("https://image.tmdb.org/t/p/original/").concat(a?e.poster_path:e.backdrop_path),alt:u.name},e.id)}))})]})};var bn=function(){return(0,hn.jsxs)("div",{className:"homeScreen",children:[(0,hn.jsx)(dn,{}),(0,hn.jsx)(gn,{}),(0,hn.jsx)(kn,{title:"NETFLIX ORIGINALS",fetchUrl:mn.fetchNetflixOriginals,isLargeRow:!0}),(0,hn.jsx)(kn,{title:"Top Rated",fetchUrl:mn.fetchTopRated}),(0,hn.jsx)(kn,{title:"Action Movies",fetchUrl:mn.fetchActionMovies}),(0,hn.jsx)(kn,{title:"Comedy Movies",fetchUrl:mn.fetchComedyMovies}),(0,hn.jsx)(kn,{title:"Horror Movies",fetchUrl:mn.fetchHorrorMovies}),(0,hn.jsx)(kn,{title:"Romance Movies",fetchUrl:mn.fetchRomanceMovies}),(0,hn.jsx)(kn,{title:"Documentaries",fetchUrl:mn.fetchDocumentaries})]})};function wn(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,Dt({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(Rt,(function(){if(a)f.call(a),a=null;else{var e=kt.Pop,t=i(),n=t[0],r=t[1];if(f.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){m(-1*o)}},m(o))}}else y(e)}}));var o=kt.Pop,u=i(),s=u[0],c=u[1],l=Mt(),f=Mt();function h(e){return"string"===typeof e?e:Ut(e)}function d(e,t){return void 0===t&&(t=null),Dt(Ot({pathname:c.pathname,hash:"",search:""},"string"===typeof e?Vt(e):e,{state:t,key:Ft()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},h(e)]}function v(e,t,n){return!f.length||(f.call({action:e,location:t,retry:n}),!1)}function y(e){o=e;var t=i();s=t[0],c=t[1],l.call({action:o,location:c})}function m(e){r.go(e)}null==s&&(s=0,r.replaceState(Ot({},r.state,{idx:s}),""));var g={get action(){return o},get location(){return c},createHref:h,push:function e(t,i){var a=kt.Push,o=d(t,i);if(v(a,o,(function(){e(t,i)}))){var u=p(o,s+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(f){n.location.assign(l)}y(a)}},replace:function e(t,n){var i=kt.Replace,a=d(t,n);if(v(i,a,(function(){e(t,n)}))){var o=p(a,s),u=o[0],c=o[1];r.replaceState(u,"",c),y(i)}},go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(e){return l.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&n.addEventListener(Pt,Lt),function(){t(),f.length||n.removeEventListener(Pt,Lt)}}};return g}({window:i}));var o=a.current,u=At((0,t.useState)({action:o.action,location:o.location}),2),s=u[0],c=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(cn,{basename:n,children:r,location:s.location,navigationType:s.action,navigator:o})}function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function In(e,t,n){return t&&_n(e.prototype,t),n&&_n(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ct(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function En(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tn(e,t){return Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tn(e,t)}function Cn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tn(e,t)}function Nn(e){return Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nn(e)}function An(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function On(e,t){if(t&&("object"===pt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return En(e)}function Dn(e){var t=An();return function(){var n,r=Nn(e);if(t){var i=Nn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return On(this,n)}}function Pn(e,t,n){return Pn=An()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Tn(i,n.prototype),i},Pn.apply(null,arguments)}function Rn(e){var t="function"===typeof Map?new Map:void 0;return Rn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Pn(e,arguments,Nn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Tn(n,e)},Rn(e)}var Ln=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Mn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ln(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Fn=function(e){return function(e){var t=Ln(e);return Mn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Un=function(e){try{return Mn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Vn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Vn(e[n],t[n]));return e}var jn=function(){function e(){var t=this;xn(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return In(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Bn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Fn(JSON.stringify({alg:"none",type:"JWT"})),Fn(JSON.stringify(a)),""].join(".")}function zn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function qn(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function Kn(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Gn(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Wn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Hn(){var e=zn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Qn(){return"object"===typeof indexedDB}var $n=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){var a;return xn(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(En(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(En(a),Jn.prototype.create),a}return In(n)}(Rn(Error)),Jn=function(){function e(t,n,r){xn(this,e),this.service=t,this.serviceName=n,this.errors=r}return In(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Yn(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new $n(n,a,t);return o}}]),e}();function Yn(e,t){return e.replace(Xn,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Xn=/\{\$([^}]+)}/g;function Zn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function er(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(tr(u)&&tr(s)){if(!er(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function tr(e){return null!==e&&"object"===typeof e}function nr(e){for(var t=[],n=function(){var e=At(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function rr(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=At(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ir(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ar(e,t){var n=new or(e,t);return n.subscribe.bind(n)}var or=function(){function e(t,n){var r=this;xn(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return In(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Sn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ur),void 0===r.error&&(r.error=ur),void 0===r.complete&&(r.complete=ur);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ur(){}function sr(e){return e&&e._delegate?e._delegate:e}function cr(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function lr(e){return function(e){if(Array.isArray(e))return Tt(e)}(e)||cr(e)||Ct(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var fr=function(){function e(t,n,r){xn(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return In(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),hr="[DEFAULT]",dr=function(){function e(t,n){xn(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return In(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new jn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:hr})}catch(s){}var t,n=Sn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=At(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(lr(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),lr(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Sn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=At(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===hr?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr;return this.component?this.component.multipleInstances?e:hr:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var pr,vr,yr=function(){function e(t){xn(this,e),this.name=t,this.providers=new Map}return In(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new dr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),mr=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(vr||(vr={}));var gr={debug:vr.DEBUG,verbose:vr.VERBOSE,info:vr.INFO,warn:vr.WARN,error:vr.ERROR,silent:vr.SILENT},kr=vr.INFO,br=(Ee(pr={},vr.DEBUG,"log"),Ee(pr,vr.VERBOSE,"log"),Ee(pr,vr.INFO,"info"),Ee(pr,vr.WARN,"warn"),Ee(pr,vr.ERROR,"error"),pr),wr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=br[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},xr=function(){function e(t){xn(this,e),this.name=t,this._logLevel=kr,this._logHandler=wr,this._userLogHandler=null,mr.push(this)}return In(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in vr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?gr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vr.DEBUG].concat(t)),this._logHandler.apply(this,[this,vr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,vr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vr.INFO].concat(t)),this._logHandler.apply(this,[this,vr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vr.WARN].concat(t)),this._logHandler.apply(this,[this,vr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vr.ERROR].concat(t)),this._logHandler.apply(this,[this,vr.ERROR].concat(t))}}]),e}();var _r,Ir;var Sr=new WeakMap,Er=new WeakMap,Tr=new WeakMap,Cr=new WeakMap,Nr=new WeakMap;var Ar={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Er.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Tr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Or(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ir||(Ir=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Rr(this),n),Pr(Sr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Pr(e.apply(Rr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Rr(this),t].concat(r));return Tr.set(a,t.sort?t.sort():[t]),Pr(a)}}function Dr(e){return"function"===typeof e?Or(e):(e instanceof IDBTransaction&&function(e){if(!Er.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Er.set(e,t)}}(e),t=e,(_r||(_r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Ar):e);var t}function Pr(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Pr(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Sr.set(t,e)})).catch((function(){})),Nr.set(t,e),t}(e);if(Cr.has(e))return Cr.get(e);var t=Dr(e);return t!==e&&(Cr.set(e,t),Nr.set(t,e)),t}var Rr=function(e){return Nr.get(e)};var Lr,Mr,Fr=["get","getKey","getAll","getAllKeys","count"],Ur=["put","add","delete","clear"],Vr=new Map;function jr(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Vr.get(t))return Vr.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ur.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Fr.includes(n))){var a=function(){var e=mt(vt().mark((function e(t){var a,o,u,s,c,l,f=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Vr.set(t,a),a}}}Ar=function(e){return Ce(Ce({},e),{},{get:function(t,n,r){return jr(t,n)||e.get(t,n,r)},has:function(t,n){return!!jr(t,n)||e.has(t,n)}})}(Ar);var Br=function(){function e(t){xn(this,e),this.container=t}return In(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var zr="@firebase/app",qr="0.7.31",Kr=new xr("@firebase/app"),Gr="[DEFAULT]",Wr=(Ee(Lr={},zr,"fire-core"),Ee(Lr,"@firebase/app-compat","fire-core-compat"),Ee(Lr,"@firebase/analytics","fire-analytics"),Ee(Lr,"@firebase/analytics-compat","fire-analytics-compat"),Ee(Lr,"@firebase/app-check","fire-app-check"),Ee(Lr,"@firebase/app-check-compat","fire-app-check-compat"),Ee(Lr,"@firebase/auth","fire-auth"),Ee(Lr,"@firebase/auth-compat","fire-auth-compat"),Ee(Lr,"@firebase/database","fire-rtdb"),Ee(Lr,"@firebase/database-compat","fire-rtdb-compat"),Ee(Lr,"@firebase/functions","fire-fn"),Ee(Lr,"@firebase/functions-compat","fire-fn-compat"),Ee(Lr,"@firebase/installations","fire-iid"),Ee(Lr,"@firebase/installations-compat","fire-iid-compat"),Ee(Lr,"@firebase/messaging","fire-fcm"),Ee(Lr,"@firebase/messaging-compat","fire-fcm-compat"),Ee(Lr,"@firebase/performance","fire-perf"),Ee(Lr,"@firebase/performance-compat","fire-perf-compat"),Ee(Lr,"@firebase/remote-config","fire-rc"),Ee(Lr,"@firebase/remote-config-compat","fire-rc-compat"),Ee(Lr,"@firebase/storage","fire-gcs"),Ee(Lr,"@firebase/storage-compat","fire-gcs-compat"),Ee(Lr,"@firebase/firestore","fire-fst"),Ee(Lr,"@firebase/firestore-compat","fire-fst-compat"),Ee(Lr,"fire-js","fire-js"),Ee(Lr,"firebase","fire-js-all"),Lr),Hr=new Map,Qr=new Map;function $r(e,t){try{e.container.addComponent(t)}catch(n){Kr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Jr(e,t){e.container.addOrOverwriteComponent(t)}function Yr(e){var t=e.name;if(Qr.has(t))return Kr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Qr.set(t,e);var n,r=Sn(Hr.values());try{for(r.s();!(n=r.n()).done;){$r(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Xr(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Zr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gr;Xr(e,t).clearInstance(n)}function ei(){Qr.clear()}var ti=(Ee(Mr={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ee(Mr,"bad-app-name","Illegal App name: '{$appName}"),Ee(Mr,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ee(Mr,"app-deleted","Firebase App named '{$appName}' already deleted"),Ee(Mr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ee(Mr,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ee(Mr,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Ee(Mr,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Ee(Mr,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Ee(Mr,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Mr),ni=new Jn("app","Firebase",ti),ri=function(){function e(t,n,r){var i=this;xn(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fr("app",(function(){return i}),"PUBLIC"))}return In(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}]),e}(),ii="9.9.3";function ai(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Gr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ni.create("bad-app-name",{appName:String(i)});var a=Hr.get(i);if(a){if(er(e,a.options)&&er(r,a.config))return a;throw ni.create("duplicate-app",{appName:i})}var o,u=new yr(i),s=Sn(Qr.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new ri(e,r,u);return Hr.set(i,l),l}function oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr,t=Hr.get(e);if(!t)throw ni.create("no-app",{appName:e});return t}function ui(){return Array.from(Hr.values())}function si(e){return ci.apply(this,arguments)}function ci(){return(ci=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Hr.has(n)){e.next=6;break}return Hr.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function li(e,t,n){var r,i=null!==(r=Wr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Kr.warn(u.join(" "))}Yr(new fr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function fi(e,t){if(null!==e&&"function"!==typeof e)throw ni.create("invalid-log-argument");!function(e,t){var n,r=Sn(mr);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=gr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:vr[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function hi(e){var t;t=e,mr.forEach((function(e){e.setLogLevel(t)}))}var di="firebase-heartbeat-store",pi=null;function vi(){return pi||(pi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Pr(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Pr(u.result),e.oldVersion,e.newVersion,Pr(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(di)}}).catch((function(e){throw ni.create("idb-open",{originalErrorMessage:e.message})}))),pi}function yi(e){return mi.apply(this,arguments)}function mi(){return mi=mt(vt().mark((function e(t){var n,r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vi();case 3:return r=e.sent,e.abrupt("return",r.transaction(di).objectStore(di).get(bi(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof $n?Kr.warn(e.t0.message):(i=ni.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),Kr.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),mi.apply(this,arguments)}function gi(e,t){return ki.apply(this,arguments)}function ki(){return ki=mt(vt().mark((function e(t,n){var r,i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vi();case 3:return i=e.sent,a=i.transaction(di,"readwrite"),o=a.objectStore(di),e.next=8,o.put(n,bi(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof $n?Kr.warn(e.t0.message):(u=ni.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),Kr.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ki.apply(this,arguments)}function bi(e){return"".concat(e.name,"!").concat(e.options.appId)}var wi=function(){function e(t){var n=this;xn(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ei(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return In(e,[{key:"triggerHeartbeat",value:function(){var e=mt(vt().mark((function e(){var t,n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=xi(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=mt(vt().mark((function e(){var t,n,r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=xi(),n=_i(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Fn(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function xi(){return(new Date).toISOString().substring(0,10)}function _i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Sn(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ti(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ti(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Ii,Si,Ei=function(){function e(t){xn(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return In(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qn()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,yi(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=mt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",gi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=mt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",gi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(lr(r.heartbeats),lr(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ti(e){return Fn(JSON.stringify({version:2,heartbeats:e})).length}Ii="",Yr(new fr("platform-logger",(function(e){return new Br(e)}),"PRIVATE")),Yr(new fr("heartbeat",(function(e){return new wi(e)}),"PRIVATE")),li(zr,qr,Ii),li(zr,qr,"esm2017"),li("fire-js","");var Ci=function(){function e(t,n){var r=this;xn(this,e),this._delegate=t,this.firebase=n,$r(t,new fr("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return In(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),si(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){$r(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Jr(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Ni=(Ee(Si={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ee(Si,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Si),Ai=new Jn("app-compat","Firebase",Ni);var Oi=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ai(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Zn(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:li,setLogLevel:hi,onLog:fi,apps:null,SDK_VERSION:ii,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Yr(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ai.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Vn(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Zn(n,e=e||Gr))throw Ai.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Ci);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Vn(n,e)},createSubscribe:ar,ErrorFactory:Jn,deepExtend:Vn}),n}(),Di=new xr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Di.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Pi=self.firebase.SDK_VERSION;Pi&&Pi.indexOf("LITE")>=0&&Di.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ri=Oi;!function(e){li("@firebase/app-compat","0.1.32",e)}();function Li(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nn(e)););return e}function Mi(){return Mi="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Li(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Mi.apply(this,arguments)}Ri.registerVersion("firebase","9.9.3","app-compat");function Fi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ui;Object.create;var Vi="facebook.com",ji="github.com",Bi="google.com",zi="password",qi="twitter.com",Ki="EMAIL_SIGNIN",Gi="PASSWORD_RESET",Wi="RECOVER_EMAIL",Hi="REVERT_SECOND_FACTOR_ADDITION",Qi="VERIFY_AND_CHANGE_EMAIL",$i="VERIFY_EMAIL";function Ji(){return Ee({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Yi=function(){var e;return Ee(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Ee(e,"argument-error",""),Ee(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Ee(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Ee(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Ee(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Ee(e,"cordova-not-ready","Cordova framework is not ready."),Ee(e,"cors-unsupported","This browser is not supported."),Ee(e,"credential-already-in-use","This credential is already associated with a different user account."),Ee(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Ee(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Ee(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Ee(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Ee(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Ee(e,"email-already-in-use","The email address is already in use by another account."),Ee(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Ee(e,"expired-action-code","The action code has expired."),Ee(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Ee(e,"internal-error","An internal AuthError has occurred."),Ee(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Ee(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Ee(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Ee(e,"invalid-auth-event","An internal AuthError has occurred."),Ee(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Ee(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Ee(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Ee(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Ee(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Ee(e,"invalid-email","The email address is badly formatted."),Ee(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Ee(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Ee(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Ee(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Ee(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Ee(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Ee(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Ee(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Ee(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Ee(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Ee(e,"wrong-password","The password is invalid or the user does not have a password."),Ee(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Ee(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Ee(e,"invalid-provider-id","The specified provider ID is invalid."),Ee(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Ee(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Ee(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Ee(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Ee(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Ee(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Ee(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Ee(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Ee(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Ee(e,"missing-continue-uri","A continue URL must be provided in the request."),Ee(e,"missing-iframe-start","An internal AuthError has occurred."),Ee(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Ee(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Ee(e,"missing-multi-factor-info","No second factor identifier is provided."),Ee(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Ee(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Ee(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Ee(e,"app-deleted","This instance of FirebaseApp has been deleted."),Ee(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Ee(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Ee(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Ee(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Ee(e,"no-auth-event","An internal AuthError has occurred."),Ee(e,"no-such-provider","User was not linked to an account with the given provider."),Ee(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Ee(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Ee(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Ee(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Ee(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Ee(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Ee(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Ee(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Ee(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Ee(e,"rejected-credential","The request contains malformed or mismatching credentials."),Ee(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Ee(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Ee(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Ee(e,"timeout","The operation has timed out."),Ee(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Ee(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Ee(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Ee(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Ee(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Ee(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Ee(e,"unverified-email","The operation requires a verified email."),Ee(e,"user-cancelled","The user did not grant your application the permissions it requested."),Ee(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Ee(e,"user-disabled","The user account has been disabled by an administrator."),Ee(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Ee(e,"user-signed-out",""),Ee(e,"weak-password","The password must be 6 characters long or more."),Ee(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Ee(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Xi=Ji,Zi=new Jn("auth","Firebase",Ji()),ea=new xr("@firebase/auth");function ta(e){if(ea.logLevel<=vr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ea.error.apply(ea,["Auth (".concat(ii,"): ").concat(e)].concat(n))}}function na(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw oa.apply(void 0,[e].concat(n))}function ra(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return oa.apply(void 0,[e].concat(n))}function ia(e,t,n){var r=Object.assign(Object.assign({},Xi()),Ee({},t,n));return new Jn("auth","Firebase",r).create(t,{appName:e.name})}function aa(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&na(e,"argument-error"),ia(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function oa(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=lr(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(lr(o)))}return Zi.create.apply(Zi,[e].concat(n))}function ua(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw oa.apply(void 0,[t].concat(r))}}function sa(e){var t="INTERNAL ASSERTION FAILED: "+e;throw ta(t),new Error(t)}function ca(e,t){e||sa(t)}var la=new Map;function fa(e){ca(e instanceof Function,"Expected a class definition");var t=la.get(e);return t?(ca(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,la.set(e,t),t)}function ha(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function da(){return"http:"===pa()||"https:"===pa()}function pa(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var va=function(){function e(t,n){xn(this,e),this.shortDelay=t,this.longDelay=n,ca(n>t,"Short delay should be less than long delay!"),this.isMobile=qn()||Wn()}return In(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(da()||Gn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ya(e,t){ca(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ma=function(){function e(){xn(this,e)}return In(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ga=(Ee(Ui={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ee(Ui,"MISSING_CUSTOM_TOKEN","internal-error"),Ee(Ui,"INVALID_IDENTIFIER","invalid-email"),Ee(Ui,"MISSING_CONTINUE_URI","internal-error"),Ee(Ui,"INVALID_PASSWORD","wrong-password"),Ee(Ui,"MISSING_PASSWORD","internal-error"),Ee(Ui,"EMAIL_EXISTS","email-already-in-use"),Ee(Ui,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ee(Ui,"INVALID_IDP_RESPONSE","invalid-credential"),Ee(Ui,"INVALID_PENDING_TOKEN","invalid-credential"),Ee(Ui,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ee(Ui,"MISSING_REQ_TYPE","internal-error"),Ee(Ui,"EMAIL_NOT_FOUND","user-not-found"),Ee(Ui,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ee(Ui,"EXPIRED_OOB_CODE","expired-action-code"),Ee(Ui,"INVALID_OOB_CODE","invalid-action-code"),Ee(Ui,"MISSING_OOB_CODE","internal-error"),Ee(Ui,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ee(Ui,"INVALID_ID_TOKEN","invalid-user-token"),Ee(Ui,"TOKEN_EXPIRED","user-token-expired"),Ee(Ui,"USER_NOT_FOUND","user-token-expired"),Ee(Ui,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ee(Ui,"INVALID_CODE","invalid-verification-code"),Ee(Ui,"INVALID_SESSION_INFO","invalid-verification-id"),Ee(Ui,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ee(Ui,"MISSING_SESSION_INFO","missing-verification-id"),Ee(Ui,"SESSION_EXPIRED","code-expired"),Ee(Ui,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ee(Ui,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ee(Ui,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ee(Ui,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ee(Ui,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ee(Ui,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ee(Ui,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ee(Ui,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ee(Ui,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ee(Ui,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ee(Ui,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ui),ka=new va(3e4,6e4);function ba(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function wa(e,t,n,r){return xa.apply(this,arguments)}function xa(){return xa=mt(vt().mark((function e(t,n,r,i){var a,o=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",_a(t,a,mt(vt().mark((function e(){var a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=nr(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ma.fetch()(Ta(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),xa.apply(this,arguments)}function _a(e,t,n){return Ia.apply(this,arguments)}function Ia(){return Ia=mt(vt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ga),n),e.prev=2,a=new Ca(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Na(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=At(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Na(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Na(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Na(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw ia(t,d,h);case 34:na(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof $n)){e.next=41;break}throw e.t0;case 41:na(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Ia.apply(this,arguments)}function Sa(e,t,n,r){return Ea.apply(this,arguments)}function Ea(){return Ea=mt(vt().mark((function e(t,n,r,i){var a,o,u=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,wa(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&na(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Ta(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ya(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Ca=function(){function e(t){var n=this;xn(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(ra(n.auth,"network-request-failed"))}),ka.get())}))}return In(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Na(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=ra(e,t,r);return i.customData._tokenResponse=n,i}function Aa(e,t){return Oa.apply(this,arguments)}function Oa(){return Oa=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function Da(e,t){return Pa.apply(this,arguments)}function Pa(){return Pa=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}function Ra(e,t){return La.apply(this,arguments)}function La(){return La=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),La.apply(this,arguments)}function Ma(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Fa(){return Fa=mt(vt().mark((function e(t){var n,r,i,a,o,u,s=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=sr(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,ua((a=Va(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ma(Ua(a.auth_time)),issuedAtTime:Ma(Ua(a.iat)),expirationTime:Ma(Ua(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ua(e){return 1e3*Number(e)}function Va(e){var t,n=At(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return ta("JWT malformed, contained fewer than 3 sections"),null;try{var o=Un(i);return o?JSON.parse(o):(ta("Failed to decode base64 JWT payload"),null)}catch(u){return ta("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function ja(e,t){return Ba.apply(this,arguments)}function Ba(){return Ba=mt(vt().mark((function e(t,n){var r=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof $n&&za(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ba.apply(this,arguments)}function za(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var qa=function(){function e(t){xn(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return In(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(mt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ka=function(){function e(t,n){xn(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return In(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ma(this.lastLoginAt),this.creationTime=Ma(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ga(e){return Wa.apply(this,arguments)}function Wa(){return Wa=mt(vt().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ja(t,Ra(r,{idToken:i}));case 6:ua(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?$a(o.providerUserInfo):[],s=Qa(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ka(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Ha(){return(Ha=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sr(t),e.next=3,Ga(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qa(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(lr(n),lr(t))}function $a(e){return e.map((function(e){var t=e.providerId,n=Fi(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ja(e,t){return Ya.apply(this,arguments)}function Ya(){return Ya=mt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a(t,{},mt(vt().mark((function e(){var r,i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nr({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Ta(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ma.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Ya.apply(this,arguments)}var Xa=function(){function e(){xn(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return In(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){ua(e.idToken,"internal-error"),ua("undefined"!==typeof e.idToken,"internal-error"),ua("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Va(e);return ua(t,"internal-error"),ua("undefined"!==typeof t.exp,"internal-error"),ua("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=mt(vt().mark((function e(t){var n,r=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],ua(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=mt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ja(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return sa("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(ua("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(ua("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(ua("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Za(e,t){ua("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var eo=function(){function e(t){xn(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Fi(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qa(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?lr(a.providerData):[],this.metadata=new Ka(a.createdAt||void 0,a.lastLoginAt||void 0)}return In(e,[{key:"getIdToken",value:function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(ua(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Fa.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Ha.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(ua(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){ua(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=mt(vt().mark((function e(t){var n,r,i=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ga(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ja(this,Aa(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;ua(k&&_,t,"internal-error");var I=Xa.fromJSON(this.name,_);ua("string"===typeof k,t,"internal-error"),Za(f,t.name),Za(h,t.name),ua("boolean"===typeof b,t,"internal-error"),ua("boolean"===typeof w,t,"internal-error"),Za(d,t.name),Za(p,t.name),Za(v,t.name),Za(y,t.name),Za(m,t.name),Za(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(S.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(S._redirectEventId=y),S}},{key:"_fromIdTokenResponse",value:function(){var t=mt(vt().mark((function t(n,r){var i,a,o,u=arguments;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Xa).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ga(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),to=function(){function e(){xn(this,e),this.type="NONE",this.storage={}}return In(e,[{key:"_isAvailable",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();to.type="NONE";var no=to;function ro(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var io=function(){function e(t,n,r){xn(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ro(this.userKey,a.apiKey,o),this.fullPersistenceKey=ro("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return In(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?eo._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=mt(vt().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(fa(no),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||fa(no),u=ro(i,n.config.apiKey,n.name),s=null,c=Sn(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=eo._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ao(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(co(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oo(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fo(t))return"Blackberry";if(ho(t))return"Webos";if(uo(t))return"Safari";if((t.includes("chrome/")||so(t))&&!t.includes("edge/"))return"Chrome";if(lo(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function oo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return/firefox\//i.test(e)}function uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function so(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return/crios\//i.test(e)}function co(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return/iemobile/i.test(e)}function lo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return/android/i.test(e)}function fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return/blackberry/i.test(e)}function ho(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return/webos/i.test(e)}function po(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function vo(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return po(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function yo(){return Hn()&&10===document.documentMode}function mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return po(e)||lo(e)||ho(e)||fo(e)||/windows phone/i.test(e)||co(e)}function go(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ao(zn());break;case"Worker":t="".concat(ao(zn()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ii,"/").concat(r)}var ko=function(){function e(t){xn(this,e),this.auth=t,this.queue=[]}return In(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=mt(vt().mark((function e(t){var n,r,i,a,o,u,s,c;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=Sn(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=Sn(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(q){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),bo=function(){function e(t,n,r){xn(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xo(this),this.idTokenSubscription=new xo(this),this.beforeStateQueue=new ko(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zi,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return In(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=fa(t)),this._initializationPromise=this.queue(mt(vt().mark((function r(){var i,a;return vt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,io.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=mt(vt().mark((function e(t){var n,r,i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return ua(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ga(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?sr(t):null)&&ua(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=mt(vt().mark((function e(t){var n,r=this,i=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&ua(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(mt(vt().mark((function n(){return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(fa(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Jn("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=mt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return ua(n=t&&fa(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,io.create(this,[fa(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=mt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=mt(vt().mark((function e(t){var n=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ua(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return ua(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=go(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=mt(vt().mark((function e(){var t,n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ee({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function wo(e){return sr(e)}var xo=function(){function e(t){var n=this;xn(this,e),this.auth=t,this.observer=null,this.addObserver=ar((function(e){return n.observer=e}))}return In(e,[{key:"next",get:function(){return ua(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function _o(e,t,n){var r=wo(e);ua(r._canInitEmulator,r,"emulator-config-failed"),ua(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Io(t),o=function(e){var t=Io(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:So(r.substr(a.length+1))}}var o=At(r.split(":"),2);return{host:o[0],port:So(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Io(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function So(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Eo=function(){function e(t,n){xn(this,e),this.providerId=t,this.signInMethod=n}return In(e,[{key:"toJSON",value:function(){return sa("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return sa("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return sa("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return sa("not implemented")}}]),e}();function To(e,t){return Co.apply(this,arguments)}function Co(){return Co=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(t,"POST","/v1/accounts:resetPassword",ba(t,n)));case 1:case"end":return e.stop()}}),e)}))),Co.apply(this,arguments)}function No(e,t){return Ao.apply(this,arguments)}function Ao(){return Ao=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ao.apply(this,arguments)}function Oo(e,t){return Do.apply(this,arguments)}function Do(){return Do=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(t,"POST","/v1/accounts:update",ba(t,n)));case 1:case"end":return e.stop()}}),e)}))),Do.apply(this,arguments)}function Po(e,t){return Ro.apply(this,arguments)}function Ro(){return Ro=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:signInWithPassword",ba(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ro.apply(this,arguments)}function Lo(e,t){return Mo.apply(this,arguments)}function Mo(){return Mo=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(t,"POST","/v1/accounts:sendOobCode",ba(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}function Fo(e,t){return Uo.apply(this,arguments)}function Uo(){return Uo=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lo(t,n));case 1:case"end":return e.stop()}}),e)}))),Uo.apply(this,arguments)}function Vo(e,t){return jo.apply(this,arguments)}function jo(){return jo=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lo(t,n));case 1:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function Bo(e,t){return zo.apply(this,arguments)}function zo(){return zo=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lo(t,n));case 1:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function qo(e,t){return Ko.apply(this,arguments)}function Ko(){return Ko=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lo(t,n));case 1:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}function Go(e,t){return Wo.apply(this,arguments)}function Wo(){return Wo=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:signInWithEmailLink",ba(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wo.apply(this,arguments)}function Ho(e,t){return Qo.apply(this,arguments)}function Qo(){return Qo=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:signInWithEmailLink",ba(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}var $o=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return xn(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return In(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Po(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Go(t,{email:this._email,oobCode:this._password}));case 5:na(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",No(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ho(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:na(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Eo);function Jo(e,t){return Yo.apply(this,arguments)}function Yo(){return Yo=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:signInWithIdp",ba(t,n)));case 1:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}var Xo=function(e){Cn(n,e);var t=Dn(n);function n(){var e;return xn(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return In(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Jo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Jo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Jo(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nr(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):na("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Fi(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Eo);function Zo(e,t){return eu.apply(this,arguments)}function eu(){return eu=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(t,"POST","/v1/accounts:sendVerificationCode",ba(t,n)));case 1:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}function tu(){return tu=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:signInWithPhoneNumber",ba(t,n)));case 1:case"end":return e.stop()}}),e)}))),tu.apply(this,arguments)}function nu(){return nu=mt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sa(t,"POST","/v1/accounts:signInWithPhoneNumber",ba(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Na(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),nu.apply(this,arguments)}var ru=Ee({},"USER_NOT_FOUND","user-not-found");function iu(){return iu=mt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Sa(t,"POST","/v1/accounts:signInWithPhoneNumber",ba(t,r),ru));case 2:case"end":return e.stop()}}),e)}))),iu.apply(this,arguments)}var au=function(e){Cn(n,e);var t=Dn(n);function n(e){var r;return xn(this,n),(r=t.call(this,"phone","phone")).params=e,r}return In(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return tu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return nu.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return iu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Eo);var ou=function(){function e(t){var n,r,i,a,o,u;xn(this,e);var s=rr(ir(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);ua(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return In(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=rr(ir(e)).link,n=t?rr(ir(t)).deep_link_id:null,r=rr(ir(e)).deep_link_id;return(r?rr(ir(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var uu=function(){function e(){xn(this,e),this.providerId=e.PROVIDER_ID}return In(e,null,[{key:"credential",value:function(e,t){return $o._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ou.parseLink(t);return ua(n,"argument-error"),$o._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();uu.PROVIDER_ID="password",uu.EMAIL_PASSWORD_SIGN_IN_METHOD="password",uu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var su=function(){function e(t){xn(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return In(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),cu=function(e){Cn(n,e);var t=Dn(n);function n(){var e;return xn(this,n),(e=t.apply(this,arguments)).scopes=[],e}return In(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return lr(this.scopes)}}]),n}(su),lu=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.apply(this,arguments)}return In(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return ua(e.idToken||e.accessToken,"argument-error"),Xo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return ua("providerId"in t&&"signInMethod"in t,"argument-error"),Xo._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(cu),fu=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.call(this,"facebook.com")}return In(n,null,[{key:"credential",value:function(e){return Xo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(cu);fu.FACEBOOK_SIGN_IN_METHOD="facebook.com",fu.PROVIDER_ID="facebook.com";var hu=function(e){Cn(n,e);var t=Dn(n);function n(){var e;return xn(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return In(n,null,[{key:"credential",value:function(e,t){return Xo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(cu);hu.GOOGLE_SIGN_IN_METHOD="google.com",hu.PROVIDER_ID="google.com";var du=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.call(this,"github.com")}return In(n,null,[{key:"credential",value:function(e){return Xo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(cu);du.GITHUB_SIGN_IN_METHOD="github.com",du.PROVIDER_ID="github.com";var pu=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return In(n,[{key:"_getIdTokenResponse",value:function(e){return Jo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Jo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Jo(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Eo),vu=function(e){Cn(n,e);var t=Dn(n);function n(e){return xn(this,n),ua(e.startsWith("saml."),"argument-error"),t.call(this,e)}return In(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=pu.fromJSON(e);return ua(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return pu._create(r,n)}catch(i){return null}}}]),n}(su),yu=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.call(this,"twitter.com")}return In(n,null,[{key:"credential",value:function(e,t){return Xo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(cu);function mu(e,t){return gu.apply(this,arguments)}function gu(){return gu=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:signUp",ba(t,n)));case 1:case"end":return e.stop()}}),e)}))),gu.apply(this,arguments)}yu.TWITTER_SIGN_IN_METHOD="twitter.com",yu.PROVIDER_ID="twitter.com";var ku=function(){function e(t){xn(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return In(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=mt(vt().mark((function t(n,r,i){var a,o,u,s,c=arguments;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,eo._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=bu(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=mt(vt().mark((function t(n,r,i){var a;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=bu(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function bu(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function wu(){return wu=mt(vt().mark((function e(t){var n,r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wo(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ku({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,mu(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ku._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),wu.apply(this,arguments)}var xu=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i,a){var o,u;return xn(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(En(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return In(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}($n);function _u(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw xu._fromErrorAndOperation(e,n,t,r);throw n}))}function Iu(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Su(e,t){return Eu.apply(this,arguments)}function Eu(){return Eu=mt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sr(t),e.next=3,Nu(!0,r,n);case 3:return e.t0=Da,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Iu(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Eu.apply(this,arguments)}function Tu(e,t){return Cu.apply(this,arguments)}function Cu(){return Cu=mt(vt().mark((function e(t,n){var r,i,a=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ja,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ku._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Cu.apply(this,arguments)}function Nu(e,t,n){return Au.apply(this,arguments)}function Au(){return(Au=mt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ga(n);case 2:i=Iu(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",ua(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ou(e,t){return Du.apply(this,arguments)}function Du(){return Du=mt(vt().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,ja(t,_u(a,o,n,t),r);case 6:return ua((u=e.sent).idToken,a,"internal-error"),ua(s=Va(u.idToken),a,"internal-error"),c=s.sub,ua(t.uid===c,a,"user-mismatch"),e.abrupt("return",ku._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&na(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Du.apply(this,arguments)}function Pu(e,t){return Ru.apply(this,arguments)}function Ru(){return Ru=mt(vt().mark((function e(t,n){var r,i,a,o,u=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,_u(t,i,n);case 4:return a=e.sent,e.next=7,ku._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ru.apply(this,arguments)}function Lu(e,t){return Mu.apply(this,arguments)}function Mu(){return Mu=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pu(wo(t),n));case 1:case"end":return e.stop()}}),e)}))),Mu.apply(this,arguments)}function Fu(e,t){return Uu.apply(this,arguments)}function Uu(){return(Uu=mt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sr(t),e.next=3,Nu(!1,r,n.providerId);case 3:return e.abrupt("return",Tu(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vu(e,t){return ju.apply(this,arguments)}function ju(){return(ju=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ou(sr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bu(e,t){return zu.apply(this,arguments)}function zu(){return zu=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:signInWithCustomToken",ba(t,n)));case 1:case"end":return e.stop()}}),e)}))),zu.apply(this,arguments)}function qu(){return qu=mt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wo(t),e.next=3,Bu(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ku._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),qu.apply(this,arguments)}var Ku=function(){function e(t,n){xn(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return In(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Gu._fromServerResponse(e,t):na(e,"internal-error")}}]),e}(),Gu=function(e){Cn(n,e);var t=Dn(n);function n(e){var r;return xn(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return In(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ku);function Wu(e,t,n){var r;ua((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ua("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ua(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ua(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Hu(){return Hu=mt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sr(t),a={requestType:"PASSWORD_RESET",email:n},r&&Wu(i,a,r),e.next=5,Vo(i,a);case 5:case"end":return e.stop()}}),e)}))),Hu.apply(this,arguments)}function Qu(){return Qu=mt(vt().mark((function e(t,n,r){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,To(sr(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Qu.apply(this,arguments)}function $u(){return $u=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oo(sr(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}function Ju(e,t){return Yu.apply(this,arguments)}function Yu(){return Yu=mt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sr(t),e.next=3,To(r,{oobCode:n});case 3:i=e.sent,ua(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return ua(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:ua(i.mfaInfo,r,"internal-error");case 13:ua(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ku._fromServerResponse(wo(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}function Xu(){return Xu=mt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ju(sr(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}function Zu(e,t,n){return es.apply(this,arguments)}function es(){return es=mt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wo(t),e.next=3,mu(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ku._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(){return ts=mt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sr(t),a={requestType:"EMAIL_SIGNIN",email:n},ua(r.handleCodeInApp,i,"argument-error"),r&&Wu(i,a,r),e.next=6,Bo(i,a);case 6:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function ns(){return ns=mt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sr(t),ua((a=uu.credentialWithLink(n,r||ha()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Lu(i,a));case 4:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return is=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(t,"POST","/v1/accounts:createAuthUri",ba(t,n)));case 1:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}function as(){return as=mt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=da()?ha():"http://localhost",i={identifier:n,continueUri:r},e.next=4,rs(sr(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),as.apply(this,arguments)}function os(){return(os=mt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sr(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Wu(r.auth,a,n),e.next=8,Fo(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function us(){return(us=mt(vt().mark((function e(t,n,r){var i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sr(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Wu(i.auth,o,r),e.next=8,qo(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ss(e,t){return cs.apply(this,arguments)}function cs(){return cs=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),cs.apply(this,arguments)}function ls(){return(ls=mt(vt().mark((function e(t,n){var r,i,a,o,u,s,c;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=sr(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ja(a,ss(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fs(e,t,n){return hs.apply(this,arguments)}function hs(){return hs=mt(vt().mark((function e(t,n,r){var i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,ja(t,No(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),hs.apply(this,arguments)}var ds=In((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};xn(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ps=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i,a){var o;return xn(this,n),(o=t.call(this,e,r,i)).username=a,o}return In(n)}(ds),vs=function(e){Cn(n,e);var t=Dn(n);function n(e,r){return xn(this,n),t.call(this,e,"facebook.com",r)}return In(n)}(ds),ys=function(e){Cn(n,e);var t=Dn(n);function n(e,r){return xn(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return In(n)}(ps),ms=function(e){Cn(n,e);var t=Dn(n);function n(e,r){return xn(this,n),t.call(this,e,"google.com",r)}return In(n)}(ds),gs=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){return xn(this,n),t.call(this,e,"twitter.com",r,i)}return In(n)}(ps);function ks(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Va(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ds(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new vs(a,i);case"github.com":return new ys(a,i);case"google.com":return new ms(a,i);case"twitter.com":return new gs(a,i,e.screenName||null);case"custom":case"anonymous":return new ds(a,null);default:return new ds(a,r,i)}}(n)}var bs=function(){function e(t,n){xn(this,e),this.type=t,this.credential=n}return In(e,[{key:"toJSON",value:function(){return{multiFactorSession:Ee({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ws=function(){function e(t,n,r){xn(this,e),this.session=t,this.hints=n,this.signInResolver=r}return In(e,[{key:"resolveSignIn",value:function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=wo(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Ku._fromServerResponse(r,e)}));ua(i.mfaPendingCredential,r,"internal-error");var o=bs._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=mt(vt().mark((function e(t){var a,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ku._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return ua(n.user,r,"internal-error"),e.abrupt("return",ku._forOperation(n.user,n.operationType,u));case 17:na(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function xs(e,t){return wa(e,"POST","/v2/accounts/mfaEnrollment:start",ba(e,t))}function _s(e,t){return wa(e,"POST","/v2/accounts/mfaEnrollment:withdraw",ba(e,t))}var Is=function(){function e(t){var n=this;xn(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ku._fromServerResponse(t.auth,e)})))}))}return In(e,[{key:"getSession",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=bs,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=mt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,ja(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=mt(vt().mark((function e(t){var n,r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,ja(this.user,_s(this.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Ss=new WeakMap;var Es="__sak",Ts=function(){function e(t,n){xn(this,e),this.storageRetriever=t,this.type=n}return In(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Es,"1"),this.storage.removeItem(Es),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Cs=function(e){Cn(n,e);var t=Dn(n);function n(){var e;return xn(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=zn();return uo(e)||po(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=mo(),e._shouldAllowMigration=!0,e}return In(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);yo()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=mt(vt().mark((function e(t,r){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mi(Nn(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=mt(vt().mark((function e(t){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mi(Nn(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mi(Nn(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ts);Cs.type="LOCAL";var Ns=Cs,As=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return In(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ts);As.type="SESSION";var Os=As;function Ds(e){return Promise.all(e.map(function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ps=function(){function e(t){xn(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return In(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=mt(vt().mark((function e(t){var n,r,i,a,o,u,s,c;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ds(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Rs(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ps.receivers=[];var Ls=function(){function e(t){xn(this,e),this.target=t,this.handlers=new Set}return In(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=mt(vt().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Rs("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ms(){return window}function Fs(){return"undefined"!==typeof Ms().WorkerGlobalScope&&"function"===typeof Ms().importScripts}function Us(){return Vs.apply(this,arguments)}function Vs(){return(Vs=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function js(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Bs="firebaseLocalStorageDb",zs="firebaseLocalStorage",qs="fbase_key",Ks=function(){function e(t){xn(this,e),this.request=t}return In(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Gs(e,t){return e.transaction([zs],t?"readwrite":"readonly").objectStore(zs)}function Ws(){var e=indexedDB.deleteDatabase(Bs);return new Ks(e).toPromise()}function Hs(){var e=indexedDB.open(Bs,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(zs,{keyPath:qs})}catch(r){n(r)}})),e.addEventListener("success",mt(vt().mark((function n(){var r;return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(zs)){n.next=12;break}return r.close(),n.next=5,Ws();case 5:return n.t0=t,n.next=8,Hs();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Qs(e,t,n){return $s.apply(this,arguments)}function $s(){return $s=mt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gs(t,!0).put((Ee(i={},qs,n),Ee(i,"value",r),i)),e.abrupt("return",new Ks(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Js(e,t){return Ys.apply(this,arguments)}function Ys(){return Ys=mt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gs(t,!1).get(n),e.next=3,new Ks(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ys.apply(this,arguments)}function Xs(e,t){var n=Gs(e,!0).delete(t);return new Ks(n).toPromise()}var Zs=function(){function e(){xn(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return In(e,[{key:"_openDb",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Hs();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=mt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=mt(vt().mark((function e(){var t=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ps._getInstance(Fs()?self:null),this.receiver._subscribe("keyChanged",function(){var e=mt(vt().mark((function e(n,r){var i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=mt(vt().mark((function e(){var t,n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Us();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ls(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&js()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Hs();case 5:return t=e.sent,e.next=8,Qs(t,Es,"1");case 8:return e.next=10,Xs(t,Es);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=mt(vt().mark((function e(t,n){var r=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Qs(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Js(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=mt(vt().mark((function e(t){var n=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Xs(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=mt(vt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Gs(e,!1).getAll();return new Ks(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Sn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(mt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Zs.type="LOCAL";var ec=Zs;function tc(e,t){return wa(e,"POST","/v2/accounts/mfaSignIn:start",ba(e,t))}function nc(e){return rc.apply(this,arguments)}function rc(){return rc=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wa(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}function ic(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=ra("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ac(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var oc=1e12,uc=function(){function e(t){xn(this,e),this.auth=t,this.counter=oc,this._widgets=new Map}return In(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new sc(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||oc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||oc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=mt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||oc,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),sc=function(){function e(t,n,r){var i=this;xn(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;ua(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return In(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var cc=ac("rcb"),lc=new va(3e4,6e4),fc="https://www.google.com/recaptcha/api.js?",hc=function(){function e(){var t;xn(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Ms().grecaptcha)||void 0===t?void 0:t.render)}return In(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ua(dc(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ms().grecaptcha):new Promise((function(r,i){var a=Ms().setTimeout((function(){i(ra(e,"network-request-failed"))}),lc.get());Ms()[cc]=function(){Ms().clearTimeout(a),delete Ms()[cc];var o=Ms().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(ra(e,"internal-error"))},ic("".concat(fc,"?").concat(nr({onload:cc,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(ra(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Ms().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function dc(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var pc=function(){function e(){xn(this,e)}return In(e,[{key:"load",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new uc(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),vc="recaptcha",yc={theme:"light",type:"image"},mc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},yc),r=arguments.length>2?arguments[2]:void 0;xn(this,e),this.parameters=n,this.type=vc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wo(r),this.isInvisible="invisible"===this.parameters.size,ua("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;ua(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pc:new hc,this.validateStartingState()}return In(e,[{key:"verify",value:function(){var e=mt(vt().mark((function e(){var t,n,r,i=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){ua(!this.parameters.sitekey,this.auth,"argument-error"),ua(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ua("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ms()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){ua(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=mt(vt().mark((function e(){var t,n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ua(da()&&!Fs(),this.auth,"internal-error"),e.next=3,gc();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,nc(this.auth);case 8:ua(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return ua(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function gc(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var kc=function(){function e(t,n){xn(this,e),this.verificationId=t,this.onConfirmation=n}return In(e,[{key:"confirm",value:function(e){var t=au._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function bc(){return bc=mt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wo(t),e.next=3,Ic(i,n,sr(r));case 3:return a=e.sent,e.abrupt("return",new kc(a,(function(e){return Lu(i,e)})));case 5:case"end":return e.stop()}}),e)}))),bc.apply(this,arguments)}function wc(e,t,n){return xc.apply(this,arguments)}function xc(){return(xc=mt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sr(t),e.next=3,Nu(!1,i,"phone");case 3:return e.next=5,Ic(i.auth,n,sr(r));case 5:return a=e.sent,e.abrupt("return",new kc(a,(function(e){return Fu(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _c(){return(_c=mt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sr(t),e.next=3,Ic(i.auth,n,sr(r));case 3:return a=e.sent,e.abrupt("return",new kc(a,(function(e){return Vu(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ic(e,t,n){return Sc.apply(this,arguments)}function Sc(){return Sc=mt(vt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,ua("string"===typeof a,t,"argument-error"),ua(r.type===vc,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return ua("enroll"===u.type,t,"internal-error"),e.next=13,xs(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return ua("signin"===u.type,t,"internal-error"),ua(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,tc(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Zo(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Sc.apply(this,arguments)}function Ec(){return(Ec=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tu(sr(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tc=function(){function e(t){xn(this,e),this.providerId=e.PROVIDER_ID,this.auth=wo(t)}return In(e,[{key:"verifyPhoneNumber",value:function(e,t){return Ic(this.auth,e,sr(t))}}],[{key:"credential",value:function(e,t){return au._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?au._fromTokenResponse(n,r):null}}]),e}();function Cc(e,t){return t?fa(t):(ua(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Tc.PROVIDER_ID="phone",Tc.PHONE_SIGN_IN_METHOD="phone";var Nc=function(e){Cn(n,e);var t=Dn(n);function n(e){var r;return xn(this,n),(r=t.call(this,"custom","custom")).params=e,r}return In(n,[{key:"_getIdTokenResponse",value:function(e){return Jo(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Jo(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Jo(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Eo);function Ac(e){return Pu(e.auth,new Nc(e),e.bypassAuthState)}function Oc(e){var t=e.auth,n=e.user;return ua(n,t,"internal-error"),Ou(n,new Nc(e),e.bypassAuthState)}function Dc(e){return Pc.apply(this,arguments)}function Pc(){return Pc=mt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,ua(r=t.user,n,"internal-error"),e.abrupt("return",Tu(r,new Nc(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Pc.apply(this,arguments)}var Rc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];xn(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return In(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=mt(vt().mark((function t(n,r){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=mt(vt().mark((function e(t){var n,r,i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ac;case"linkViaPopup":case"linkViaRedirect":return Dc;case"reauthViaPopup":case"reauthViaRedirect":return Oc;default:na(this.auth,"internal-error")}}},{key:"resolve",value:function(e){ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Lc=new va(2e3,1e4);function Mc(e,t,n){return Fc.apply(this,arguments)}function Fc(){return Fc=mt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wo(t),aa(t,n,su),a=Cc(i,r),o=new Bc(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Fc.apply(this,arguments)}function Uc(){return(Uc=mt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aa((i=sr(t)).auth,n,su),a=Cc(i.auth,r),o=new Bc(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vc(e,t,n){return jc.apply(this,arguments)}function jc(){return(jc=mt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aa((i=sr(t)).auth,n,su),a=Cc(i.auth,r),o=new Bc(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bc=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i,a,o){var u;return xn(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=En(u),u}return In(n,[{key:"executeNotNull",value:function(){var e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return ua(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=mt(vt().mark((function e(){var t,n=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ca(1===this.filter.length,"Popup operations only handle one event"),t=Rs(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(ra(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ra(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(ra(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Lc.get())}()}}]),n}(Rc);Bc.currentPopupAction=null;var zc=new Map,qc=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return xn(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return In(n,[{key:"execute",value:function(){var e=mt(vt().mark((function e(){var t,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=zc.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Kc(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Mi(Nn(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:zc.set(this.auth._key(),t);case 21:return this.bypassAuthState||zc.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=mt(vt().mark((function e(t){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Mi(Nn(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Mi(Nn(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Rc);function Kc(e,t){return Gc.apply(this,arguments)}function Gc(){return Gc=mt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jc(n),i=$c(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Gc.apply(this,arguments)}function Wc(e,t){return Hc.apply(this,arguments)}function Hc(){return Hc=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$c(t)._set(Jc(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Hc.apply(this,arguments)}function Qc(e,t){zc.set(e._key(),t)}function $c(e){return fa(e._redirectPersistence)}function Jc(e){return ro("pendingRedirect",e.config.apiKey,e.name)}function Yc(e,t,n){return function(e,t,n){return Xc.apply(this,arguments)}(e,t,n)}function Xc(){return Xc=mt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wo(t),aa(t,n,su),a=Cc(i,r),e.next=5,Wc(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Xc.apply(this,arguments)}function Zc(e,t,n){return function(e,t,n){return el.apply(this,arguments)}(e,t,n)}function el(){return(el=mt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aa((i=sr(t)).auth,n,su),a=Cc(i.auth,r),e.next=5,Wc(a,i.auth);case 5:return e.next=7,ul(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tl(e,t,n){return function(e,t,n){return nl.apply(this,arguments)}(e,t,n)}function nl(){return(nl=mt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aa((i=sr(t)).auth,n,su),a=Cc(i.auth,r),e.next=5,Nu(!1,i,n.providerId);case 5:return e.next=7,Wc(a,i.auth);case 7:return e.next=9,ul(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rl(e,t){return il.apply(this,arguments)}function il(){return il=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wo(t)._initializationPromise;case 2:return e.abrupt("return",al(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),il.apply(this,arguments)}function al(e,t){return ol.apply(this,arguments)}function ol(){return ol=mt(vt().mark((function e(t,n){var r,i,a,o,u,s=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=wo(t),a=Cc(i,n),o=new qc(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),ol.apply(this,arguments)}function ul(e){return sl.apply(this,arguments)}function sl(){return(sl=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rs("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cl=function(){function e(t){xn(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return In(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!fl(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ra(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ll(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ll(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ll(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function fl(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function hl(e){return dl.apply(this,arguments)}function dl(){return dl=mt(vt().mark((function e(t){var n,r=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",wa(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),dl.apply(this,arguments)}var pl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vl=/^https?/;function yl(){return yl=mt(vt().mark((function e(t){var n,r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,hl(t);case 4:n=e.sent,r=n.authorizedDomains,i=Sn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ml(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:na(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),yl.apply(this,arguments)}function ml(e){var t=ha(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!vl.test(r))return!1;if(pl.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var gl=new va(3e4,6e4);function kl(){var e=Ms().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=lr(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var bl=null;function wl(e){return bl=bl||function(e){return new Promise((function(t,n){var r,i,a;function o(){kl(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){kl(),n(ra(e,"network-request-failed"))},timeout:gl.get()})}if(null===(i=null===(r=Ms().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ms().gapi)||void 0===a?void 0:a.load)){var u=ac("iframefcb");return Ms()[u]=function(){gapi.load?o():n(ra(e,"network-request-failed"))},ic("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw bl=null,e}))}(e),bl}var xl=new va(5e3,15e3),_l={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Il=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sl(e){var t=e.config;ua(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ya(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ii},i=Il.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(nr(r).slice(1))}function El(e){return Tl.apply(this,arguments)}function Tl(){return Tl=mt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wl(t);case 2:return n=e.sent,ua(r=Ms().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Sl(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_l,dontclear:!0},(function(e){return new Promise(function(){var n=mt(vt().mark((function n(r,i){var a,o,u;return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ms().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=ra(t,"network-request-failed"),o=Ms().setTimeout((function(){i(a)}),xl.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Tl.apply(this,arguments)}var Cl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nl="_blank",Al="http://localhost",Ol=function(){function e(t){xn(this,e),this.window=t,this.associatedEvent=null}return In(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Dl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Cl),{width:r.toString(),height:i.toString(),top:a,left:o}),c=zn().toLowerCase();n&&(u=so(c)?Nl:n),oo(c)&&(t=t||Al,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=At(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(vo(c)&&"_self"!==u)return Pl(t||"",u),new Ol(null);var f=window.open(t||"",u,l);ua(f,e,"popup-blocked");try{f.focus()}catch(h){}return new Ol(f)}function Pl(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Rl="__/auth/handler",Ll="emulator/auth/handler";function Ml(e,t,n,r,i,a){ua(e.config.authDomain,e,"auth-domain-config-required"),ua(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ii,eventId:i};if(t instanceof su){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=At(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof cu){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Rl);return ya(t,Ll)}(e),"?").concat(nr(d).slice(1))}var Fl="webStorageSupport",Ul=function(){function e(){xn(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Os,this._completeRedirectFn=al,this._overrideRedirectResult=Qc}return In(e,[{key:"_openPopup",value:function(){var e=mt(vt().mark((function e(t,n,r,i){var a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ca(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Ml(t,n,r,ha(),i),e.abrupt("return",Dl(t,o,Rs()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=mt(vt().mark((function e(t,n,r,i){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Ml(t,n,r,ha(),i),Ms().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(ca(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=mt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,El(t);case 2:return n=e.sent,r=new cl(t),n.register("authEvent",(function(e){return ua(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Fl,{type:Fl},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),na(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return yl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return mo()||uo()||po()}}]),e}(),Vl=Ul,jl=function(){function e(t){xn(this,e),this.factorId=t}return In(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return sa("unexpected MultiFactorSessionType")}}}]),e}(),Bl=function(e){Cn(n,e);var t=Dn(n);function n(e){var r;return xn(this,n),(r=t.call(this,"phone")).credential=e,r}return In(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return wa(e,"POST","/v2/accounts/mfaEnrollment:finalize",ba(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return wa(e,"POST","/v2/accounts/mfaSignIn:finalize",ba(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(jl),zl=function(){function e(){xn(this,e)}return In(e,null,[{key:"assertion",value:function(e){return Bl._fromCredential(e)}}]),e}();zl.FACTOR_ID="phone";var ql,Kl="@firebase/auth",Gl="0.20.5",Wl=function(){function e(t){xn(this,e),this.auth=t,this.internalListeners=new Map}return In(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){ua(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Hl(){return window}ql="Browser",Yr(new fr("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){ua(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),ua(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:ql,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:go(ql)},i=new bo(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fa);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Yr(new fr("auth-internal",(function(e){return function(e){return new Wl(e)}(wo(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),li(Kl,Gl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ql)),li(Kl,Gl,"esm2017");function Ql(e,t,n){return $l.apply(this,arguments)}function $l(){return $l=mt(vt().mark((function e(t,n,r){var i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Hl(),o=a.BuildInfo,ca(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,tf(n.sessionId);case 4:return u=e.sent,s={},po()?s.ibi=o.packageName:lo()?s.apn=o.packageName:na(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Ml(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),$l.apply(this,arguments)}function Jl(){return Jl=mt(vt().mark((function e(t){var n,r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Hl(),r=n.BuildInfo,i={},po()?i.iosBundleId=r.packageName:lo()?i.androidPackageName=r.packageName:na(t,"operation-not-supported-in-this-environment"),e.next=5,hl(t,i);case 5:case"end":return e.stop()}}),e)}))),Jl.apply(this,arguments)}function Yl(e){var t=Hl().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Xl(e,t,n){return Zl.apply(this,arguments)}function Zl(){return Zl=mt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Hl(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(ra(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),lo()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Zl.apply(this,arguments)}function ef(e){var t,n,r,i,a,o,u,s,c,l,f=Hl();ua("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ua("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ua("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ua("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ua("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function tf(e){return nf.apply(this,arguments)}function nf(){return(nf=mt(vt().mark((function e(t){var n,r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=rf(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rf(e){if(ca(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var af=function(e){Cn(n,e);var t=Dn(n);function n(){var e;return xn(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return In(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Mi(Nn(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(cl);function of(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:ff(),postBody:null,tenantId:e.tenantId,error:ra(e,"no-auth-event")}}function uf(e,t){return hf()._set(df(e),t)}function sf(e){return cf.apply(this,arguments)}function cf(){return cf=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hf()._get(df(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,hf()._remove(df(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),cf.apply(this,arguments)}function lf(e,t){var n,r,i=function(e){var t=pf(e),n=t.link?decodeURIComponent(t.link):void 0,r=pf(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return pf(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=pf(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?ra(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function ff(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function hf(){return fa(Ns)}function df(e){return ro("authEvent",e.config.apiKey,e.name)}function pf(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=Et(t=n)||cr(t)||Ct(t)||Nt();r[0];return rr(r.slice(1).join("?"))}var vf=function(){function e(){xn(this,e),this._redirectPersistence=Os,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=al,this._overrideRedirectResult=Qc}return In(e,[{key:"_initialize",value:function(){var e=mt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new af(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){na(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=mt(vt().mark((function e(t,n,r,i){var a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ef(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),zc.clear(),e.next=10,this._originValidation(t);case 10:return o=of(t,r,i),e.next=13,uf(t,o);case 13:return e.next=15,Ql(t,o,n);case 15:return u=e.sent,e.next=18,Yl(u);case 18:return s=e.sent,e.abrupt("return",Xl(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Jl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Hl(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(mt(vt().mark((function n(){return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,sf(e);case 2:t.onEvent(mf());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=mt(vt().mark((function n(r){var i,a;return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,sf(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=lf(i,r.url)),t.onEvent(a||mf());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Hl().handleOpenURL=function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),yf=vf;function mf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ra("no-auth-event")}}function gf(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function kf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return!("file:"!==gf()&&"ionic:"!==gf()&&"capacitor:"!==gf()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function bf(){return Hn()&&11===(null===document||void 0===document?void 0:document.documentMode)}function wf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return/Edge\/\d+/.test(e)}function xf(){try{var e=self.localStorage,t=Rs();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn();return bf()||wf(e)}()||Qn()}catch(n){return _f()&&Qn()}return!1}function _f(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function If(){return("http:"===gf()||"https:"===gf()||Gn()||kf())&&!(Wn()||Kn())&&xf()&&!_f()}function Sf(){return kf()&&"undefined"!==typeof document}function Ef(){return Tf.apply(this,arguments)}function Tf(){return(Tf=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sf()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cf={LOCAL:"local",NONE:"none",SESSION:"session"},Nf=ua,Af="persistence";function Of(e,t){Nf(Object.values(Cf).includes(t),e,"invalid-persistence-type"),Wn()?Nf(t!==Cf.SESSION,e,"unsupported-persistence-type"):Kn()?Nf(t===Cf.NONE,e,"unsupported-persistence-type"):_f()?Nf(t===Cf.NONE||t===Cf.LOCAL&&Qn(),e,"unsupported-persistence-type"):Nf(t===Cf.NONE||xf(),e,"unsupported-persistence-type")}function Df(e){return Pf.apply(this,arguments)}function Pf(){return Pf=mt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Rf(),r=ro(Af,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Pf.apply(this,arguments)}function Rf(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Lf=ua,Mf=function(){function e(){xn(this,e),this.browserResolver=fa(Vl),this.cordovaResolver=fa(yf),this.underlyingResolver=null,this._redirectPersistence=Os,this._completeRedirectFn=al,this._overrideRedirectResult=Qc}return In(e,[{key:"_initialize",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=mt(vt().mark((function e(t,n,r,i){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=mt(vt().mark((function e(t,n,r,i){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Sf()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Lf(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ef();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ff(e){return e.unwrap()}function Uf(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new qf(e,function(e,t){var n,r=sr(e),i=t;return ua(t.customData.operationType,r,"argument-error"),ua(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ws._fromError(r,i)}(e,t));else if(i){var a=Vf(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function Vf(e){var t=(e instanceof $n?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof $n)&&"temporaryProof"in t&&"phoneNumber"in t)return Tc.credentialFromResult(e);var n,r=t.providerId;if(!r||r===zi)return null;switch(r){case Bi:n=hu;break;case Vi:n=fu;break;case ji:n=du;break;case qi:n=yu;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?pu._create(r,u):Xo._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new lu(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof $n?n.credentialFromError(e):n.credentialFromResult(e)}function jf(e,t){return t.catch((function(t){throw t instanceof $n&&Uf(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Vf(t)),additionalUserInfo:ks(e),user:Kf.getOrCreate(r)}}))}function Bf(e,t){return zf.apply(this,arguments)}function zf(){return zf=mt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return jf(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),zf.apply(this,arguments)}var qf=function(){function e(t,n){xn(this,e),this.resolver=n,this.auth=t.wrapped()}return In(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return jf(Ff(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Kf=function(){function e(t){xn(this,e),this._delegate=t,this.multiFactor=function(e){var t=sr(e);return Ss.has(t)||Ss.set(t,Is._fromUser(t)),Ss.get(t)}(t)}return In(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jf(this.auth,Fu(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bf(this.auth,wc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jf(this.auth,Vc(this._delegate,t,Mf)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Df(wo(this.auth));case 2:return e.abrupt("return",tl(this._delegate,t,Mf));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jf(this.auth,Vu(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Bf(this.auth,function(e,t,n){return _c.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return jf(this.auth,function(e,t,n){return Uc.apply(this,arguments)}(this._delegate,e,Mf))}},{key:"reauthenticateWithRedirect",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Df(wo(this.auth));case 2:return e.abrupt("return",Zc(this._delegate,t,Mf));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return os.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Su(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return fs(sr(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return fs(sr(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Ec.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ls.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return us.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Kf.USER_MAP=new WeakMap;var Gf=ua,Wf=function(){function e(t,n){if(xn(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Gf(r,"invalid-api-key",{appName:t.name}),Gf(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Mf:void 0;this._delegate=n.initialize({options:{persistence:Qf(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Yi),this.linkUnderlyingAuth()}return In(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Kf.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){_o(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return $u.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ju(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Qu.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jf(this._delegate,Zu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return as.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ou.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gf(If(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,rl(this._delegate,Mf);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",jf(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){wo(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Hf(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Hf(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ts.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Hu.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=mt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Of(this._delegate,t),e.t0=t,e.next=e.t0===Cf.SESSION?4:e.t0===Cf.LOCAL?6:e.t0===Cf.NONE?11:13;break;case 4:return n=Os,e.abrupt("break",14);case 6:return e.next=8,fa(ec)._isAvailable();case 8:return r=e.sent,n=r?ec:Ns,e.abrupt("break",14);case 11:return n=no,e.abrupt("break",14);case 13:return e.abrupt("return",na("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return jf(this._delegate,function(e){return wu.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return jf(this._delegate,Lu(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return jf(this._delegate,function(e,t){return qu.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return jf(this._delegate,function(e,t,n){return Lu(sr(e),uu.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return jf(this._delegate,function(e,t,n){return ns.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Bf(this._delegate,function(e,t,n){return bc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gf(If(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",jf(this._delegate,Mc(this._delegate,t,Mf)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gf(If(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Df(this._delegate);case 3:return e.abrupt("return",Yc(this._delegate,t,Mf));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Xu.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Hf(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Kf.getOrCreate(e))},error:t,complete:n}}function Qf(e,t){var n=function(e,t){var n=Rf();if(!n)return[];var r=ro(Af,e,t);switch(n.getItem(r)){case Cf.NONE:return[no];case Cf.LOCAL:return[ec,Os];case Cf.SESSION:return[Os];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(ec)||n.push(ec),"undefined"!==typeof window)for(var r=0,i=[Ns,Os];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(no)||n.push(no),n}Wf.Persistence=Cf;var $f=function(){function e(){xn(this,e),this.providerId="phone",this._delegate=new Tc(Ff(Ri.auth()))}return In(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Tc.credential(e,t)}}]),e}();$f.PHONE_SIGN_IN_METHOD=Tc.PHONE_SIGN_IN_METHOD,$f.PROVIDER_ID=Tc.PROVIDER_ID;var Jf=ua,Yf=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ri.app();xn(this,e),Jf(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new mc(t,n,i.auth()),this.type=this._delegate.type}return In(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new fr("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Wf(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ki,PASSWORD_RESET:Gi,RECOVER_EMAIL:Wi,REVERT_SECOND_FACTOR_ADDITION:Hi,VERIFY_AND_CHANGE_EMAIL:Qi,VERIFY_EMAIL:$i}},EmailAuthProvider:uu,FacebookAuthProvider:fu,GithubAuthProvider:du,GoogleAuthProvider:hu,OAuthProvider:lu,SAMLAuthProvider:vu,PhoneAuthProvider:$f,PhoneMultiFactorGenerator:zl,RecaptchaVerifier:Yf,TwitterAuthProvider:yu,Auth:Wf,AuthCredential:Eo,Error:$n}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.18")}(Ri);var Xf,Zf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},eh={},th=th||{},nh=Zf||self;function rh(){}function ih(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ah(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var oh="closure_uid_"+(1e9*Math.random()>>>0),uh=0;function sh(e,t,n){return e.call.apply(e.bind,arguments)}function ch(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function lh(e,t,n){return(lh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sh:ch).apply(null,arguments)}function fh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function hh(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function dh(){this.s=this.s,this.o=this.o}var ph={};dh.prototype.s=!1,dh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,oh)&&e[oh]||(e[oh]=++uh)}(this);delete ph[e]}},dh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},yh=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function mh(e){return Array.prototype.concat.apply([],arguments)}function gh(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function kh(e){return/^[\s\xa0]*$/.test(e)}var bh,wh=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function xh(e,t){return-1!=e.indexOf(t)}function _h(e,t){return e<t?-1:e>t?1:0}e:{var Ih=nh.navigator;if(Ih){var Sh=Ih.userAgent;if(Sh){bh=Sh;break e}}bh=""}function Eh(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Th(e){var t={};for(var n in e)t[n]=e[n];return t}var Ch="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nh(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ch.length;a++)n=Ch[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ah(e){return Ah[" "](e),e}Ah[" "]=rh;var Oh,Dh=xh(bh,"Opera"),Ph=xh(bh,"Trident")||xh(bh,"MSIE"),Rh=xh(bh,"Edge"),Lh=Rh||Ph,Mh=xh(bh,"Gecko")&&!(xh(bh.toLowerCase(),"webkit")&&!xh(bh,"Edge"))&&!(xh(bh,"Trident")||xh(bh,"MSIE"))&&!xh(bh,"Edge"),Fh=xh(bh.toLowerCase(),"webkit")&&!xh(bh,"Edge");function Uh(){var e=nh.document;return e?e.documentMode:void 0}e:{var Vh="",jh=function(){var e=bh;return Mh?/rv:([^\);]+)(\)|;)/.exec(e):Rh?/Edge\/([\d\.]+)/.exec(e):Ph?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Fh?/WebKit\/(\S+)/.exec(e):Dh?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(jh&&(Vh=jh?jh[1]:""),Ph){var Bh=Uh();if(null!=Bh&&Bh>parseFloat(Vh)){Oh=String(Bh);break e}}Oh=Vh}var zh,qh={};function Kh(){return function(e){var t=qh;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=wh(String(Oh)).split("."),n=wh("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=_h(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||_h(0==a[2].length,0==o[2].length)||_h(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(nh.document&&Ph){var Gh=Uh();zh=Gh||(parseInt(Oh,10)||void 0)}else zh=void 0;var Wh=zh,Hh=function(){if(!nh.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{nh.addEventListener("test",rh,t),nh.removeEventListener("test",rh,t)}catch(P){}return e}();function Qh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function $h(e,t){if(Qh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Mh){e:{try{Ah(t.nodeName);var i=!0;break e}catch(D){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Jh[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$h.Z.h.call(this)}}Qh.prototype.h=function(){this.defaultPrevented=!0},hh($h,Qh);var Jh={2:"touch",3:"pen",4:"mouse"};$h.prototype.h=function(){$h.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Yh="closure_listenable_"+(1e6*Math.random()|0),Xh=0;function Zh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Xh,this.ca=this.fa=!1}function ed(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function td(e){this.src=e,this.g={},this.h=0}function nd(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=vh(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ed(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function rd(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}td.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=rd(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Zh(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var id="closure_lm_"+(1e6*Math.random()|0),ad={};function od(e,t,n,r,i){if(r&&r.once)return sd(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)od(e,t[a],n,r,i);return null}return n=vd(n),e&&e[Yh]?e.N(t,n,ah(r)?!!r.capture:!!r,i):ud(e,t,n,!1,r,i)}function ud(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ah(i)?!!i.capture:!!i,u=dd(e);if(u||(e[id]=u=new td(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=hd;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Hh||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(fd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function sd(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)sd(e,t[a],n,r,i);return null}return n=vd(n),e&&e[Yh]?e.O(t,n,ah(r)?!!r.capture:!!r,i):ud(e,t,n,!0,r,i)}function cd(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)cd(e,t[a],n,r,i);else r=ah(r)?!!r.capture:!!r,n=vd(n),e&&e[Yh]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=rd(a=e.g[t],n,r,i))&&(ed(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=dd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=rd(t,n,r,i)),(n=-1<e?t[e]:null)&&ld(n))}function ld(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Yh])nd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(fd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=dd(t))?(nd(n,e),0==n.h&&(n.src=null,t[id]=null)):ed(e)}}}function fd(e){return e in ad?ad[e]:ad[e]="on"+e}function hd(e,t){if(e.ca)e=!0;else{t=new $h(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&ld(e),e=n.call(r,t)}return e}function dd(e){return(e=e[id])instanceof td?e:null}var pd="__closure_events_fn_"+(1e9*Math.random()>>>0);function vd(e){return"function"===typeof e?e:(e[pd]||(e[pd]=function(t){return e.handleEvent(t)}),e[pd])}function yd(){dh.call(this),this.i=new td(this),this.P=this,this.I=null}function md(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Qh(t,e);else if(t instanceof Qh)t.target=t.target||e;else{var i=t;Nh(t=new Qh(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=gd(o,r,!0,t)&&i}if(i=gd(o=t.g=e,r,!0,t)&&i,i=gd(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=gd(o=t.g=n[a],r,!1,t)&&i}function gd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&nd(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}hh(yd,dh),yd.prototype[Yh]=!0,yd.prototype.removeEventListener=function(e,t,n,r){cd(this,e,t,n,r)},yd.prototype.M=function(){if(yd.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ed(n[r]);delete t.g[e],t.h--}}this.I=null},yd.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},yd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var kd=nh.JSON.stringify;function bd(){var e=Cd,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var wd,xd=function(){function e(){xn(this,e),this.h=this.g=null}return In(e,[{key:"add",value:function(e,t){var n=_d.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),_d=new(function(){function e(t,n){xn(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return In(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Id}),(function(e){return e.reset()})),Id=function(){function e(){xn(this,e),this.next=this.g=this.h=null}return In(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Sd(e){nh.setTimeout((function(){throw e}),0)}function Ed(e,t){wd||function(){var e=nh.Promise.resolve(void 0);wd=function(){e.then(Nd)}}(),Td||(wd(),Td=!0),Cd.add(e,t)}var Td=!1,Cd=new xd;function Nd(){for(var e;e=bd();){try{e.h.call(e.g)}catch(P){Sd(P)}var t=_d;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Td=!1}function Ad(e,t){yd.call(this),this.h=e||1,this.g=t||nh,this.j=lh(this.kb,this),this.l=Date.now()}function Od(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Dd(e,t,n){if("function"===typeof e)n&&(e=lh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=lh(e.handleEvent,e)}return 2147483647<Number(t)?-1:nh.setTimeout(e,t||0)}function Pd(e){e.g=Dd((function(){e.g=null,e.i&&(e.i=!1,Pd(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}hh(Ad,yd),(Xf=Ad.prototype).da=!1,Xf.S=null,Xf.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),md(this,"tick"),this.da&&(Od(this),this.start()))}},Xf.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xf.M=function(){Ad.Z.M.call(this),Od(this),delete this.g};var Rd=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return In(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Pd(this)}},{key:"M",value:function(){Mi(Nn(n.prototype),"M",this).call(this),this.g&&(nh.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(dh);function Ld(e){dh.call(this),this.h=e,this.g={}}hh(Ld,dh);var Md=[];function Fd(e,t,n,r){Array.isArray(n)||(n&&(Md[0]=n.toString()),n=Md);for(var i=0;i<n.length;i++){var a=od(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ud(e){Eh(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ld(e)}),e),e.g={}}function Vd(){this.g=!0}function jd(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return kd(n)}catch(S){return t}}(e,n)+(r?" "+r:"")}))}Ld.prototype.M=function(){Ld.Z.M.call(this),Ud(this)},Ld.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vd.prototype.Aa=function(){this.g=!1},Vd.prototype.info=function(){};var Bd={},zd=null;function qd(){return zd=zd||new yd}function Kd(e){Qh.call(this,Bd.Ma,e)}function Gd(e){var t=qd();md(t,new Kd(t,e))}function Wd(e,t){Qh.call(this,Bd.STAT_EVENT,e),this.stat=t}function Hd(e){var t=qd();md(t,new Wd(t,e))}function Qd(e,t){Qh.call(this,Bd.Na,e),this.size=t}function $d(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return nh.setTimeout((function(){e()}),t)}Bd.Ma="serverreachability",hh(Kd,Qh),Bd.STAT_EVENT="statevent",hh(Wd,Qh),Bd.Na="timingevent",hh(Qd,Qh);var Jd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Yd={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Xd(){}function Zd(e){return e.h||(e.h=e.i())}function ep(){}Xd.prototype.h=null;var tp,np={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function rp(){Qh.call(this,"d")}function ip(){Qh.call(this,"c")}function ap(){}function op(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ld(this),this.P=sp,e=Lh?125:void 0,this.W=new Ad(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new up}function up(){this.i=null,this.g="",this.h=!1}hh(rp,Qh),hh(ip,Qh),hh(ap,Xd),ap.prototype.g=function(){return new XMLHttpRequest},ap.prototype.i=function(){return{}},tp=new ap;var sp=45e3,cp={},lp={};function fp(e,t,n){e.K=1,e.v=Rp(Cp(t)),e.s=n,e.U=!0,hp(e,null)}function hp(e,t){e.F=Date.now(),yp(e),e.A=Cp(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Hp(n.h,"t",r),e.C=0,n=e.l.H,e.h=new up,e.g=Qv(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Rd(lh(e.Ia,e,e.g),e.O)),Fd(e.V,e.g,"readystatechange",e.gb),t=e.H?Th(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Gd(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function dp(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function pp(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=vp(e,n))==lp){4==t&&(e.o=4,Hd(14),i=!1),jd(e.j,e.m,null,"[Incomplete Response]");break}if(r==cp){e.o=4,Hd(15),jd(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}jd(e.j,e.m,r,null),wp(e,r)}dp(e)&&r!=lp&&r!=cp&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Hd(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),jv(t),t.L=!0,Hd(11))):(jd(e.j,e.m,n,"[Invalid Chunked Response]"),bp(e),kp(e))}function vp(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?lp:(n=Number(t.substring(n,r)),isNaN(n)?cp:(r+=1)+n>t.length?lp:(t=t.substr(r,n),e.C=r+n,t))}function yp(e){e.Y=Date.now()+e.P,mp(e,e.P)}function mp(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=$d(lh(e.eb,e),t)}function gp(e){e.B&&(nh.clearTimeout(e.B),e.B=null)}function kp(e){0==e.l.G||e.I||qv(e.l,e)}function bp(e){gp(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Od(e.W),Ud(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function wp(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ev(n.i,e)))if(n.I=e.N,!e.J&&ev(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;zv(n),Ov(n)}Vv(n),Hd(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=$d(lh(n.ab,n),6e3));if(1>=Zp(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Gv(n,11)}else if((e.J||n.g==e)&&zv(n),!kh(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(xh(l,"spdy")||xh(l,"quic")||xh(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(tv(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Pp(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Hv(r,r.H?r.la:null,r.W),d.J){nv(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(gp(p),yp(p)),r.g=d}else Uv(r);0<n.l.length&&Rv(n)}else"stop"!=a[0]&&"close"!=a[0]||Gv(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Gv(n,7):Av(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Gd(4)}catch(a){}}function xp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ih(e)||"string"===typeof e)yh(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(ih(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(ih(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function _p(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof _p)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ip(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Sp(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Sp(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Sp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Xf=op.prototype).setTimeout=function(e){this.P=e},Xf.gb=function(e){e=e.target;var t=this.L;t&&3==Sv(e)?t.l():this.Ia(e)},Xf.Ia=function(e){try{if(e==this.g)e:{var t=Sv(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Lh||this.g&&(this.h.h||this.g.ga()||Ev(this.g)))){this.I||4!=t||7==n||Gd(8==n||0>=r?3:2),gp(this);var i=this.g.ba();this.N=i;t:if(dp(this)){var a=Ev(this.g);e="";var o=a.length,u=4==Sv(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){bp(this),kp(this);var s="";break t}this.h.i=new nh.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kh(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Hd(12),bp(this),kp(this);break e}jd(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wp(this,i)}this.U?(pp(this,t,s),Lh&&this.i&&3==t&&(Fd(this.V,this.W,"tick",this.fb),this.W.start())):(jd(this.j,this.m,s,null),wp(this,s)),4==t&&bp(this),this.i&&!this.I&&(4==t?qv(this.l,this):(this.i=!1,yp(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Hd(12)):(this.o=0,Hd(13)),bp(this),kp(this)}}}catch(t){}},Xf.fb=function(){if(this.g){var e=Sv(this.g),t=this.g.ga();this.C<t.length&&(gp(this),pp(this,e,t),this.i&&4!=e&&yp(this))}},Xf.cancel=function(){this.I=!0,bp(this)},Xf.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Gd(3),Hd(17)),bp(this),this.o=2,kp(this)):mp(this,this.Y-e)},(Xf=_p.prototype).R=function(){Ip(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Xf.T=function(){return Ip(this),this.g.concat()},Xf.get=function(e,t){return Sp(this.h,e)?this.h[e]:t},Xf.set=function(e,t){Sp(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Xf.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Ep=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tp(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Tp){this.g=void 0!==t?t:e.g,Np(this,e.j),this.s=e.s,Ap(this,e.i),Op(this,e.m),this.l=e.l,t=e.h;var n=new qp;n.i=t.i,t.g&&(n.g=new _p(t.g),n.h=t.h),Dp(this,n),this.o=e.o}else e&&(n=String(e).match(Ep))?(this.g=!!t,Np(this,n[1]||"",!0),this.s=Lp(n[2]||""),Ap(this,n[3]||"",!0),Op(this,n[4]),this.l=Lp(n[5]||"",!0),Dp(this,n[6]||"",!0),this.o=Lp(n[7]||"")):(this.g=!!t,this.h=new qp(null,this.g))}function Cp(e){return new Tp(e)}function Np(e,t,n){e.j=n?Lp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ap(e,t,n){e.i=n?Lp(t,!0):t}function Op(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Dp(e,t,n){t instanceof qp?(e.h=t,function(e,t){t&&!e.j&&(Kp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Gp(this,t),Hp(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Mp(t,Bp)),e.h=new qp(t,e.g))}function Pp(e,t,n){e.h.set(t,n)}function Rp(e){return Pp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Lp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Mp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Fp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Tp.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Mp(t,Up,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Mp(t,Up,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Mp(n,"/"==n.charAt(0)?jp:Vp,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Mp(n,zp)),e.join("")};var Up=/[#\/\?@]/g,Vp=/[#\?:]/g,jp=/[#\?]/g,Bp=/[#\?@]/g,zp=/#/g;function qp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Kp(e){e.g||(e.g=new _p,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Gp(e,t){Kp(e),t=Qp(e,t),Sp(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Sp((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ip(e)))}function Wp(e,t){return Kp(e),t=Qp(e,t),Sp(e.g.h,t)}function Hp(e,t,n){Gp(e,t),0<n.length&&(e.i=null,e.g.set(Qp(e,t),gh(n)),e.h+=n.length)}function Qp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Xf=qp.prototype).add=function(e,t){Kp(this),this.i=null,e=Qp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Xf.forEach=function(e,t){Kp(this),this.g.forEach((function(n,r){yh(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Xf.T=function(){Kp(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Xf.R=function(e){Kp(this);var t=[];if("string"===typeof e)Wp(this,e)&&(t=mh(t,this.g.get(Qp(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=mh(t,e[n])}return t},Xf.set=function(e,t){return Kp(this),this.i=null,Wp(this,e=Qp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Xf.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Xf.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var $p=In((function e(t,n){xn(this,e),this.h=t,this.g=n}));function Jp(e){this.l=e||Yp,nh.PerformanceNavigationTiming?e=0<(e=nh.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(nh.g&&nh.g.Ea&&nh.g.Ea()&&nh.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Yp=10;function Xp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Zp(e){return e.h?1:e.g?e.g.size:0}function ev(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function tv(e,t){e.g?e.g.add(t):e.h=t}function nv(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function rv(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Sn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return gh(e.i)}function iv(){}function av(){this.g=new iv}function ov(e,t,n){var r=n||"";try{xp(e,(function(e,n){var i=e;ah(e)&&(i=kd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function uv(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(D){}}function sv(e){this.l=e.$b||null,this.j=e.ib||!1}function cv(e,t){yd.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=lv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jp.prototype.cancel=function(){if(this.i=rv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Sn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},iv.prototype.stringify=function(e){return nh.JSON.stringify(e,void 0)},iv.prototype.parse=function(e){return nh.JSON.parse(e,void 0)},hh(sv,Xd),sv.prototype.g=function(){return new cv(this.l,this.j)},sv.prototype.i=function(e){return function(){return e}}({}),hh(cv,yd);var lv=0;function fv(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function hv(e){e.readyState=4,e.l=null,e.j=null,e.A=null,dv(e)}function dv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Xf=cv.prototype).open=function(e,t){if(this.readyState!=lv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,dv(this)},Xf.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||nh).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Xf.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hv(this)),this.readyState=lv},Xf.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,dv(this)),this.g&&(this.readyState=3,dv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof nh.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fv(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Xf.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hv(this):dv(this),3==this.readyState&&fv(this)}},Xf.Ua=function(e){this.g&&(this.response=this.responseText=e,hv(this))},Xf.Ta=function(e){this.g&&(this.response=e,hv(this))},Xf.ha=function(){this.g&&hv(this)},Xf.setRequestHeader=function(e,t){this.v.append(e,t)},Xf.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Xf.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(cv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var pv=nh.JSON.parse;function vv(e){yd.call(this),this.headers=new _p,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yv,this.K=this.L=!1}hh(vv,yd);var yv="",mv=/^https?$/i,gv=["POST","PUT"];function kv(e){return"content-type"==e.toLowerCase()}function bv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,wv(e),_v(e)}function wv(e){e.D||(e.D=!0,md(e,"complete"),md(e,"error"))}function xv(e){if(e.h&&"undefined"!=typeof th&&(!e.C[1]||4!=Sv(e)||2!=e.ba()))if(e.v&&4==Sv(e))Dd(e.Fa,0,e);else if(md(e,"readystatechange"),4==Sv(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ep)[1]||null;if(!a&&nh.self&&nh.self.location){var o=nh.self.location.protocol;a=o.substr(0,o.length-1)}i=!mv.test(a?a.toLowerCase():"")}t=i}if(t)md(e,"complete"),md(e,"success");else{e.m=6;try{var u=2<Sv(e)?e.g.statusText:""}catch(A){u=""}e.j=u+" ["+e.ba()+"]",wv(e)}}finally{_v(e)}}}function _v(e,t){if(e.g){Iv(e);var n=e.g,r=e.C[0]?rh:null;e.g=null,e.C=null,t||md(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Iv(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(nh.clearTimeout(e.A),e.A=null)}function Sv(e){return e.g?e.g.readyState:0}function Ev(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case yv:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(B){return null}}function Tv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Eh(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Pp(e,t,n))}function Cv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Nv(e){this.za=0,this.l=[],this.h=new Vd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Cv("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Cv("baseRetryDelayMs",5e3,e),this.$a=Cv("retryDelaySeedMs",1e4,e),this.Ya=Cv("forwardChannelMaxRetries",2,e),this.ra=Cv("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Jp(e&&e.concurrentRequestLimit),this.Ca=new av,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Av(e){if(Dv(e),3==e.G){var t=e.V++,n=Cp(e.F);Pp(n,"SID",e.J),Pp(n,"RID",t),Pp(n,"TYPE","terminate"),Mv(e,n),(t=new op(e,e.h,t,void 0)).K=2,t.v=Rp(Cp(n)),n=!1,nh.navigator&&nh.navigator.sendBeacon&&(n=nh.navigator.sendBeacon(t.v.toString(),"")),!n&&nh.Image&&((new Image).src=t.v,n=!0),n||(t.g=Qv(t.l,null),t.g.ea(t.v)),t.F=Date.now(),yp(t)}Wv(e)}function Ov(e){e.g&&(jv(e),e.g.cancel(),e.g=null)}function Dv(e){Ov(e),e.u&&(nh.clearTimeout(e.u),e.u=null),zv(e),e.i.cancel(),e.m&&("number"===typeof e.m&&nh.clearTimeout(e.m),e.m=null)}function Pv(e,t){e.l.push(new $p(e.Za++,t)),3==e.G&&Rv(e)}function Rv(e){Xp(e.i)||e.m||(e.m=!0,Ed(e.Ha,e),e.C=0)}function Lv(e,t){var n;n=t?t.m:e.V++;var r=Cp(e.F);Pp(r,"SID",e.J),Pp(r,"RID",n),Pp(r,"AID",e.U),Mv(e,r),e.o&&e.s&&Tv(r,e.o,e.s),n=new op(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Fv(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),tv(e.i,n),fp(n,r,t)}function Mv(e,t){e.j&&xp({},(function(e,n){Pp(t,n,e)}))}function Fv(e,t,n){n=Math.min(e.l.length,n);var r=e.j?lh(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{ov(l,o,"req"+c+"_")}catch(ue){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Uv(e){e.g||e.u||(e.Y=1,Ed(e.Ga,e),e.A=0)}function Vv(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=$d(lh(e.Ga,e),Kv(e,e.A)),e.A++,!0)}function jv(e){null!=e.B&&(nh.clearTimeout(e.B),e.B=null)}function Bv(e){e.g=new op(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Cp(e.oa);Pp(t,"RID","rpc"),Pp(t,"SID",e.J),Pp(t,"CI",e.N?"0":"1"),Pp(t,"AID",e.U),Mv(e,t),Pp(t,"TYPE","xmlhttp"),e.o&&e.s&&Tv(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Rp(Cp(t)),n.s=null,n.U=!0,hp(n,e)}function zv(e){null!=e.v&&(nh.clearTimeout(e.v),e.v=null)}function qv(e,t){var n=null;if(e.g==t){zv(e),jv(e),e.g=null;var r=2}else{if(!ev(e.i,t))return;n=t.D,nv(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;md(r=qd(),new Qd(r,n,t,i)),Rv(e)}else Uv(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Zp(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=$d(lh(e.Ha,e,t),Kv(e,e.C)),e.C++,!0))}(e,t)||2==r&&Vv(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Gv(e,5);break;case 4:Gv(e,10);break;case 3:Gv(e,6);break;default:Gv(e,2)}}function Kv(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Gv(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=lh(e.jb,e);n||(n=new Tp("//www.google.com/images/cleardot.gif"),nh.location&&"http"==nh.location.protocol||Np(n,"https"),Rp(n)),function(e,t){var n=new Vd;if(nh.Image){var r=new Image;r.onload=fh(uv,n,r,"TestLoadImage: loaded",!0,t),r.onerror=fh(uv,n,r,"TestLoadImage: error",!1,t),r.onabort=fh(uv,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=fh(uv,n,r,"TestLoadImage: timeout",!1,t),nh.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Hd(2);e.G=0,e.j&&e.j.va(t),Wv(e),Dv(e)}function Wv(e){e.G=0,e.I=-1,e.j&&(0==rv(e.i).length&&0==e.l.length||(e.i.i.length=0,gh(e.l),e.l.length=0),e.j.ua())}function Hv(e,t,n){var r=function(e){return e instanceof Tp?Cp(e):new Tp(e,void 0)}(n);if(""!=r.i)t&&Ap(r,t+"."+r.i),Op(r,r.m);else{var i=nh.location;r=function(e,t,n,r){var i=new Tp(null,void 0);return e&&Np(i,e),t&&Ap(i,t),n&&Op(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Eh(e.aa,(function(e,t){Pp(r,t,e)})),t=e.D,n=e.sa,t&&n&&Pp(r,t,n),Pp(r,"VER",e.ma),Mv(e,r),r}function Qv(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new vv(new sv({ib:!0})):new vv(e.qa)).L=e.H,t}function $v(){}function Jv(){if(Ph&&!(10<=Number(Wh)))throw Error("Environmental error: no available transport.")}function Yv(e,t){yd.call(this),this.g=new Nv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!kh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!kh(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ey(this)}function Xv(e){rp.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Zv(){ip.call(this),this.status=1}function ey(e){this.g=e}(Xf=vv.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():tp.g(),this.C=this.u?Zd(this.u):Zd(tp),this.g.onreadystatechange=lh(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(D){return void bv(this,D)}e=n||"";var i=new _p(this.headers);r&&xp(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=kv,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=nh.FormData&&e instanceof nh.FormData,!(0<=vh(gv,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Iv(this),0<this.B&&((this.K=function(e){return Ph&&Kh()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lh(this.pa,this)):this.A=Dd(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(D){bv(this,D)}},Xf.pa=function(){"undefined"!=typeof th&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,md(this,"timeout"),this.abort(8))},Xf.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,md(this,"complete"),md(this,"abort"),_v(this))},Xf.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_v(this,!0)),vv.Z.M.call(this)},Xf.Fa=function(){this.s||(this.F||this.v||this.l?xv(this):this.cb())},Xf.cb=function(){xv(this)},Xf.ba=function(){try{return 2<Sv(this)?this.g.status:-1}catch(O){return-1}},Xf.ga=function(){try{return this.g?this.g.responseText:""}catch(O){return""}},Xf.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),pv(t)}},Xf.Da=function(){return this.m},Xf.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Xf=Nv.prototype).ma=8,Xf.G=1,Xf.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(B){}},Xf.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new op(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Nh(n=Th(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Fv(this,t,r),Pp(i=Cp(this.F),"RID",e),Pp(i,"CVER",22),this.D&&Pp(i,"X-HTTP-Session-Id",this.D),Mv(this,i),this.o&&n&&Tv(i,this.o,n),tv(this.i,t),this.Ra&&Pp(i,"TYPE","init"),this.ja?(Pp(i,"$req",r),Pp(i,"SID","null"),t.$=!0,fp(t,i,null)):fp(t,i,r),this.G=2}}else 3==this.G&&(e?Lv(this,e):0==this.l.length||Xp(this.i)||Lv(this))},Xf.Ga=function(){if(this.u=null,Bv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=$d(lh(this.bb,this),e)}},Xf.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Hd(10),Ov(this),Bv(this))},Xf.ab=function(){null!=this.v&&(this.v=null,Ov(this),Vv(this),Hd(19))},Xf.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Hd(2)):(this.h.info("Failed to ping google.com"),Hd(1))},(Xf=$v.prototype).xa=function(){},Xf.wa=function(){},Xf.va=function(){},Xf.ua=function(){},Xf.Oa=function(){},Jv.prototype.g=function(e,t){return new Yv(e,t)},hh(Yv,yd),Yv.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ed(lh(e.hb,e,t))),Hd(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Hv(e,null,e.W),Rv(e)},Yv.prototype.close=function(){Av(this.g)},Yv.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Pv(this.g,t)}else this.v?((t={}).__data__=kd(e),Pv(this.g,t)):Pv(this.g,e)},Yv.prototype.M=function(){this.g.j=null,delete this.j,Av(this.g),delete this.g,Yv.Z.M.call(this)},hh(Xv,rp),hh(Zv,ip),hh(ey,$v),ey.prototype.xa=function(){md(this.g,"a")},ey.prototype.wa=function(e){md(this.g,new Xv(e))},ey.prototype.va=function(e){md(this.g,new Zv(e))},ey.prototype.ua=function(){md(this.g,"b")},Jv.prototype.createWebChannel=Jv.prototype.g,Yv.prototype.send=Yv.prototype.u,Yv.prototype.open=Yv.prototype.m,Yv.prototype.close=Yv.prototype.close,Jd.NO_ERROR=0,Jd.TIMEOUT=8,Jd.HTTP_ERROR=6,Yd.COMPLETE="complete",ep.EventType=np,np.OPEN="a",np.CLOSE="b",np.ERROR="c",np.MESSAGE="d",yd.prototype.listen=yd.prototype.N,vv.prototype.listenOnce=vv.prototype.O,vv.prototype.getLastError=vv.prototype.La,vv.prototype.getLastErrorCode=vv.prototype.Da,vv.prototype.getStatus=vv.prototype.ba,vv.prototype.getResponseJson=vv.prototype.Qa,vv.prototype.getResponseText=vv.prototype.ga,vv.prototype.send=vv.prototype.ea;var ty=eh.createWebChannelTransport=function(){return new Jv},ny=eh.getStatEventTarget=function(){return qd()},ry=eh.ErrorCode=Jd,iy=eh.EventType=Yd,ay=eh.Event=Bd,oy=eh.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},uy=eh.FetchXmlHttpFactory=sv,sy=eh.WebChannel=ep,cy=eh.XhrIo=vv,ly="@firebase/firestore",fy=function(){function e(t){xn(this,e),this.uid=t}return In(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();fy.UNAUTHENTICATED=new fy(null),fy.GOOGLE_CREDENTIALS=new fy("google-credentials-uid"),fy.FIRST_PARTY=new fy("first-party-uid"),fy.MOCK_USER=new fy("mock-user");var hy="9.9.2",dy=new xr("@firebase/firestore");function py(){return dy.logLevel}function vy(e){if(dy.logLevel<=vr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gy);dy.debug.apply(dy,["Firestore (".concat(hy,"): ").concat(e)].concat(lr(i)))}}function yy(e){if(dy.logLevel<=vr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gy);dy.error.apply(dy,["Firestore (".concat(hy,"): ").concat(e)].concat(lr(i)))}}function my(e){if(dy.logLevel<=vr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gy);dy.warn.apply(dy,["Firestore (".concat(hy,"): ").concat(e)].concat(lr(i)))}}function gy(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ky(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(hy,") INTERNAL ASSERTION FAILED: ")+e;throw yy(t),new Error(t)}function by(e,t){e||ky()}function wy(e,t){return e}var xy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_y=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return In(n)}($n),Iy=In((function e(){var t=this;xn(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Sy=In((function e(t,n){xn(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Ey=function(){function e(){xn(this,e)}return In(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(fy.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ty=function(){function e(t){xn(this,e),this.token=t,this.changeListener=null}return In(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Cy=function(){function e(t){xn(this,e),this.t=t,this.currentUser=fy.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return In(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Iy;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Iy,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){vy("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(vy("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Iy)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(vy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(by("string"==typeof n.accessToken),new Sy(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return by(null===e||"string"==typeof e),new fy(e)}}]),e}(),Ny=In((function e(t,n,r){xn(this,e),this.type="FirstParty",this.user=fy.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Ay=function(){function e(t,n,r){xn(this,e),this.h=t,this.l=n,this.m=r}return In(e,[{key:"getToken",value:function(){return Promise.resolve(new Ny(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(fy.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Oy=In((function e(t){xn(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Dy=function(){function e(t){xn(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return In(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&vy("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,vy("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){vy("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):vy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(by("string"==typeof t.token),e.p=t.token,new Oy(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Py(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ry=function(){function e(){xn(this,e)}return In(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Py(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ly(e,t){return e<t?-1:e>t?1:0}function My(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Fy(e){return e+"\0"}var Uy=function(){function e(t,n){if(xn(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new _y(xy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _y(xy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new _y(xy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _y(xy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return In(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ly(this.nanoseconds,e.nanoseconds):Ly(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Vy=function(){function e(t){xn(this,e),this.timestamp=t}return In(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Uy(0,0))}},{key:"max",value:function(){return new e(new Uy(253402300799,999999999))}}]),e}(),jy=function(){function e(t,n,r){xn(this,e),void 0===n?n=0:n>t.length&&ky(),void 0===r?r=t.length-n:r>t.length-n&&ky(),this.segments=t,this.offset=n,this.len=r}return In(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),By=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.apply(this,arguments)}return In(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new _y(xy.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,lr(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(jy),zy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qy=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.apply(this,arguments)}return In(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return zy.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new _y(xy.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new _y(xy.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new _y(xy.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new _y(xy.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(jy),Ky=function(){function e(t){xn(this,e),this.path=t}return In(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===By.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(By.fromString(t))}},{key:"fromName",value:function(t){return new e(By.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(By.emptyPath())}},{key:"comparator",value:function(e,t){return By.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new By(t.slice()))}}]),e}(),Gy=In((function e(t,n,r,i){xn(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Wy(e){return e.fields.find((function(e){return 2===e.kind}))}function Hy(e){return e.fields.filter((function(e){return 2!==e.kind}))}Gy.UNKNOWN_ID=-1;var Qy=In((function e(t,n){xn(this,e),this.fieldPath=t,this.kind=n}));var $y=function(){function e(t,n){xn(this,e),this.sequenceNumber=t,this.offset=n}return In(e,null,[{key:"empty",value:function(){return new e(0,Xy.min())}}]),e}();function Jy(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Vy.fromTimestamp(1e9===r?new Uy(n+1,0):new Uy(n,r));return new Xy(i,Ky.empty(),t)}function Yy(e){return new Xy(e.readTime,e.key,-1)}var Xy=function(){function e(t,n,r){xn(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return In(e,null,[{key:"min",value:function(){return new e(Vy.min(),Ky.empty(),-1)}},{key:"max",value:function(){return new e(Vy.max(),Ky.empty(),-1)}}]),e}();function Zy(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Ky.comparator(e.documentKey,t.documentKey))?n:Ly(e.largestBatchId,t.largestBatchId)}var em="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tm=function(){function e(){xn(this,e),this.onCommittedListeners=[]}return In(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function nm(e){return rm.apply(this,arguments)}function rm(){return rm=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===xy.FAILED_PRECONDITION&&t.message===em){e.next=2;break}throw t;case 2:vy("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),rm.apply(this,arguments)}var im=function(){function e(t){var n=this;xn(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return In(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ky(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Sn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),am=function(){function e(t,n){var r=this;xn(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new Iy,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new sm(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=dm(e.target.error);r.T.reject(new sm(t,n))}}return In(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(vy("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new lm(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new sm(n,t)}}}]),e}(),om=function(){function e(t,n,r){xn(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(zn())&&yy("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return In(e,[{key:"k",value:function(){var e=mt(vt().mark((function e(t){var n=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return vy("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new sm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new _y(xy.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new _y(xy.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new sm(t,n))},i.onupgradeneeded=function(e){vy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.M(t,i.transaction,e.oldVersion,n.version).next((function(){vy("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.O&&(this.db.onversionchange=function(e){return n.O(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.O=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=mt(vt().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(vt().mark((function e(){var n,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=am.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),im.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,vy("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return vy("SimpleDb","Removing database:",e),fm(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!Qn())return!1;if(e.S())return!0;var t=zn(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),um=function(){function e(t){xn(this,e),this.$=t,this.B=!1,this.L=null}return In(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return fm(this.$.delete())}}]),e}(),sm=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this,xy.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return In(n)}(_y);function cm(e){return"IndexedDbTransactionError"===e.name}var lm=function(){function e(t){xn(this,e),this.store=t}return In(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(vy("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(vy("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),fm(n)}},{key:"add",value:function(e){return vy("SimpleDb","ADD",this.store.name,e,e),fm(this.store.add(e))}},{key:"get",value:function(e){var t=this;return fm(this.store.get(e)).next((function(n){return void 0===n&&(n=null),vy("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return vy("SimpleDb","DELETE",this.store.name,e),fm(this.store.delete(e))}},{key:"count",value:function(){return vy("SimpleDb","COUNT",this.store.name),fm(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new im((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new im((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){vy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new im((function(n,r){t.onerror=function(e){var t=dm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new im((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new um(i),o=t(i.primaryKey,i.value,a);if(o instanceof im){var u=o.catch((function(e){return a.done(),im.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return im.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function fm(e){return new im((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=dm(e.target.error);n(t)}}))}var hm=!1;function dm(e){var t=om.v(zn());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new _y("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return hm||(hm=!0,setTimeout((function(){throw r}),0)),r}}return e}var pm=function(){function e(t,n){xn(this,e),this.asyncQueue=t,this.X=n,this.task=null}return In(e,[{key:"start",value:function(){this.Z(15)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;vy("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=vy,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!cm(e.t4)){e.next=17;break}vy("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,nm(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),vm=function(){function e(t,n){xn(this,e),this.localStore=t,this.persistence=n}return In(e,[{key:"tt",value:function(){var e=mt(vt().mark((function e(){var t,n=this,r=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return im.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return vy("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return vy("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Yy(t);Zy(r,n)>0&&(n=r)})),new Xy(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),ym=function(){function e(t,n){var r=this;xn(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return In(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function mm(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function gm(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function km(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}ym.ot=-1;var bm=function(){function e(t,n){xn(this,e),this.comparator=t,this.root=n||xm.EMPTY}return In(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,xm.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xm.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new wm(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new wm(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new wm(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new wm(this.root,e,this.comparator,!0)}}]),e}(),wm=function(){function e(t,n,r,i){xn(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return In(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),xm=function(){function e(t,n,r,i,a){xn(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return In(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ky();if(this.right.isRed())throw ky();var e=this.left.check();if(e!==this.right.check())throw ky();return e+(this.isRed()?0:1)}}]),e}();xm.EMPTY=null,xm.RED=!0,xm.BLACK=!1,xm.EMPTY=new(function(){function e(){xn(this,e),this.size=0}return In(e,[{key:"key",get:function(){throw ky()}},{key:"value",get:function(){throw ky()}},{key:"color",get:function(){throw ky()}},{key:"left",get:function(){throw ky()}},{key:"right",get:function(){throw ky()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new xm(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var _m=function(){function e(t){xn(this,e),this.comparator=t,this.data=new bm(this.comparator)}return In(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Im(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Im(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Im=function(){function e(t){xn(this,e),this.iter=t}return In(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Sm(e){return e.hasNext()?e.getNext():void 0}var Em=function(){function e(t){xn(this,e),this.fields=t,t.sort(qy.comparator)}return In(e,[{key:"unionWith",value:function(t){var n,r=new _m(qy.comparator),i=Sn(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Sn(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Sn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return My(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Tm=function(e){function t(e){xn(this,t),this.binaryString=e}return In(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ly(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Tm.EMPTY_BYTE_STRING=new Tm("");var Cm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nm(e){if(by(!!e),"string"==typeof e){var t=0,n=Cm.exec(e);if(by(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Am(e.seconds),nanos:Am(e.nanos)}}function Am(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Om(e){return"string"==typeof e?Tm.fromBase64String(e):Tm.fromUint8Array(e)}function Dm(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Pm(e){var t=e.mapValue.fields.__previous_value__;return Dm(t)?Pm(t):t}function Rm(e){var t=Nm(e.mapValue.fields.__local_write_time__.timestampValue);return new Uy(t.seconds,t.nanos)}var Lm=In((function e(t,n,r,i,a,o,u,s){xn(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Mm=function(){function e(t,n){xn(this,e),this.projectId=t,this.database=n||"(default)"}return In(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Fm(e){return null==e}function Um(e){return 0===e&&1/e==-1/0}function Vm(e){return"number"==typeof e&&Number.isInteger(e)&&!Um(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var jm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bm={nullValue:"NULL_VALUE"};function zm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Dm(e)?4:ng(e)?9007199254740991:10:ky()}function qm(e,t){if(e===t)return!0;var n=zm(e);if(n!==zm(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rm(e).isEqual(Rm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Nm(e.timestampValue),r=Nm(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Om(e.bytesValue).isEqual(Om(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Am(e.geoPointValue.latitude)===Am(t.geoPointValue.latitude)&&Am(e.geoPointValue.longitude)===Am(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Am(e.integerValue)===Am(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Am(e.doubleValue),r=Am(t.doubleValue);return n===r?Um(n)===Um(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return My(e.arrayValue.values||[],t.arrayValue.values||[],qm);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(mm(n)!==mm(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qm(n[i],r[i])))return!1;return!0}(e,t);default:return ky()}}function Km(e,t){return void 0!==(e.values||[]).find((function(e){return qm(e,t)}))}function Gm(e,t){if(e===t)return 0;var n=zm(e),r=zm(t);if(n!==r)return Ly(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ly(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Am(e.integerValue||e.doubleValue),r=Am(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Wm(e.timestampValue,t.timestampValue);case 4:return Wm(Rm(e),Rm(t));case 5:return Ly(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Om(e),r=Om(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ly(n[i],r[i]);if(0!==a)return a}return Ly(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ly(Am(e.latitude),Am(t.latitude));return 0!==n?n:Ly(Am(e.longitude),Am(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Gm(n[i],r[i]);if(a)return a}return Ly(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===jm.mapValue&&t===jm.mapValue)return 0;if(e===jm.mapValue)return 1;if(t===jm.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ly(r[o],a[o]);if(0!==u)return u;var s=Gm(n[r[o]],i[a[o]]);if(0!==s)return s}return Ly(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ky()}}function Wm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ly(e,t);var n=Nm(e),r=Nm(t),i=Ly(n.seconds,r.seconds);return 0!==i?i:Ly(n.nanos,r.nanos)}function Hm(e){return Qm(e)}function Qm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Nm(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Om(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ky.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Sn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Qm(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Sn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Qm(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ky();var t,n}function $m(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Jm(e){return!!e&&"integerValue"in e}function Ym(e){return!!e&&"arrayValue"in e}function Xm(e){return!!e&&"nullValue"in e}function Zm(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function eg(e){return!!e&&"mapValue"in e}function tg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return gm(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=tg(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=tg(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ng(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function rg(e){return"nullValue"in e?Bm:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?$m(Mm.empty(),Ky.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ky()}function ig(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?$m(Mm.empty(),Ky.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?jm:ky()}function ag(e,t){var n=Gm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function og(e,t){var n=Gm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ug=function(){function e(t){xn(this,e),this.value=t}return In(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!eg(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tg(t)}},{key:"setAll",value:function(e){var t=this,n=qy.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=tg(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());eg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return qm(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];eg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){gm(t,(function(t,n){return e[t]=n}));var r,i=Sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(tg(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function sg(e){var t=[];return gm(e.fields,(function(e,n){var r=new qy([e]);if(eg(n)){var i=sg(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Sn(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Em(t)}var cg=function(){function e(t,n,r,i,a,o){xn(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return In(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ug.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ug.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Vy.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Vy.min(),Vy.min(),ug.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Vy.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Vy.min(),ug.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Vy.min(),ug.empty(),2)}}]),e}(),lg=In((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;xn(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function fg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new lg(e,t,n,r,i,a,o)}function hg(e){var t=wy(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Hm(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Fm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Hm(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Hm(e)})).join(",")),t.ut=n}return t.ut}function dg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ng(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!qm(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Og(e.startAt,t.startAt)&&Og(e.endAt,t.endAt)}function pg(e){return Ky.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function vg(e,t){return e.filters.filter((function(e){return e instanceof gg&&e.field.isEqual(t)}))}function yg(e,t,n){var r,i=Bm,a=!0,o=Sn(vg(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Bm,c=!0;switch(u.op){case"<":case"<=":s=rg(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Bm}ag({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];ag({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function mg(e,t,n){var r,i=jm,a=!0,o=Sn(vg(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=jm,c=!0;switch(u.op){case">=":case">":s=ig(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=jm}og({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];og({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var gg=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){var a;return xn(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return In(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Gm(t,this.value)):null!==t&&zm(this.value)===zm(t)&&this.at(Gm(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ky()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new kg(e,t,r):"array-contains"===t?new _g(e,r):"in"===t?new Ig(e,r):"not-in"===t?new Sg(e,r):"array-contains-any"===t?new Eg(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new bg(e,n):new wg(e,n)}}]),n}(function(){return In((function e(){xn(this,e)}))}()),kg=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){var a;return xn(this,n),(a=t.call(this,e,r,i)).key=Ky.fromName(i.referenceValue),a}return In(n,[{key:"matches",value:function(e){var t=Ky.comparator(e.key,this.key);return this.at(t)}}]),n}(gg),bg=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this,e,"in",r)).keys=xg("in",r),i}return In(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(gg),wg=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this,e,"not-in",r)).keys=xg("not-in",r),i}return In(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(gg);function xg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Ky.fromName(e.referenceValue)}))}var _g=function(e){Cn(n,e);var t=Dn(n);function n(e,r){return xn(this,n),t.call(this,e,"array-contains",r)}return In(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Ym(t)&&Km(t.arrayValue,this.value)}}]),n}(gg),Ig=function(e){Cn(n,e);var t=Dn(n);function n(e,r){return xn(this,n),t.call(this,e,"in",r)}return In(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Km(this.value.arrayValue,t)}}]),n}(gg),Sg=function(e){Cn(n,e);var t=Dn(n);function n(e,r){return xn(this,n),t.call(this,e,"not-in",r)}return In(n,[{key:"matches",value:function(e){if(Km(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Km(this.value.arrayValue,t)}}]),n}(gg),Eg=function(e){Cn(n,e);var t=Dn(n);function n(e,r){return xn(this,n),t.call(this,e,"array-contains-any",r)}return In(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Ym(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Km(t.value.arrayValue,e)}))}}]),n}(gg),Tg=In((function e(t,n){xn(this,e),this.position=t,this.inclusive=n})),Cg=In((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";xn(this,e),this.field=t,this.dir=n}));function Ng(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ag(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Ky.comparator(Ky.fromName(o.referenceValue),n.key):Gm(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Og(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!qm(e.position[n],t.position[n]))return!1;return!0}var Dg=In((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;xn(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function Pg(e,t,n,r,i,a,o,u){return new Dg(e,t,n,r,i,a,o,u)}function Rg(e){return new Dg(e)}function Lg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mg(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Fg(e){var t,n=Sn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Ug(e){return null!==e.collectionGroup}function Vg(e){var t=wy(e);if(null===t.lt){t.lt=[];var n=Fg(t),r=Mg(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new Cg(n)),t.lt.push(new Cg(qy.keyField(),"asc"));else{var i,a=!1,o=Sn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Cg(qy.keyField(),s))}}}return t.lt}function jg(e){var t=wy(e);if(!t.ft)if("F"===t.limitType)t.ft=fg(t.path,t.collectionGroup,Vg(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Sn(Vg(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Cg(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Tg(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Tg(t.startAt.position,t.startAt.inclusive):null;t.ft=fg(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function Bg(e,t,n){return new Dg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zg(e,t){return dg(jg(e),jg(t))&&e.limitType===t.limitType}function qg(e){return"".concat(hg(jg(e)),"|lt:").concat(e.limitType)}function Kg(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Hm(t.value));var t})).join(", "),"]")),Fm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Hm(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Hm(e)})).join(",")),"Target(".concat(t,")")}(jg(e)),"; limitType=").concat(e.limitType,")")}function Gg(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ky.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Sn(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Sn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ag(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Vg(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ag(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Vg(e),t))}(e,t)}function Wg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Hg(e){return function(t,n){var r,i=!1,a=Sn(Vg(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Qg(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Qg(e,t,n){var r=e.field.isKeyField()?Ky.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Gm(r,i):ky()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ky()}}function $g(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Um(t)?"-0":t}}function Jg(e){return{integerValue:""+e}}function Yg(e,t){return Vm(t)?Jg(t):$g(e,t)}var Xg=In((function e(){xn(this,e),this._=void 0}));function Zg(e,t,n){return e instanceof nk?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof rk?ik(e,t):e instanceof ak?ok(e,t):function(e,t){var n=tk(e,t),r=sk(n)+sk(e._t);return Jm(n)&&Jm(e._t)?Jg(r):$g(e.wt,r)}(e,t)}function ek(e,t,n){return e instanceof rk?ik(e,t):e instanceof ak?ok(e,t):n}function tk(e,t){return e instanceof uk?Jm(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var nk=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.apply(this,arguments)}return In(n)}(Xg),rk=function(e){Cn(n,e);var t=Dn(n);function n(e){var r;return xn(this,n),(r=t.call(this)).elements=e,r}return In(n)}(Xg);function ik(e,t){var n,r=ck(t),i=Sn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return qm(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ak=function(e){Cn(n,e);var t=Dn(n);function n(e){var r;return xn(this,n),(r=t.call(this)).elements=e,r}return In(n)}(Xg);function ok(e,t){var n,r=ck(t),i=Sn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!qm(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var uk=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this)).wt=e,i._t=r,i}return In(n)}(Xg);function sk(e){return Am(e.integerValue||e.doubleValue)}function ck(e){return Ym(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var lk=In((function e(t,n){xn(this,e),this.field=t,this.transform=n}));var fk=In((function e(t,n){xn(this,e),this.version=t,this.transformResults=n})),hk=function(){function e(t,n){xn(this,e),this.updateTime=t,this.exists=n}return In(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function dk(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var pk=In((function e(){xn(this,e)}));function vk(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Tk(e.key,hk.none()):new bk(e.key,e.data,hk.none());var n,r=e.data,i=ug.empty(),a=new _m(qy.comparator),o=Sn(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new wk(e.key,i,new Em(a.toArray()),hk.none())}function yk(e,t,n){e instanceof bk?function(e,t,n){var r=e.value.clone(),i=_k(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof wk?function(e,t,n){if(dk(e.precondition,t)){var r=_k(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(xk(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function mk(e,t,n,r){return e instanceof bk?function(e,t,n,r){if(!dk(e.precondition,t))return n;var i=e.value.clone(),a=Ik(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof wk?function(e,t,n,r){if(!dk(e.precondition,t))return n;var i=Ik(e.fieldTransforms,r,t),a=t.data;return a.setAll(xk(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return dk(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function gk(e,t){var n,r=null,i=Sn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=tk(a.transform,o||null);null!=u&&(null===r&&(r=ug.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function kk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&My(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof rk&&t instanceof rk||e instanceof ak&&t instanceof ak?My(e.elements,t.elements,qm):e instanceof uk&&t instanceof uk?qm(e._t,t._t):e instanceof nk&&t instanceof nk}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var bk=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return xn(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return In(n,[{key:"getFieldMask",value:function(){return null}}]),n}(pk),wk=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return xn(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return In(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(pk);function xk(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function _k(e,t,n){var r=new Map;by(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,ek(o,u,n[i]))}return r}function Ik(e,t,n){var r,i=new Map,a=Sn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Zg(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Sk,Ek,Tk=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return In(n,[{key:"getFieldMask",value:function(){return null}}]),n}(pk),Ck=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return In(n,[{key:"getFieldMask",value:function(){return null}}]),n}(pk),Nk=In((function e(t){xn(this,e),this.count=t}));function Ak(e){switch(e){default:return ky();case xy.CANCELLED:case xy.UNKNOWN:case xy.DEADLINE_EXCEEDED:case xy.RESOURCE_EXHAUSTED:case xy.INTERNAL:case xy.UNAVAILABLE:case xy.UNAUTHENTICATED:return!1;case xy.INVALID_ARGUMENT:case xy.NOT_FOUND:case xy.ALREADY_EXISTS:case xy.PERMISSION_DENIED:case xy.FAILED_PRECONDITION:case xy.ABORTED:case xy.OUT_OF_RANGE:case xy.UNIMPLEMENTED:case xy.DATA_LOSS:return!0}}function Ok(e){if(void 0===e)return yy("GRPC error has no .code"),xy.UNKNOWN;switch(e){case Sk.OK:return xy.OK;case Sk.CANCELLED:return xy.CANCELLED;case Sk.UNKNOWN:return xy.UNKNOWN;case Sk.DEADLINE_EXCEEDED:return xy.DEADLINE_EXCEEDED;case Sk.RESOURCE_EXHAUSTED:return xy.RESOURCE_EXHAUSTED;case Sk.INTERNAL:return xy.INTERNAL;case Sk.UNAVAILABLE:return xy.UNAVAILABLE;case Sk.UNAUTHENTICATED:return xy.UNAUTHENTICATED;case Sk.INVALID_ARGUMENT:return xy.INVALID_ARGUMENT;case Sk.NOT_FOUND:return xy.NOT_FOUND;case Sk.ALREADY_EXISTS:return xy.ALREADY_EXISTS;case Sk.PERMISSION_DENIED:return xy.PERMISSION_DENIED;case Sk.FAILED_PRECONDITION:return xy.FAILED_PRECONDITION;case Sk.ABORTED:return xy.ABORTED;case Sk.OUT_OF_RANGE:return xy.OUT_OF_RANGE;case Sk.UNIMPLEMENTED:return xy.UNIMPLEMENTED;case Sk.DATA_LOSS:return xy.DATA_LOSS;default:return ky()}}(Ek=Sk||(Sk={}))[Ek.OK=0]="OK",Ek[Ek.CANCELLED=1]="CANCELLED",Ek[Ek.UNKNOWN=2]="UNKNOWN",Ek[Ek.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ek[Ek.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ek[Ek.NOT_FOUND=5]="NOT_FOUND",Ek[Ek.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ek[Ek.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ek[Ek.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ek[Ek.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ek[Ek.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ek[Ek.ABORTED=10]="ABORTED",Ek[Ek.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ek[Ek.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ek[Ek.INTERNAL=13]="INTERNAL",Ek[Ek.UNAVAILABLE=14]="UNAVAILABLE",Ek[Ek.DATA_LOSS=15]="DATA_LOSS";var Dk=function(){function e(t,n){xn(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return In(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Sn(n);try{for(i.s();!(r=i.n()).done;){var a=At(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){gm(this.inner,(function(t,n){var r,i=Sn(n);try{for(i.s();!(r=i.n()).done;){var a=At(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return km(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Pk=new bm(Ky.comparator);function Rk(){return Pk}var Lk=new bm(Ky.comparator);function Mk(){for(var e=Lk,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Fk(e){var t=Lk;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Uk(){return jk()}function Vk(){return jk()}function jk(){return new Dk((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Bk=new bm(Ky.comparator),zk=new _m(Ky.comparator);function qk(){for(var e=zk,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Kk=new _m(Ly);function Gk(){return Kk}var Wk=function(){function e(t,n,r,i,a){xn(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return In(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Hk.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Vy.min(),r,Gk(),Rk(),qk())}}]),e}(),Hk=function(){function e(t,n,r,i,a){xn(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return In(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Tm.EMPTY_BYTE_STRING,n,qk(),qk(),qk())}}]),e}(),Qk=In((function e(t,n,r,i){xn(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),$k=In((function e(t,n){xn(this,e),this.targetId=t,this.It=n})),Jk=In((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tm.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;xn(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Yk=function(){function e(){xn(this,e),this.Tt=0,this.Et=eb(),this.At=Tm.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return In(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=qk(),t=qk(),n=qk();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ky()}})),new Hk(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=eb()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Mt",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),Xk=function(){function e(t){xn(this,e),this.Ot=t,this.Ft=new Map,this.$t=Rk(),this.Bt=Zk(),this.Lt=new _m(Ly)}return In(e,[{key:"Ut",value:function(e){var t,n=Sn(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=Sn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:ky()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(pg(i))if(0===n){var a=new Ky(i.path);this.Kt(t,a,cg.newNoDocument(a,Vy.min()))}else by(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&pg(a.target)){var o=new Ky(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,cg.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=qk();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new Wk(e,n,this.Lt,this.$t,r);return this.$t=Rk(),this.Bt=Zk(),this.Lt=new _m(Ly),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new Yk,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new _m(Ly),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||vy("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new Yk),this.Ot.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}]),e}();function Zk(){return new bm(Ky.comparator)}function eb(){return new bm(Ky.comparator)}var tb={asc:"ASCENDING",desc:"DESCENDING"},nb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rb=In((function e(t,n){xn(this,e),this.databaseId=t,this.dt=n}));function ib(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ab(e,t){return e.dt?t.toBase64():t.toUint8Array()}function ob(e,t){return ib(e,t.toTimestamp())}function ub(e){return by(!!e),Vy.fromTimestamp(function(e){var t=Nm(e);return new Uy(t.seconds,t.nanos)}(e))}function sb(e,t){return function(e){return new By(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function cb(e){var t=By.fromString(e);return by(Db(t)),t}function lb(e,t){return sb(e.databaseId,t.path)}function fb(e,t){var n=cb(t);if(n.get(1)!==e.databaseId.projectId)throw new _y(xy.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _y(xy.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ky(vb(n))}function hb(e,t){return sb(e.databaseId,t)}function db(e){var t=cb(e);return 4===t.length?By.emptyPath():vb(t)}function pb(e){return new By(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vb(e){return by(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function yb(e,t,n){return{name:lb(e,t),fields:n.value.mapValue.fields}}function mb(e,t,n){var r=fb(e,t.name),i=ub(t.updateTime),a=new ug({mapValue:{fields:t.fields}}),o=cg.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function gb(e,t){return"found"in t?function(e,t){by(!!t.found),t.found.name,t.found.updateTime;var n=fb(e,t.found.name),r=ub(t.found.updateTime),i=new ug({mapValue:{fields:t.found.fields}});return cg.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){by(!!t.missing),by(!!t.readTime);var n=fb(e,t.missing),r=ub(t.readTime);return cg.newNoDocument(n,r)}(e,t):ky()}function kb(e,t){var n;if(t instanceof bk)n={update:yb(e,t.key,t.value)};else if(t instanceof Tk)n={delete:lb(e,t.key)};else if(t instanceof wk)n={update:yb(e,t.key,t.data),updateMask:Ob(t.fieldMask)};else{if(!(t instanceof Ck))return ky();n={verify:lb(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof nk)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rk)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ak)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof uk)return{fieldPath:t.field.canonicalString(),increment:n._t};throw ky()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ob(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ky()}(e,t.precondition)),n}function bb(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?hk.updateTime(ub(e.updateTime)):void 0!==e.exists?hk.exists(e.exists):hk.none()}(t.currentDocument):hk.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)by("REQUEST_TIME"===t.setToServerValue),n=new nk;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new rk(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new ak(i)}else"increment"in t?n=new uk(e,t.increment):ky();var a=qy.fromServerFormat(t.fieldPath);return new lk(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=fb(e,t.update.name),a=new ug({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Em(t.map((function(e){return qy.fromServerFormat(e)})))}(t.updateMask);return new wk(i,a,o,n,r)}return new bk(i,a,n,r)}if(t.delete){var u=fb(e,t.delete);return new Tk(u,n)}if(t.verify){var s=fb(e,t.verify);return new Ck(s,n)}return ky()}function wb(e,t){return{documents:[hb(e,t.path)]}}function xb(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=hb(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=hb(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Zm(e.value))return{unaryFilter:{field:Tb(e.field),op:"IS_NAN"}};if(Xm(e.value))return{unaryFilter:{field:Tb(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zm(e.value))return{unaryFilter:{field:Tb(e.field),op:"IS_NOT_NAN"}};if(Xm(e.value))return{unaryFilter:{field:Tb(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tb(e.field),op:Eb(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Tb(e.field),direction:Sb(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||Fm(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function _b(e){var t=db(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){by(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Ib(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Cg(Cb(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Fm(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Tg(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Tg(n,t)}(n.endAt)),Pg(t,i,u,o,s,"F",c,l)}function Ib(e){return e?void 0!==e.unaryFilter?[Ab(e)]:void 0!==e.fieldFilter?[Nb(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Ib(e)})).reduce((function(e,t){return e.concat(t)})):ky():[]}function Sb(e){return tb[e]}function Eb(e){return nb[e]}function Tb(e){return{fieldPath:e.canonicalString()}}function Cb(e){return qy.fromServerFormat(e.fieldPath)}function Nb(e){return gg.create(Cb(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ky()}}(e.fieldFilter.op),e.fieldFilter.value)}function Ab(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Cb(e.unaryFilter.field);return gg.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Cb(e.unaryFilter.field);return gg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cb(e.unaryFilter.field);return gg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cb(e.unaryFilter.field);return gg.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ky()}}function Ob(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Db(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Pb(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Lb(t)),t=Rb(e.get(n),t);return Lb(t)}function Rb(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Lb(e){return e+"\x01\x01"}function Mb(e){var t=e.length;if(by(t>=2),2===t)return by("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),By.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ky(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ky()}a=o+2}return new By(r)}var Fb=["userId","batchId"];function Ub(e,t){return[e,Pb(t)]}function Vb(e,t,n){return[e,Pb(t),n]}var jb={},Bb=["prefixPath","collectionGroup","readTime","documentId"],zb=["prefixPath","collectionGroup","documentId"],qb=["collectionGroup","readTime","prefixPath","documentId"],Kb=["canonicalId","targetId"],Gb=["targetId","path"],Wb=["path","targetId"],Hb=["collectionId","parent"],Qb=["indexId","uid"],$b=["uid","sequenceNumber"],Jb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yb=["indexId","uid","orderedDocumentKey"],Xb=["userId","collectionPath","documentId"],Zb=["userId","collectionPath","largestBatchId"],ew=["userId","collectionGroup","largestBatchId"],tw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),nw=[].concat(lr(tw),["documentOverlays"]),rw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],iw=rw,aw=[].concat(iw,["indexConfiguration","indexState","indexEntries"]),ow=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return In(n)}(tm);function uw(e,t){var n=wy(e);return om.N(n.ee,t)}var sw=function(){function e(t,n,r,i){xn(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return In(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&yk(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Sn(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=mk(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Sn(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=mk(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Vk();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=vk(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Vy.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),qk())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&My(this.mutations,e.mutations,(function(e,t){return kk(e,t)}))&&My(this.baseMutations,e.baseMutations,(function(e,t){return kk(e,t)}))}}]),e}(),cw=function(){function e(t,n,r,i){xn(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return In(e,null,[{key:"from",value:function(t,n,r){by(t.mutations.length===r.length);for(var i=Bk,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),lw=function(){function e(t,n){xn(this,e),this.largestBatchId=t,this.mutation=n}return In(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),fw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vy.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Vy.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Tm.EMPTY_BYTE_STRING;xn(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return In(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),hw=In((function e(t){xn(this,e),this.ne=t}));function dw(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:pw(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:lb(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ib(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:vw(t.version)};else{if(!t.isUnknownDocument())return ky();r.unknownDocument={path:n.path.toArray(),version:vw(t.version)}}return r}function pw(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function vw(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function yw(e){var t=new Uy(e.seconds,e.nanoseconds);return Vy.fromTimestamp(t)}function mw(e,t){for(var n=(t.baseMutations||[]).map((function(t){return bb(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return bb(e.ne,t)})),u=Uy.fromMillis(t.localWriteTimeMs);return new sw(t.batchId,u,n,o)}function gw(e){var t,n,r=yw(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?yw(e.lastLimboFreeSnapshotVersion):Vy.min();return void 0!==e.query.documents?(by(1===(n=e.query).documents.length),t=jg(Rg(db(n.documents[0])))):t=function(e){return jg(_b(e))}(e.query),new fw(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Tm.fromBase64String(e.resumeToken))}function kw(e,t){var n,r=vw(t.snapshotVersion),i=vw(t.lastLimboFreeSnapshotVersion);n=pg(t.target)?wb(e.ne,t.target):xb(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:hg(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function bw(e){var t=_b({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Bg(t,t.limit,"L"):t}function ww(e,t){return new lw(t.largestBatchId,bb(e.ne,t.overlayMutation))}function xw(e,t){var n=t.path.lastSegment();return[e,Pb(t.path.popLast()),n]}function _w(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:vw(r.readTime),documentKey:Pb(r.documentKey.path),largestBatchId:r.largestBatchId}}var Iw=function(){function e(){xn(this,e)}return In(e,[{key:"getBundleMetadata",value:function(e,t){return Sw(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:yw(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Sw(e).put({bundleId:(n=t).id,createTime:vw(ub(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Ew(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:bw(t.bundledQuery),readTime:yw(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Ew(e).put(function(e){return{name:e.name,readTime:vw(ub(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Sw(e){return uw(e,"bundles")}function Ew(e){return uw(e,"namedQueries")}var Tw=function(){function e(t,n){xn(this,e),this.wt=t,this.userId=n}return In(e,[{key:"getOverlay",value:function(e,t){var n=this;return Cw(e).get(xw(this.userId,t)).next((function(e){return e?ww(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Uk();return im.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new lw(t,a);i.push(r.ie(e,o))})),im.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Pb(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Cw(e).W("collectionPathOverlayIndex",i))})),im.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Uk(),a=Pb(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Cw(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=Sn(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=ww(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Uk(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cw(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=ww(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return Cw(e).put(function(e,t,n){var r=At(xw(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:kb(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Cw(e){return uw(e,"documentOverlays")}var Nw=function(){function e(){xn(this,e)}return In(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Am(e.integerValue));else if("doubleValue"in e){var n=Am(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),Um(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Om(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?ng(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):ky()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=Sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),Ky.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function Aw(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ow(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Aw(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Nw.ye=new Nw;var Dw=function(){function e(){xn(this,e),this.buffer=new Uint8Array(1024),this.position=0}return In(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=Sn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=Sn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=Ow(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=Ow(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Me",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Pw=function(){function e(t){xn(this,e),this.Oe=t}return In(e,[{key:"de",value:function(e){this.Oe.pe(e)}},{key:"he",value:function(e){this.Oe.be(e)}},{key:"ae",value:function(e){this.Oe.ve(e)}},{key:"ue",value:function(){this.Oe.Ce()}}]),e}(),Rw=function(){function e(t){xn(this,e),this.Oe=t}return In(e,[{key:"de",value:function(e){this.Oe.Ee(e)}},{key:"he",value:function(e){this.Oe.Pe(e)}},{key:"ae",value:function(e){this.Oe.De(e)}},{key:"ue",value:function(){this.Oe.Ne()}}]),e}(),Lw=function(){function e(){xn(this,e),this.Oe=new Dw,this.Fe=new Pw(this.Oe),this.$e=new Rw(this.Oe)}return In(e,[{key:"seed",value:function(e){this.Oe.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Me",value:function(){return this.Oe.Me()}},{key:"reset",value:function(){this.Oe.reset()}}]),e}(),Mw=function(){function e(t,n,r,i){xn(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return In(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Fw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Uw(e.arrayValue,t.arrayValue))?n:0!==(n=Uw(e.directionalValue,t.directionalValue))?n:Ky.comparator(e.documentKey,t.documentKey)}function Uw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Vw=function(){function e(t){xn(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=Sn(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return In(e,[{key:"Ge",value:function(e){var t=Wy(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=Hy(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=Sn(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),jw=function(){function e(){xn(this,e),this.ze=new Bw}return In(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),im.resolve()}},{key:"getCollectionParents",value:function(e,t){return im.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return im.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return im.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return im.resolve(null)}},{key:"getIndexType",value:function(e,t){return im.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return im.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return im.resolve(null)}},{key:"getMinOffset",value:function(e,t){return im.resolve(Xy.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return im.resolve(Xy.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return im.resolve()}},{key:"updateIndexEntries",value:function(e,t){return im.resolve()}}]),e}(),Bw=function(){function e(){xn(this,e),this.index={}}return In(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new _m(By.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new _m(By.comparator)).toArray()}}]),e}(),zw=new Uint8Array(0),qw=function(){function e(t,n){xn(this,e),this.user=t,this.databaseId=n,this.He=new Bw,this.Je=new Dk((function(e){return hg(e)}),(function(e,t){return dg(e,t)})),this.uid=t.uid||""}return In(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:Pb(i)};return Kw(e).put(a)}return im.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Fy(t),""],!1,!0);return Kw(e).K(r).next((function(e){var r,i=Sn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Mb(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Ww(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Hw(e);return a.next((function(e){o.put(_w(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Ww(e),r=Hw(e),i=Gw(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Gw(e),i=!0,a=new Map;return im.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=qk(),o=[];return im.forEach(a,(function(i,a){var u;vy("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(hg(t)));var s=function(e,t){var n=Wy(t);if(void 0===n)return null;var r,i=Sn(vg(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Sn(Hy(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Sn(vg(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Sn(Hy(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?yg(e,o.fieldPath,e.startAt):mg(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Tg(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Sn(Hy(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?mg(e,o.fieldPath,e.endAt):yg(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Tg(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),p=n.tn(i,a,c),v=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return im.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=Ky.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return im.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):zw,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),p=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,lr(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new Mw(e,Ky.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new Mw(e,Ky.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new Vw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Sn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return im.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new _m(qy.comparator),r=!1,i=Sn(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=Sn(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new Lw,i=Sn(Hy(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);Nw.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Me()}},{key:"nn",value:function(e){var t=new Lw;return Nw.ye.re(e,t.Be(0)),t.Me()}},{key:"un",value:function(e,t){var n=new Lw;return Nw.ye.re($m(this.databaseId,t),n.Be(function(e){var t=Hy(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Me()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Lw);var i,a=0,o=Sn(Hy(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Sn(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&Ym(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);Nw.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Me();return t}},{key:"an",value:function(e,t,n){var r,i=lr(e),a=[],o=Sn(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Sn(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Lw;f.seed(l.Me()),Nw.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof gg&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Ww(e),i=Hw(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return im.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new $y(t.sequenceNumber,new Xy(yw(t.readTime),new Ky(Mb(t.documentKey)),t.largestBatchId)):$y.empty(),r=e.fields.map((function(e){var t=At(e,2),n=t[0],r=t[1];return new Qy(qy.fromServerFormat(n),r)}));return new Gy(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ly(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Ww(e),a=Hw(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return im.forEach(t,(function(t){return a.put(_w(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return im.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?im.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),im.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?im.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return Gw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return Gw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=Gw(e),i=new _m(Fw);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new Mw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new _m(Fw),r=this.on(t,e);if(null==r)return n;var i=Wy(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Ym(a)){var o,u=Sn(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Mw(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Mw(t.indexId,e.key,zw,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;vy("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Sm(a),s=Sm(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Sm(o)):l?(i(u),u=Sm(a)):(u=Sm(a),s=Sm(o))}}(r,i,Fw,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),im.waitFor(o)}},{key:"ln",value:function(e){var t=1;return Hw(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Fw(e,t)})).filter((function(e,t,n){return!t||0!==Fw(e,n[t-1])}));var r=[];r.push(e);var i,a=Sn(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Fw(o,e),s=Fw(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,zw,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,zw,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Qw)}},{key:"getMinOffset",value:function(e,t){var n=this;return im.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||ky()}))})).next(Qw)}}]),e}();function Kw(e){return uw(e,"collectionParents")}function Gw(e){return uw(e,"indexEntries")}function Ww(e){return uw(e,"indexConfiguration")}function Hw(e){return uw(e,"indexState")}function Qw(e){by(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Zy(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Xy(t.readTime,t.documentKey,n)}var $w={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jw=function(){function e(t,n,r){xn(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return In(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Yw(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){by(1===u)})));var c,l=[],f=Sn(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Vb(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return im.waitFor(a).next((function(){return l}))}function Xw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ky();t=e.noDocument}return JSON.stringify(t).length}Jw.DEFAULT_COLLECTION_PERCENTILE=10,Jw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jw.DEFAULT=new Jw(41943040,Jw.DEFAULT_COLLECTION_PERCENTILE,Jw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jw.DISABLED=new Jw(-1,0,0);var Zw=function(){function e(t,n,r,i){xn(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return In(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tx(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=nx(e),o=tx(e);return o.add({}).next((function(u){by("number"==typeof u);var s,c=new sw(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return kb(e.ne,t)})),i=n.mutations.map((function(t){return kb(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new _m((function(e,t){return Ly(e.canonicalString(),t.canonicalString())})),d=Sn(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Vb(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,jb))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),im.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return tx(e).get(t).next((function(e){return e?(by(e.userId===n.userId),mw(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?im.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return tx(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(by(t.batchId>=r),a=mw(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return tx(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tx(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return mw(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Ub(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return nx(e).J({range:i},(function(r,i,o){var u=At(r,3),s=u[0],c=u[1],l=u[2],f=Mb(c);if(s===n.userId&&t.path.isEqual(f))return tx(e).get(l).next((function(e){if(!e)throw ky();by(e.userId===n.userId),a.push(mw(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new _m(Ly),i=[];return t.forEach((function(t){var a=Ub(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=nx(e).J({range:o},(function(e,i,a){var o=At(e,3),u=o[0],s=o[1],c=o[2],l=Mb(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),im.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Ub(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new _m(Ly);return nx(e).J({range:o},(function(e,t,a){var o=At(e,3),s=o[0],c=o[1],l=o[2],f=Mb(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(tx(e).get(t).next((function(e){if(null===e)throw ky();by(e.userId===n.userId),r.push(mw(n.wt,e))})))})),im.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Yw(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),im.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return im.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return nx(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Mb(e[1]);i.push(a)}else r.done()})).next((function(){by(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return ex(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return rx(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return by(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function ex(e,t,n){var r=Ub(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return nx(e).J({range:a,H:!0},(function(e,n,r){var a=At(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function tx(e){return uw(e,"mutations")}function nx(e){return uw(e,"documentMutations")}function rx(e){return uw(e,"mutationQueues")}var ix=function(){function e(t){xn(this,e),this.En=t}return In(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),ax=function(){function e(t,n){xn(this,e),this.referenceDelegate=t,this.wt=n}return In(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new ix(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return Vy.fromTimestamp(new Uy(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ox(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return by(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ox(e).J((function(o,u){var s=gw(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return im.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return ox(e).J((function(e,n){var r=gw(n);t(r)}))}},{key:"bn",value:function(e){return ux(e).get("targetGlobalKey").next((function(e){return by(null!==e),e}))}},{key:"Pn",value:function(e,t){return ux(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return ox(e).put(kw(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=hg(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ox(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=gw(n);dg(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=sx(e);return t.forEach((function(t){var o=Pb(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),im.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=sx(e);return im.forEach(t,(function(t){var a=Pb(t.path);return im.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=sx(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=sx(e),i=qk();return r.J({range:n,H:!0},(function(e,t,n){var r=Mb(e[1]),a=new Ky(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Pb(t.path),r=IDBKeyRange.bound([n],[Fy(n)],!1,!0),i=0;return sx(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=At(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return ox(e).get(t).next((function(e){return e?gw(e):null}))}}]),e}();function ox(e){return uw(e,"targets")}function ux(e){return uw(e,"targetGlobal")}function sx(e){return uw(e,"targetDocuments")}function cx(e,t){var n=At(e,2),r=n[0],i=n[1],a=At(t,2),o=a[0],u=a[1],s=Ly(r,o);return 0===s?Ly(i,u):s}var lx=function(){function e(t){xn(this,e),this.Sn=t,this.buffer=new _m(cx),this.Dn=0}return In(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();cx(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),fx=function(){function e(t,n,r){xn(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return In(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;vy("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!cm(e.t0)){e.next=12;break}vy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,nm(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),hx=function(){function e(t,n){xn(this,e),this.Mn=t,this.params=n}return In(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.On(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return im.resolve(ym.ot);var r=new lx(t);return this.Mn.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.Mn.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(vy("LruGarbageCollector","Garbage collection skipped; disabled"),im.resolve($w)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(vy("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),$w):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(vy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),py()<=vr.DEBUG&&vy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),im.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),dx=function(){function e(t,n){xn(this,e),this.db=t,this.garbageCollector=function(e,t){return new hx(e,t)}(this,n)}return In(e,[{key:"On",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return px(e,n)}},{key:"removeReference",value:function(e,t,n){return px(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return px(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return rx(e).Y((function(r){return ex(e,r,t).next((function(e){return e&&(n=!0),im.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Vy.min()),sx(e).delete([0,Pb(o.path)])}))}));i.push(s)}})).next((function(){return im.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return px(e,t)}},{key:"Ln",value:function(e,t){var n,r=sx(e),i=ym.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=At(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==ym.ot&&t(new Ky(Mb(n)),i),i=s,n=u):i=ym.ot})).next((function(){i!==ym.ot&&t(new Ky(Mb(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function px(e,t){return sx(e).put(function(e,t){return{targetId:0,path:Pb(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var vx=function(){function e(){xn(this,e),this.changes=new Dk((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return In(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,cg.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?im.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),yx=function(){function e(t){xn(this,e),this.wt=t}return In(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return bx(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return bx(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],pw(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=cg.newInvalidDocument(t);return bx(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wx(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:cg.newInvalidDocument(t)};return bx(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wx(t))},(function(e,i){r={document:n.Kn(t,i),size:Xw(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Rk();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=Rk(),i=new bm(Ky.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,Xw(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return im.resolve();var r=new _m(_x);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(wx(r.first()),wx(r.last())),a=r.getIterator(),o=a.getNext();return bx(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Ky.fromSegments([].concat(lr(t.prefixPath),[t.collectionGroup,t.documentId]));o&&_x(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(wx(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),pw(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bx(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Rk(),i=Sn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(Ky.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Rk(),o=xx(t,n),u=xx(t,Xy.max());return bx(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(Ky.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new gx(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return kx(e).get("remoteDocumentGlobalKey").next((function(e){return by(!!e),e}))}},{key:"qn",value:function(e,t){return kx(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=mb(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Ky.fromSegments(t.noDocument.path),i=yw(t.noDocument.readTime);n=cg.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ky();var a=Ky.fromSegments(t.unknownDocument.path),o=yw(t.unknownDocument.version);n=cg.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Uy(e[0],e[1]);return Vy.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(Vy.min()))return n}return cg.newInvalidDocument(e)}}]),e}();function mx(e){return new yx(e)}var gx=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new Dk((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return In(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new _m((function(e,t){return Ly(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=dw(t.zn.wt,o);i=i.add(a.path.popLast());var c=Xw(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=dw(t.zn.wt,o.convertToNoDocument(Vy.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),im.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(vx);function kx(e){return uw(e,"remoteDocumentGlobal")}function bx(e){return uw(e,"remoteDocumentsV14")}function wx(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function xx(e,t){var n=t.documentKey.path.toArray();return[e,pw(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function _x(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ly(n[a],r[a]))return i;return(i=Ly(n.length,r.length))||((i=Ly(n[n.length-2],r[r.length-2]))||Ly(n[n.length-1],r[r.length-1]))}var Ix=In((function e(t,n){xn(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Sx=function(){function e(t,n,r,i){xn(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return In(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&mk(r.mutation,e,Em.empty(),Uy.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,qk()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qk(),i=Uk();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Mk();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Uk();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,qk())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Rk(),a=jk(),o=jk();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof wk)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),mk(o.mutation,t,o.mutation.getFieldMask(),Uy.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Ix(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=jk(),i=new bm((function(e,t){return e-t})),a=qk();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Sn(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Em.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||qk()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Vk();c.forEach((function(e){if(!a.has(e)){var n=vk(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return im.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Ky.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ug(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):im.resolve(Uk()),u=-1,s=a;return o.next((function(t){return im.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?im.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,qk())})).next((function(e){return{batchId:u,changes:Fk(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Ky(t)).next((function(e){var t=Mk();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Mk();return this.indexManager.getCollectionParents(e,i).next((function(o){return im.forEach(o,(function(o){var u=function(e,t){return new Dg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,cg.newInvalidDocument(n)))}));var n=Mk();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&mk(a.mutation,i,Em.empty(),Uy.now()),Gg(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):im.resolve(cg.newInvalidDocument(t))}}]),e}(),Ex=function(){function e(t){xn(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return In(e,[{key:"getBundleMetadata",value:function(e,t){return im.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:ub(n.createTime)}),im.resolve()}},{key:"getNamedQuery",value:function(e,t){return im.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:bw(e.bundledQuery),readTime:ub(e.readTime)}}(t)),im.resolve()}}]),e}(),Tx=function(){function e(){xn(this,e),this.overlays=new bm(Ky.comparator),this.Xn=new Map}return In(e,[{key:"getOverlay",value:function(e,t){return im.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Uk();return im.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),im.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),im.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Uk(),i=t.length+1,a=new Ky(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return im.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new bm((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Uk(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Uk(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return im.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new lw(t,n));var a=this.Xn.get(t);void 0===a&&(a=qk(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),Cx=function(){function e(){xn(this,e),this.Zn=new _m(Nx.ts),this.es=new _m(Nx.ns)}return In(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Nx(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new Nx(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Ky(new By([])),r=new Nx(n,e),i=new Nx(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Ky(new By([])),n=new Nx(t,e),r=new Nx(t,e+1),i=qk();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Nx(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Nx=function(){function e(t,n){xn(this,e),this.key=t,this.ls=n}return In(e,null,[{key:"ts",value:function(e,t){return Ky.comparator(e.key,t.key)||Ly(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Ly(e.ls,t.ls)||Ky.comparator(e.key,t.key)}}]),e}(),Ax=function(){function e(t,n){xn(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new _m(Nx.ts)}return In(e,[{key:"checkEmpty",value:function(e){return im.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new sw(i,t,n,r);this.mutationQueue.push(a);var o,u=Sn(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new Nx(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return im.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return im.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return im.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return im.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return im.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Nx(t,0),i=new Nx(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),im.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new _m(Ly);return t.forEach((function(e){var t=new Nx(e,0),i=new Nx(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),im.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Ky.isDocumentKey(i)||(i=i.child(""));var a=new Nx(new Ky(i),0),o=new _m(Ly);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),im.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;by(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return im.forEach(t.mutations,(function(i){var a=new Nx(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Nx(t,0),r=this.ds.firstAfterOrEqual(n);return im.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,im.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Ox=function(){function e(t){xn(this,e),this.ps=t,this.docs=new bm(Ky.comparator),this.size=0}return In(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return im.resolve(n?n.document.mutableCopy():cg.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Rk();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():cg.newInvalidDocument(e))})),im.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Rk(),i=new Ky(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Zy(Yy(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return im.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ky()}},{key:"Is",value:function(e,t){return im.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Dx(this)}},{key:"getSize",value:function(e){return im.resolve(this.size)}}]),e}(),Dx=function(e){Cn(n,e);var t=Dn(n);function n(e){var r;return xn(this,n),(r=t.call(this)).zn=e,r}return In(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),im.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(vx),Px=function(){function e(t){xn(this,e),this.persistence=t,this.Ts=new Dk((function(e){return hg(e)}),dg),this.lastRemoteSnapshotVersion=Vy.min(),this.highestTargetId=0,this.Es=0,this.As=new Cx,this.targetCount=0,this.Rs=ix.An()}return In(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),im.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return im.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return im.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),im.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),im.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new ix(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,im.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),im.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,im.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),im.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return im.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return im.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),im.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),im.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),im.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return im.resolve(n)}},{key:"containsKey",value:function(e,t){return im.resolve(this.As.containsKey(t))}}]),e}(),Rx=function(){function e(t,n){var r=this;xn(this,e),this.bs={},this.overlays={},this.Ps=new ym(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Px(this),this.indexManager=new jw,this.remoteDocumentCache=new Ox((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new hw(n),this.Ds=new Ex(this.wt)}return In(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Tx,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new Ax(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;vy("MemoryPersistence","Starting transaction:",e);var i=new Lx(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return im.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Lx=function(e){Cn(n,e);var t=Dn(n);function n(e){var r;return xn(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return In(n)}(tm),Mx=function(){function e(t){xn(this,e),this.persistence=t,this.ks=new Cx,this.Ms=null}return In(e,[{key:"Fs",get:function(){if(this.Ms)return this.Ms;throw ky()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),im.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),im.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),im.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Ms=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return im.forEach(this.Fs,(function(r){var i=Ky.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Vy.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return im.or([function(){return im.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Os",value:function(t){return new e(t)}}]),e}(),Fx=function(){function e(t){xn(this,e),this.wt=t}return In(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new am("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fb,{unique:!0}),e.createObjectStore("documentMutations")}(e),Ux(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=im.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Ux(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vy.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fb,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return im.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Xb});t.createIndex("collectionPathOverlayIndex",Zb,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ew,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Bb});t.createIndex("documentKeyIndex",zb),t.createIndex("collectionGroupIndex",qb)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Qb}).createIndex("sequenceNumberIndex",$b,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Jb}).createIndex("documentKeyIndex",Yb,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=Xw(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return im.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return im.forEach(r,(function(r){by(r.userId===n.userId);var i=mw(t.wt,r);return Yw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new By(n),o=function(e){return[0,Pb(e)]}(a);r.push(t.get(o).next((function(n){return n?im.resolve():function(n){return t.put({targetId:0,path:Pb(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return im.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Hb});var n=t.store("collectionParents"),r=new Bw,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Pb(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new By(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=At(e,3),r=(n[0],n[1]),a=(n[2],Mb(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=gw(r),a=kw(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Ky(By.fromString(i.document.name).popFirst(5)):i.noDocument?Ky.fromSegments(i.noDocument.path):i.unknownDocument?Ky.fromSegments(i.unknownDocument.path):ky()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return im.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=mx(this.wt),a=new Rx(Mx.Os,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:qk();mw(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),im.forEach(r,(function(e,r){var o=new fy(r),u=Tw.se(n.wt,o),s=a.getIndexManager(o),c=Zw.se(o,n.wt,s,a.referenceDelegate);return new Sx(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new ow(t,ym.ot),e).next()}))}))}}]),e}();function Ux(e){e.createObjectStore("targetDocuments",{keyPath:Gb}).createIndex("documentTargetsIndex",Wb,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Kb,{unique:!0}),e.createObjectStore("targetGlobal")}var Vx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jx=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(xn(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new _y(xy.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dx(this,i),this.ei=n+"main",this.wt=new hw(s),this.ni=new om(this.ei,this.Hs,new Fx(this.wt)),this.Vs=new ax(this.referenceDelegate,this.wt),this.remoteDocumentCache=mx(this.wt),this.Ds=new Iw,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&yy("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return In(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new _y(xy.FAILED_PRECONDITION,Vx);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new ym(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=mt(vt().mark((function n(r){return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=mt(vt().mark((function t(n){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return zx(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(cm(t))return vy("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return vy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return Bx(e).get("owner").next((function(e){return im.resolve(t.di(e))}))}},{key:"_i",value:function(e){return zx(e).delete(this.clientId)}},{key:"wi",value:function(){var e=mt(vt().mark((function e(){var t,n,r,i,a=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=uw(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return im.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=Sn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?im.resolve(!0):Bx(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new _y(xy.FAILED_PRECONDITION,Vx);return!1}}return!(!t.networkEnabled||!t.inForeground)||zx(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&vy("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=mt(vt().mark((function e(){var t=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new ow(e,ym.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return zx(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return Zw.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new qw(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Tw.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;vy("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?aw:14===i?iw:13===i?rw:12===i?nw:11===i?tw:void ky();return this.ni.runTransaction(e,o,u,(function(i){return a=new ow(i,r.Ps?r.Ps.next():ym.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw yy("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new _y(xy.FAILED_PRECONDITION,em);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return Bx(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new _y(xy.FAILED_PRECONDITION,Vx)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bx(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=Bx(e);return n.get("owner").next((function(e){return t.di(e)?(vy("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):im.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(yy("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!Kn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return vy("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return yy("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(T){yy("Failed to set zombie client id.",T)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(T){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return om.V()}}]),e}();function Bx(e){return uw(e,"owner")}function zx(e){return uw(e,"clientMetadata")}function qx(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Kx=function(){function e(t,n,r,i){xn(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return In(e,null,[{key:"Vi",value:function(t,n){var r,i=qk(),a=qk(),o=Sn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Gx=function(){function e(){xn(this,e),this.Si=!1}return In(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){var n=this;if(Lg(t))return im.resolve(null);var r=jg(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Bg(t,null,"F"),r=jg(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=qk.apply(void 0,lr(i));return n.Di.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ki(t,i);return n.Mi(t,o,a,r.readTime)?n.Ci(e,Bg(t,null,"F")):n.Oi(e,o,t,r)}))}))})))}))}},{key:"xi",value:function(e,t,n,r){var i=this;return Lg(t)||r.isEqual(Vy.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Mi(t,o,n,r)?i.Ni(e,t):(py()<=vr.DEBUG&&vy("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kg(t)),i.Oi(e,o,t,Jy(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new _m(Hg(e));return t.forEach((function(t,r){Gg(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return py()<=vr.DEBUG&&vy("QueryEngine","Using full collection scan to execute query:",Kg(t)),this.Di.getDocumentsMatchingQuery(e,t,Xy.min())}},{key:"Oi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Wx=function(){function e(t,n,r,i){xn(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new bm(Ly),this.Bi=new Dk((function(e){return hg(e)}),dg),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return In(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sx(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function Hx(e,t,n,r){return new Wx(e,t,n,r)}function Qx(e,t){return $x.apply(this,arguments)}function $x(){return $x=mt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=qk(),s=Sn(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Sn(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Sn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Sn(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),$x.apply(this,arguments)}function Jx(e,t){var n=wy(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=im.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);by(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=qk(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Yx(e){var t=wy(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function Xx(e,t){var n=wy(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Tm.EMPTY_BYTE_STRING,Vy.min()).withLastLimboFreeSnapshotVersion(Vy.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=Rk(),s=qk();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Zx(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(Vy.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return im.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function Zx(e,t,n){var r=qk(),i=qk();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Rk();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Vy.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):vy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function e_(e,t){var n=wy(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function t_(e,t){var n=wy(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,im.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new fw(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function n_(e,t,n){return r_.apply(this,arguments)}function r_(){return r_=mt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wy(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),cm(e.t1)){e.next=12;break}throw e.t1;case 12:vy("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),r_.apply(this,arguments)}function i_(e,t,n){var r=wy(e),i=Vy.min(),a=qk();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=wy(e),i=r.Bi.get(n);return void 0!==i?im.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,jg(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Vy.min(),n?a:qk())})).next((function(e){return u_(r,Wg(t),e),{documents:e,ji:a}}))}))}function a_(e,t){var n=wy(e),r=wy(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function o_(e,t){var n=wy(e),r=n.Li.get(t)||Vy.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,Jy(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return u_(n,t,e),e}))}function u_(e,t,n){var r=Vy.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function s_(e,t,n,r){return c_.apply(this,arguments)}function c_(){return c_=mt(vt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=wy(t),o=qk(),u=Rk(),s=Sn(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,t_(a,function(e){return jg(Rg(By.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Zx(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),c_.apply(this,arguments)}function l_(e,t){return f_.apply(this,arguments)}function f_(){return f_=mt(vt().mark((function e(t,n){var r,i,a,o=arguments;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:qk(),e.next=3,t_(t,jg(bw(n.bundledQuery)));case 3:return i=e.sent,a=wy(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ub(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(Tm.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),f_.apply(this,arguments)}function h_(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function d_(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function p_(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var v_=function(){function e(t,n,r,i){xn(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return In(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new _y(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(yy("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),y_=function(){function e(t,n,r){xn(this,e),this.targetId=t,this.state=n,this.error=r}return In(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new _y(i.error.code,i.error.message))),a?new e(t,i.state,r):(yy("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),m_=function(){function e(t,n){xn(this,e),this.clientId=t,this.activeTargetIds=n}return In(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Gk(),o=0;i&&o<r.activeTargetIds.length;++o)i=Vm(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(yy("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),g_=function(){function e(t,n){xn(this,e),this.clientId=t,this.onlineState=n}return In(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(yy("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),k_=function(){function e(){xn(this,e),this.activeTargetIds=Gk()}return In(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),b_=function(){function e(t,n,r,i,a){xn(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new bm(Ly),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=h_(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new k_),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return In(e,[{key:"start",value:function(){var e=mt(vt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=Sn(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(h_(this.persistenceKey,i)))&&(o=m_.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=Sn(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(p_(this.persistenceKey,e));if(n){var r=y_.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(p_(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return vy("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){vy("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){vy("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(vy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void yy("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(mt(vt().mark((function e(){var r,i,a,o,u,s,c;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=ym.ot;if(null!=e)try{var n=JSON.parse(e);by("number"==typeof n),t=n}catch(e){yy("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==ym.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new v_(this.currentUser,e,t,n),i=d_(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=d_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=p_(this.persistenceKey,e),i=new y_(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return m_.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return v_.Ji(new fy(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return y_.Ji(r,t)}},{key:"wr",value:function(e){return g_.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:vy("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=Gk();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),w_=function(){function e(){xn(this,e),this.Fr=new k_,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return In(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new k_,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),x_=function(){function e(){xn(this,e)}return In(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),__=function(){function e(){var t=this;xn(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return In(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){vy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Sn(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){vy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Sn(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),I_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},S_=function(){function e(t){xn(this,e),this.jr=t.jr,this.Wr=t.Wr}return In(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),E_=function(e){Cn(n,e);var t=Dn(n);function n(e){var r;return xn(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return In(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new cy;o.listenOnce(iy.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case ry.NO_ERROR:var t=o.getResponseJson();vy("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ry.TIMEOUT:vy("Connection",'RPC "'+e+'" timed out'),a(new _y(xy.DEADLINE_EXCEEDED,"Request time out"));break;case ry.HTTP_ERROR:var n=o.getStatus();if(vy("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(xy).indexOf(t)>=0?t:xy.UNKNOWN}(r.status);a(new _y(u,r.message))}else a(new _y(xy.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new _y(xy.UNAVAILABLE,"Connection failed."));break;default:ky()}}finally{vy("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ty(),a=ny(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new uy({})),this.uo(o.initMessageHeaders,t,n),qn()||Wn()||zn().indexOf("Electron/")>=0||Hn()||zn().indexOf("MSAppHost/")>=0||Gn()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");vy("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new S_({jr:function(e){l?vy("Connection","Not sending because WebChannel is closed:",e):(c||(vy("Connection","Opening WebChannel transport."),s.open(),c=!0),vy("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,sy.EventType.OPEN,(function(){l||vy("Connection","WebChannel transport opened.")})),h(s,sy.EventType.CLOSE,(function(){l||(l=!0,vy("Connection","WebChannel transport closed"),f.eo())})),h(s,sy.EventType.ERROR,(function(e){l||(l=!0,my("Connection","WebChannel transport errored:",e),f.eo(new _y(xy.UNAVAILABLE,"The operation could not be completed")))})),h(s,sy.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];by(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){vy("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Sk[e];if(void 0!==t)return Ok(t)}(a),u=i.message;void 0===o&&(o=xy.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new _y(o,u)),s.close()}else vy("Connection","WebChannel received:",n),f.no(n)}})),h(a,ay.STAT_EVENT,(function(e){e.stat===oy.PROXY?vy("Connection","Detected buffering proxy"):e.stat===oy.NOPROXY&&vy("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){xn(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return In(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);vy("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return vy("RestConnection","Received: ",e),e}),(function(t){throw my("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+hy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=I_[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function T_(){return"undefined"!=typeof window?window:null}function C_(){return"undefined"!=typeof document?document:null}function N_(e){return new rb(e,!0)}var A_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;xn(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return In(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&vy("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),O_=function(){function e(t,n,r,i,a,o,u,s){xn(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new A_(t,n)}return In(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===xy.RESOURCE_EXHAUSTED?(yy(n.toString()),yy("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===xy.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=At(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new _y(xy.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(mt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return vy("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(vy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),D_=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i,a,o,u){var s;return xn(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return In(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ky()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(by(void 0===t||"string"==typeof t),Tm.fromBase64String(t||"")):(by(void 0===t||t instanceof Uint8Array),Tm.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?xy.UNKNOWN:Ok(e.code);return new _y(t,e.message||"")}(o);n=new Jk(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=fb(e,s.document.name),l=ub(s.document.updateTime),f=new ug({mapValue:{fields:s.document.fields}}),h=cg.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Qk(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=fb(e,v.document),m=v.readTime?ub(v.readTime):Vy.min(),g=cg.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Qk([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=fb(e,b.document),x=b.removedTargetIds||[];n=new Qk([],x,w,null)}else{if(!("filter"in t))return ky();t.filter;var _=t.filter;_.targetId;var I=_.count||0,S=new Nk(I),E=_.targetId;n=new $k(E,S)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Vy.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Vy.min():t.readTime?ub(t.readTime):Vy.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=pb(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=pg(r)?{documents:wb(e,r)}:{query:xb(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=ab(e,t.resumeToken):t.snapshotVersion.compareTo(Vy.min())>0&&(n.readTime=ib(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ky()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=pb(this.wt),t.removeTarget=e,this.Oo(t)}}]),n}(O_),P_=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i,a,o,u){var s;return xn(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return In(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Mi(Nn(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(by(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(by(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ub(e.updateTime):ub(t);return n.isEqual(Vy.min())&&(n=ub(t)),new fk(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ub(e.commitTime);return this.listener.Jo(n,t)}return by(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=pb(this.wt),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return kb(t.wt,e)}))};this.Oo(n)}}]),n}(O_),R_=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i,a){var o;return xn(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return In(n,[{key:"tu",value:function(){if(this.Zo)throw new _y(xy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=At(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===xy.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new _y(xy.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=At(a,2),u=o[0],s=o[1];return i.bo.ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===xy.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new _y(xy.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return In((function e(){xn(this,e)}))}()),L_=function(){function e(t,n){xn(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return In(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(yy(t),this.su=!1):vy("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),M_=In((function e(t,n,r,i,a){var o=this;xn(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=H_(o),!e.t0){e.next=5;break}return vy("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wy(t)).lu.add(4),e.next=4,V_(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,F_(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new L_(r,i)}));function F_(e){return U_.apply(this,arguments)}function U_(){return U_=mt(vt().mark((function e(t){var n,r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H_(t)){e.next=18;break}n=Sn(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),U_.apply(this,arguments)}function V_(e){return j_.apply(this,arguments)}function j_(){return j_=mt(vt().mark((function e(t){var n,r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Sn(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),j_.apply(this,arguments)}function B_(e,t){var n=wy(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),W_(n)?G_(n):xI(n).Co()&&q_(n,t))}function z_(e,t){var n=wy(e),r=xI(n);n.hu.delete(t),r.Co()&&K_(n,t),0===n.hu.size&&(r.Co()?r.ko():H_(n)&&n._u.set("Unknown"))}function q_(e,t){e.wu.Nt(t.targetId),xI(e).Qo(t)}function K_(e,t){e.wu.Nt(t),xI(e).jo(t)}function G_(e){e.wu=new Xk({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),xI(e).start(),e._u.iu()}function W_(e){return H_(e)&&!xI(e).Do()&&e.hu.size>0}function H_(e){return 0===wy(e).lu.size}function Q_(e){e.wu=void 0}function $_(e){return J_.apply(this,arguments)}function J_(){return J_=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){q_(t,e)}));case 1:case"end":return e.stop()}}),e)}))),J_.apply(this,arguments)}function Y_(e,t){return X_.apply(this,arguments)}function X_(){return X_=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q_(t),W_(t)?(t._u.uu(n),G_(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),X_.apply(this,arguments)}function Z_(e,t,n){return eI.apply(this,arguments)}function eI(){return eI=mt(vt().mark((function e(t,n,r){var i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Jk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=mt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Sn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),vy("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,tI(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Qk?t.wu.Ut(n):n instanceof $k?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Vy.min())){e.next=29;break}return e.prev=14,e.next=17,Yx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Tm.EMPTY_BYTE_STRING,n.snapshotVersion)),K_(e,t);var r=new fw(n.target,t,1,n.sequenceNumber);q_(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),vy("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,tI(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),eI.apply(this,arguments)}function tI(e,t,n){return nI.apply(this,arguments)}function nI(){return nI=mt(vt().mark((function e(t,n,r){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cm(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,V_(t);case 5:t._u.set("Offline"),r||(r=function(){return Yx(t.localStore)}),t.asyncQueue.enqueueRetryable(mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vy("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,F_(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),nI.apply(this,arguments)}function rI(e,t){return t().catch((function(n){return tI(e,n,t)}))}function iI(e){return aI.apply(this,arguments)}function aI(){return aI=mt(vt().mark((function e(t){var n,r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=wy(t),r=_I(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!oI(n)){e.next=19;break}return e.prev=3,e.next=6,e_(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,uI(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,tI(n,e.t0);case 17:e.next=2;break;case 19:sI(n)&&cI(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),aI.apply(this,arguments)}function oI(e){return H_(e)&&e.au.length<10}function uI(e,t){e.au.push(t);var n=_I(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function sI(e){return H_(e)&&!_I(e).Do()&&e.au.length>0}function cI(e){_I(e).start()}function lI(e){return fI.apply(this,arguments)}function fI(){return fI=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_I(t).Xo();case 1:case"end":return e.stop()}}),e)}))),fI.apply(this,arguments)}function hI(e){return dI.apply(this,arguments)}function dI(){return dI=mt(vt().mark((function e(t){var n,r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_I(t),r=Sn(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),dI.apply(this,arguments)}function pI(e,t,n){return vI.apply(this,arguments)}function vI(){return vI=mt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=cw.from(i,n,r),e.next=3,rI(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,iI(t);case 5:case"end":return e.stop()}}),e)}))),vI.apply(this,arguments)}function yI(e,t){return mI.apply(this,arguments)}function mI(){return mI=mt(vt().mark((function e(t,n){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&_I(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=mt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ak(i=n.code)||i===xy.ABORTED){e.next=7;break}return r=t.au.shift(),_I(t).No(),e.next=5,rI(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,iI(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:sI(t)&&cI(t);case 5:case"end":return e.stop()}}),e)}))),mI.apply(this,arguments)}function gI(e,t){return kI.apply(this,arguments)}function kI(){return kI=mt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=wy(t)).asyncQueue.verifyOperationInProgress(),vy("RemoteStore","RemoteStore received new credentials"),i=H_(r),r.lu.add(3),e.next=6,V_(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,F_(r);case 12:case"end":return e.stop()}}),e)}))),kI.apply(this,arguments)}function bI(e,t){return wI.apply(this,arguments)}function wI(){return wI=mt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wy(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,F_(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,V_(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),wI.apply(this,arguments)}function xI(e){return e.mu||(e.mu=function(e,t,n){var r=wy(e);return r.tu(),new D_(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:$_.bind(null,e),Jr:Y_.bind(null,e),Go:Z_.bind(null,e)}),e.fu.push(function(){var t=mt(vt().mark((function t(n){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),W_(e)?G_(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:Q_(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function _I(e){return e.gu||(e.gu=function(e,t,n){var r=wy(e);return r.tu(),new P_(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:lI.bind(null,e),Jr:yI.bind(null,e),Yo:hI.bind(null,e),Jo:pI.bind(null,e)}),e.fu.push(function(){var t=mt(vt().mark((function t(n){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,iI(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(vy("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var II=function(){function e(t,n,r,i,a){xn(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Iy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return In(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _y(xy.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function SI(e,t){if(yy("AsyncQueue","".concat(t,": ").concat(e)),cm(e))return new _y(xy.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var EI=function(){function e(t){xn(this,e),this.comparator=t?function(e,n){return t(e,n)||Ky.comparator(e.key,n.key)}:function(e,t){return Ky.comparator(e.key,t.key)},this.keyedMap=Mk(),this.sortedSet=new bm(this.comparator)}return In(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),TI=function(){function e(){xn(this,e),this.yu=new bm(Ky.comparator)}return In(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ky():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),CI=function(){function e(t,n,r,i,a,o,u,s){xn(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return In(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,EI.emptySet(n),a,r,i,!0,!1)}}]),e}(),NI=In((function e(){xn(this,e),this.Iu=void 0,this.listeners=[]})),AI=In((function e(){xn(this,e),this.queries=new Dk((function(e){return qg(e)}),zg),this.onlineState="Unknown",this.Tu=new Set}));function OI(e,t){return DI.apply(this,arguments)}function DI(){return DI=mt(vt().mark((function e(t,n){var r,i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wy(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new NI),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=SI(e.t0,"Initialization of query '".concat(Kg(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&FI(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),DI.apply(this,arguments)}function PI(e,t){return RI.apply(this,arguments)}function RI(){return RI=mt(vt().mark((function e(t,n){var r,i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wy(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),RI.apply(this,arguments)}function LI(e,t){var n,r=wy(e),i=!1,a=Sn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Sn(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&FI(r)}function MI(e,t,n){var r=wy(e),i=r.queries.get(t);if(i){var a,o=Sn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function FI(e){e.Tu.forEach((function(e){e.next()}))}var UI=function(){function e(t,n,r){xn(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return In(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Sn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new CI(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=CI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),VI=function(){function e(t,n){xn(this,e),this.payload=t,this.byteLength=n}return In(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),jI=function(){function e(t){xn(this,e),this.wt=t}return In(e,[{key:"Wi",value:function(e){return fb(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?mb(this.wt,e.document,!1):cg.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return ub(e)}}]),e}(),BI=function(){function e(t,n,r){xn(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zI(t)}return In(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=By.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new jI(this.wt),i=Sn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=Sn(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||qk()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=mt(vt().mark((function e(){var t,n,r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s_(this.localStore,new jI(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=Sn(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,l_(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function zI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var qI=In((function e(t){xn(this,e),this.key=t})),KI=In((function e(t){xn(this,e),this.key=t})),GI=function(){function e(t,n){xn(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=qk(),this.mutatedKeys=qk(),this.Lu=Hg(t),this.Uu=new EI(this.Lu)}return In(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new TI,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Gg(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Mi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ky()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new CI(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new TI,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=qk(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new KI(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new qI(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=qk();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return CI.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),WI=In((function e(t,n,r){xn(this,e),this.query=t,this.targetId=n,this.view=r})),HI=In((function e(t){xn(this,e),this.key=t,this.Xu=!1})),QI=function(){function e(t,n,r,i,a,o){xn(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Dk((function(e){return qg(e)}),zg),this.ec=new Map,this.nc=new Set,this.sc=new bm(Ky.comparator),this.ic=new Map,this.rc=new Cx,this.oc={},this.uc=new Map,this.cc=ix.Rn(),this.onlineState="Unknown",this.ac=void 0}return In(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function $I(e,t){return JI.apply(this,arguments)}function JI(){return JI=mt(vt().mark((function e(t,n){var r,i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=zS(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,t_(r.localStore,jg(n));case 8:return u=e.sent,r.isPrimaryClient&&B_(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,YI(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),JI.apply(this,arguments)}function YI(e,t,n,r){return XI.apply(this,arguments)}function XI(){return XI=mt(vt().mark((function e(t,n,r,i){var a,o,u,s,c,l;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=mt(vt().mark((function e(t,n,r,i){var a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,i_(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(gS(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,i_(t.localStore,n,!0);case 3:return a=e.sent,o=new GI(n,a.ji),u=o.Ku(a.documents),s=Hk.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),gS(t,r,c.zu),l=new WI(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),XI.apply(this,arguments)}function ZI(e,t){return eS.apply(this,arguments)}function eS(){return eS=mt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wy(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!zg(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,n_(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),z_(r.remoteStore,i.targetId),yS(r,i.targetId)})).catch(nm);case 9:e.next=14;break;case 11:return yS(r,i.targetId),e.next=14,n_(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),eS.apply(this,arguments)}function tS(e,t,n){return nS.apply(this,arguments)}function nS(){return nS=mt(vt().mark((function e(t,n,r){var i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qS(t),e.prev=1,e.next=4,function(e,t){var n,r,i=wy(e),a=Uy.now(),o=t.reduce((function(e,t){return e.add(t.key)}),qk());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Rk(),s=qk();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Sn(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=gk(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new wk(c.key,l,sg(l.value.mapValue),hk.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Fk(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new bm(Ly)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,wS(i,a.changes);case 9:return e.next=11,iI(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=SI(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),nS.apply(this,arguments)}function rS(e,t){return iS.apply(this,arguments)}function iS(){return iS=mt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),e.prev=1,e.next=4,Xx(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(by(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?by(n.Xu):e.removedDocuments.size>0&&(by(n.Xu),n.Xu=!1))})),e.next=8,wS(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,nm(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),iS.apply(this,arguments)}function aS(e,t,n){var r=wy(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=wy(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Sn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&FI(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function oS(e,t,n){return uS.apply(this,arguments)}function uS(){return uS=mt(vt().mark((function e(t,n,r){var i,a,o,u,s,c;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=wy(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new bm(Ky.comparator)).insert(o,cg.newNoDocument(o,Vy.min())),s=qk().add(o),c=new Wk(Vy.min(),new Map,new _m(Ly),u,s),e.next=9,rS(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),bS(i),e.next=16;break;case 14:return e.next=16,n_(i.localStore,n,!1).then((function(){return yS(i,n,r)})).catch(nm);case 16:case"end":return e.stop()}}),e)}))),uS.apply(this,arguments)}function sS(e,t){return cS.apply(this,arguments)}function cS(){return cS=mt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),i=n.batch.batchId,e.prev=1,e.next=4,Jx(r.localStore,n);case 4:return a=e.sent,vS(r,i,null),pS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,wS(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,nm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),cS.apply(this,arguments)}function lS(e,t,n){return fS.apply(this,arguments)}function fS(){return fS=mt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wy(t),e.prev=1,e.next=4,function(e,t){var n=wy(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return by(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,vS(i,n,r),pS(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,wS(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,nm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),fS.apply(this,arguments)}function hS(e,t){return dS.apply(this,arguments)}function dS(){return dS=mt(vt().mark((function e(t,n){var r,i,a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H_((r=wy(t)).remoteStore)||vy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=wy(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=SI(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),dS.apply(this,arguments)}function pS(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function vS(e,t,n){var r=wy(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function yS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Sn(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||mS(e,t)}))}function mS(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(z_(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),bS(e))}function gS(e,t,n){var r,i=Sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof qI?(e.rc.addReference(a.key,t),kS(e,a)):a instanceof KI?(vy("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||mS(e,a.key)):ky()}}catch(o){i.e(o)}finally{i.f()}}function kS(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(vy("SyncEngine","New document in limbo: "+n),e.nc.add(r),bS(e))}function bS(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new Ky(By.fromString(t)),r=e.cc.next();e.ic.set(r,new HI(n)),e.sc=e.sc.insert(n,r),B_(e.remoteStore,new fw(jg(Rg(n.path)),r,2,ym.ot))}}function wS(e,t,n){return xS.apply(this,arguments)}function xS(){return xS=mt(vt().mark((function e(t,n,r){var i,a,o,u;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wy(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Kx.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=mt(vt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return im.forEach(n,(function(t){return im.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return im.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),cm(e.t0)){e.next=10;break}throw e.t0;case 10:vy("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Sn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),xS.apply(this,arguments)}function _S(e,t){return IS.apply(this,arguments)}function IS(){return IS=mt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=wy(t)).currentUser.isEqual(n)){e.next=11;break}return vy("SyncEngine","User change. New user:",n.toKey()),e.next=5,Qx(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new _y(xy.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,wS(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),IS.apply(this,arguments)}function SS(e,t){var n=wy(e),r=n.ic.get(t);if(r&&r.Xu)return qk().add(r.key);var i=qk(),a=n.ec.get(t);if(!a)return i;var o,u=Sn(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function ES(e,t){return TS.apply(this,arguments)}function TS(){return TS=mt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),e.next=3,i_(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&gS(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),TS.apply(this,arguments)}function CS(e,t){return NS.apply(this,arguments)}function NS(){return NS=mt(vt().mark((function e(t,n){var r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),e.abrupt("return",o_(r.localStore,n).then((function(e){return wS(r,e)})));case 2:case"end":return e.stop()}}),e)}))),NS.apply(this,arguments)}function AS(e,t,n,r){return OS.apply(this,arguments)}function OS(){return OS=mt(vt().mark((function e(t,n,r,i){var a,o;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wy(t),e.next=3,function(e,t){var n=wy(e),r=wy(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):im.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,iI(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(vS(a,n,i||null),pS(a,n),function(e,t){wy(wy(e).mutationQueue).In(t)}(a.localStore,n)):ky();case 11:return e.next=13,wS(a,o);case 13:e.next=16;break;case 15:vy("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),OS.apply(this,arguments)}function DS(e,t){return PS.apply(this,arguments)}function PS(){return PS=mt(vt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zS(r=wy(t)),qS(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,RS(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,bI(r.remoteStore,!0);case 9:o=Sn(a);try{for(o.s();!(u=o.n()).done;)s=u.value,B_(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return yS(r,t),n_(r.localStore,t,!0)})),z_(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,RS(r,c);case 21:return function(e){var t=wy(e);t.ic.forEach((function(e,n){z_(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new bm(Ky.comparator)}(r),r.ac=!1,e.next=25,bI(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),PS.apply(this,arguments)}function RS(e,t,n){return LS.apply(this,arguments)}function LS(){return LS=mt(vt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=wy(t),a=[],o=[],u=Sn(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,t_(i.localStore,jg(f[0]));case 11:l=e.sent,h=Sn(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,ES(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,a_(i.localStore,c);case 36:return m=e.sent,e.next=39,t_(i.localStore,m);case 39:return l=e.sent,e.next=42,YI(i,MS(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),LS.apply(this,arguments)}function MS(e){return Pg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function FS(e){var t=wy(e);return wy(wy(t.localStore).persistence).Ri()}function US(e,t,n,r){return VS.apply(this,arguments)}function VS(){return VS=mt(vt().mark((function e(t,n,r,i){var a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=wy(t)).ac){e.next=3;break}return e.abrupt("return",void vy("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,o_(a.localStore,Wg(o[0]));case 10:return u=e.sent,s=Wk.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,wS(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,n_(a.localStore,n,!0);case 17:return yS(a,n,i),e.abrupt("break",20);case 19:ky();case 20:case"end":return e.stop()}}),e)}))),VS.apply(this,arguments)}function jS(e,t,n){return BS.apply(this,arguments)}function BS(){return BS=mt(vt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=zS(t)).ac){e.next=45;break}a=Sn(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return vy("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,a_(i.localStore,u);case 12:return s=e.sent,e.next=15,t_(i.localStore,s);case 15:return c=e.sent,e.next=18,YI(i,MS(s),c.targetId,!1);case 18:B_(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Sn(r),e.prev=30,h=vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,n_(i.localStore,t,!1).then((function(){z_(i.remoteStore,t),yS(i,t)})).catch(nm);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),BS.apply(this,arguments)}function zS(e){var t=wy(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=SS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=oS.bind(null,t),t.Zu.Go=LI.bind(null,t.eventManager),t.Zu.lc=MI.bind(null,t.eventManager),t}function qS(e){var t=wy(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lS.bind(null,t),t}function KS(e,t,n){var r=wy(e);(function(){var e=mt(vt().mark((function e(t,n,r){var i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=wy(e),r=ub(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(zI(i)),a=new BI(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,wS(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=wy(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(my("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var GS=function(){function e(){xn(this,e),this.synchronizeTabs=!1}return In(e,[{key:"initialize",value:function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=N_(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return Hx(this.persistence,new Gx,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new Rx(Mx.Os,this.wt)}},{key:"dc",value:function(e){return new w_}},{key:"terminate",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),WS=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){var a;return xn(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return In(n,[{key:"initialize",value:function(){var e=mt(vt().mark((function e(t){var r=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mi(Nn(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,qS(this.yc.syncEngine);case 6:return e.next=8,iI(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return Hx(this.persistence,new Gx,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new fx(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new vm(t,this.persistence);return new pm(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=qx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Jw.withCacheSize(this.cacheSizeBytes):Jw.DEFAULT;return new jx(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,T_(),C_(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new w_}}]),n}(GS),HS=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return In(n,[{key:"initialize",value:function(){var e=mt(vt().mark((function e(t){var r,i=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mi(Nn(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof b_,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:AS.bind(null,r),Mr:US.bind(null,r),Or:jS.bind(null,r),Ri:FS.bind(null,r),Nr:CS.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DS(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=T_();if(!b_.V(t))throw new _y(xy.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=qx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new b_(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(WS),QS=function(){function e(){xn(this,e)}return In(e,[{key:"initialize",value:function(){var e=mt(vt().mark((function e(t,n){var r=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return aS(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=_S.bind(null,this.syncEngine),e.next=12,bI(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new AI}},{key:"createDatastore",value:function(e){var t,n=N_(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new E_(t));return function(e,t,n,r){return new R_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return aS(o.syncEngine,e,0)},a=__.V()?new __:new x_,new M_(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new QI(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wy(t),vy("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,V_(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function $S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return mt(vt().mark((function r(){var i;return vt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var JS=function(){function e(t){xn(this,e),this.observer=t,this.muted=!1}return In(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):yy("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),YS=function(){function e(t,n){var r=this;xn(this,e),this.Ec=t,this.wt=n,this.metadata=new Iy,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return In(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=mt(vt().mark((function e(){var t,n,r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new VI(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=mt(vt().mark((function e(){var t,n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=mt(vt().mark((function e(){var t,n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),XS=function(){function e(t){xn(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return In(e,[{key:"lookup",value:function(){var e=mt(vt().mark((function e(t){var n,r=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new _y(xy.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=mt(vt().mark((function e(t,n){var r,i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),i=pb(r.wt)+"/documents",a={documents:n.map((function(e){return lb(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=gb(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());by(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Tk(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=mt(vt().mark((function e(){var t,n=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Ky.fromPath(t);n.mutations.push(new Ck(r,n.precondition(r)))})),e.next=7,function(){var e=mt(vt().mark((function e(t,n){var r,i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wy(t),i=pb(r.wt)+"/documents",a={writes:n.map((function(e){return kb(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ky();t=Vy.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new _y(xy.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?hk.updateTime(t):hk.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vy.min()))throw new _y(xy.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hk.updateTime(t)}return hk.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),ZS=function(){function e(t,n,r,i,a){xn(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new A_(this.asyncQueue,"transaction_retry")}return In(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(mt(vt().mark((function t(){var n,r;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new XS(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!Fm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Ak(t)}return!1}}]),e}(),eE=function(){function e(t,n,r,i){var a=this;xn(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fy.UNAUTHENTICATED,this.clientId=Ry.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vy("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return vy("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return In(e,[{key:"getConfiguration",value:function(){var e=mt(vt().mark((function e(){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new _y(xy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Iy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(mt(vt().mark((function n(){var r;return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=SI(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function tE(e,t){return nE.apply(this,arguments)}function nE(){return nE=mt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),vy("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Qx(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),nE.apply(this,arguments)}function rE(e,t){return iE.apply(this,arguments)}function iE(){return iE=mt(vt().mark((function e(t,n){var r,i;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,aE(t);case 3:return r=e.sent,vy("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return gI(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return gI(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),iE.apply(this,arguments)}function aE(e){return oE.apply(this,arguments)}function oE(){return oE=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return vy("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,tE(t,new GS);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),oE.apply(this,arguments)}function uE(e){return sE.apply(this,arguments)}function sE(){return sE=mt(vt().mark((function e(t){return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return vy("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,rE(t,new QS);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),sE.apply(this,arguments)}function cE(e){return aE(e).then((function(e){return e.persistence}))}function lE(e){return aE(e).then((function(e){return e.localStore}))}function fE(e){return uE(e).then((function(e){return e.remoteStore}))}function hE(e){return uE(e).then((function(e){return e.syncEngine}))}function dE(e){return pE.apply(this,arguments)}function pE(){return pE=mt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=$I.bind(null,n.syncEngine),r.onUnlisten=ZI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),pE.apply(this,arguments)}function vE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Iy;return e.asyncQueue.enqueueAndForget(mt(vt().mark((function i(){return vt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new JS({next:function(a){t.enqueueAndForget((function(){return PI(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new _y(xy.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new _y(xy.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new UI(Rg(n.path),a,{includeMetadataChanges:!0,Du:!0});return OI(e,o)},i.next=3,dE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function yE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Iy;return e.asyncQueue.enqueueAndForget(mt(vt().mark((function i(){return vt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new JS({next:function(n){t.enqueueAndForget((function(){return PI(e,o)})),n.fromCache&&"server"===r.source?i.reject(new _y(xy.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new UI(n,a,{includeMetadataChanges:!0,Du:!0});return OI(e,o)},i.next=3,dE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var mE=new Map;function gE(e,t,n){if(!n)throw new _y(xy.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function kE(e,t,n,r){if(!0===t&&!0===r)throw new _y(xy.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function bE(e){if(!Ky.isDocumentKey(e))throw new _y(xy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function wE(e){if(Ky.isDocumentKey(e))throw new _y(xy.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function xE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ky()}function _E(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _y(xy.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=xE(e);throw new _y(xy.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function IE(e,t){if(t<=0)throw new _y(xy.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var SE=function(){function e(t){var n;if(xn(this,e),void 0===t.host){if(void 0!==t.ssl)throw new _y(xy.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _y(xy.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,kE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return In(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),EE=function(){function e(t,n,r){xn(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SE({}),this._settingsFrozen=!1,t instanceof Mm?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new _y(xy.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mm(e.options.projectId)}(t))}return In(e,[{key:"app",get:function(){if(!this._app)throw new _y(xy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new _y(xy.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ey;switch(e.type){case"gapi":var t=e.client;return by(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ay(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new _y(xy.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=mE.get(e);t&&(vy("ComponentProvider","Removing Datastore"),mE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function TE(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=_E(e,EE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&my("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=fy.MOCK_USER;else{o=Bn(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new _y(xy.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new fy(s)}e._authCredentials=new Ty(new Sy(o,u))}}var CE=function(){function e(t,n,r){xn(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return In(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new AE(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),NE=function(){function e(t,n,r){xn(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return In(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),AE=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){var a;return xn(this,n),(a=t.call(this,e,r,Rg(i)))._path=i,a.type="collection",a}return In(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new CE(this.firestore,null,new Ky(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(NE);function OE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=sr(e),gE("collection","path",t),e instanceof EE){var a=By.fromString.apply(By,[t].concat(r));return wE(a),new AE(e,null,a)}if(!(e instanceof CE||e instanceof AE))throw new _y(xy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(By.fromString.apply(By,[t].concat(r)));return wE(o),new AE(e.firestore,null,o)}function DE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=sr(e),1===arguments.length&&(t=Ry.I()),gE("doc","path",t),e instanceof EE){var a=By.fromString.apply(By,[t].concat(r));return bE(a),new CE(e,null,new Ky(a))}if(!(e instanceof CE||e instanceof AE))throw new _y(xy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(By.fromString.apply(By,[t].concat(r)));return bE(o),new CE(e.firestore,e instanceof AE?e.converter:null,new Ky(o))}function PE(e,t){return e=sr(e),t=sr(t),(e instanceof CE||e instanceof AE)&&(t instanceof CE||t instanceof AE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function RE(e,t){return e=sr(e),t=sr(t),e instanceof NE&&t instanceof NE&&e.firestore===t.firestore&&zg(e._query,t._query)&&e.converter===t.converter}var LE=function(){function e(){var t=this;xn(this,e),this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new A_(this,"async_queue_retry"),this.Kc=function(){var e=C_();e&&vy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=C_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return In(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=C_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new Iy;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Oc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=mt(vt().mark((function e(){var t=this;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Oc.length){e.next=14;break}return e.prev=1,e.next=4,this.Oc[0]();case 4:this.Oc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),cm(e.t0)){e.next=12;break}throw e.t0;case 12:vy("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Oc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Mc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw yy("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=II.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&ky()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=mt(vt().mark((function e(){var t;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Mc,e.next=3,t;case 3:if(t!==this.Mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=Sn(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Sn(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function ME(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Sn(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var FE=function(){function e(){xn(this,e),this._progressObserver={},this._taskCompletionResolver=new Iy,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return In(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),UE=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){var a;return xn(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new LE,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return In(n,[{key:"_terminate",value:function(){return this._firestoreClient||jE(this),this._firestoreClient.terminate()}}]),n}(EE);function VE(e){return e._firestoreClient||jE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function jE(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Lm(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new eE(e._authCredentials,e._appCheckCredentials,e._queue,r)}function BE(e,t,n){var r=new Iy;return e.asyncQueue.enqueue(mt(vt().mark((function i(){var a;return vt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,tE(e,n);case 3:return i.next=5,rE(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===xy.FAILED_PRECONDITION||e.code===xy.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:my("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function zE(e){return function(e){return e.asyncQueue.enqueue(mt(vt().mark((function t(){var n,r;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cE(e);case 2:return n=t.sent,t.next=5,fE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=wy(e);return t.lu.delete(0),F_(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(VE(e=_E(e,UE)))}function qE(e){return function(e){return e.asyncQueue.enqueue(mt(vt().mark((function t(){var n,r;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cE(e);case 2:return n=t.sent,t.next=5,fE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wy(t)).lu.add(0),e.next=4,V_(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(VE(e=_E(e,UE)))}function KE(e,t){var n=VE(e=_E(e,UE)),r=new FE;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new YS(e,t)}(function(e,t){if(e instanceof Uint8Array)return $S(e,t);if(e instanceof ArrayBuffer)return $S(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,N_(t));e.asyncQueue.enqueueAndForget(mt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=KS,t.next=3,hE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function GE(e,t){return function(e,t){return e.asyncQueue.enqueue(mt(vt().mark((function n(){return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=wy(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,lE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(VE(e=_E(e,UE)),t).then((function(t){return t?new NE(e,null,t.query):null}))}function WE(e){if(e._initialized||e._terminated)throw new _y(xy.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var HE=function(){function e(){xn(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new _y(xy.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qy(n)}return In(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var QE=function(){function e(t){xn(this,e),this._byteString=t}return In(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Tm.fromBase64String(t))}catch(t){throw new _y(xy.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Tm.fromUint8Array(t))}}]),e}(),$E=In((function e(t){xn(this,e),this._methodName=t})),JE=function(){function e(t,n){if(xn(this,e),!isFinite(t)||t<-90||t>90)throw new _y(xy.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _y(xy.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return In(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ly(this._lat,e._lat)||Ly(this._long,e._long)}}]),e}(),YE=/^__.*__$/,XE=function(){function e(t,n,r){xn(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return In(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new wk(e,this.data,this.fieldMask,t,this.fieldTransforms):new bk(e,this.data,t,this.fieldTransforms)}}]),e}(),ZE=function(){function e(t,n,r){xn(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return In(e,[{key:"toMutation",value:function(e,t){return new wk(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function eT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ky()}}var tT=function(){function e(t,n,r,i,a,o){xn(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return In(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return wT(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(eT(this.Zc)&&YE.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),nT=function(){function e(t,n,r){xn(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||N_(t)}return In(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new tT({Zc:e,methodName:t,ca:n,path:qy.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function rT(e){var t=e._freezeSettings(),n=N_(e._databaseId);return new nT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function iT(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);mT("Data must be an object, but it was:",o,r);var u,s,c=vT(r,o);if(a.merge)u=new Em(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Sn(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=gT(t,d,n);if(!o.contains(p))throw new _y(xy.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));xT(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Em(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new XE(new ug(c),u,s)}var aT=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.apply(this,arguments)}return In(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($E);function oT(e,t,n){return new tT({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var uT=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.apply(this,arguments)}return In(n,[{key:"_toFieldTransform",value:function(e){return new lk(e.path,new nk)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($E),sT=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this,e)).ha=r,i}return In(n,[{key:"_toFieldTransform",value:function(e){var t=oT(this,e,!0),n=this.ha.map((function(e){return pT(e,t)})),r=new rk(n);return new lk(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}($E),cT=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this,e)).ha=r,i}return In(n,[{key:"_toFieldTransform",value:function(e){var t=oT(this,e,!0),n=this.ha.map((function(e){return pT(e,t)})),r=new ak(n);return new lk(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}($E),lT=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this,e)).la=r,i}return In(n,[{key:"_toFieldTransform",value:function(e){var t=new uk(e.wt,Yg(e.wt,this.la));return new lk(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}($E);function fT(e,t,n,r){var i=e.aa(1,t,n);mT("Data must be an object, but it was:",i,r);var a=[],o=ug.empty();gm(r,(function(e,r){var u=bT(t,e,n);r=sr(r);var s=i.ia(u);if(r instanceof aT)a.push(u);else{var c=pT(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Em(a);return new ZE(o,u,i.fieldTransforms)}function hT(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[gT(t,r,n)],s=[i];if(a.length%2!=0)throw new _y(xy.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(gT(t,a[c])),s.push(a[c+1]);for(var l=[],f=ug.empty(),h=u.length-1;h>=0;--h)if(!xT(l,u[h])){var d=u[h],p=s[h];p=sr(p);var v=o.ia(d);if(p instanceof aT)l.push(d);else{var y=pT(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Em(l);return new ZE(f,m,o.fieldTransforms)}function dT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return pT(n,e.aa(r?4:3,t))}function pT(e,t){if(yT(e=sr(e)))return mT("Unsupported field value:",t,e),vT(e,t);if(e instanceof $E)return function(e,t){if(!eT(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Sn(e);try{for(a.s();!(n=a.n()).done;){var o=pT(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=sr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Yg(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Uy.fromDate(e);return{timestampValue:ib(t.wt,n)}}if(e instanceof Uy){var r=new Uy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ib(t.wt,r)}}if(e instanceof JE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof QE)return{bytesValue:ab(t.wt,e._byteString)};if(e instanceof CE){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:sb(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(xE(e)))}(e,t)}function vT(e,t){var n={};return km(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):gm(e,(function(e,r){var i=pT(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function yT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Uy||e instanceof JE||e instanceof QE||e instanceof CE||e instanceof $E)}function mT(e,t,n){if(!yT(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=xE(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function gT(e,t,n){if((t=sr(t))instanceof HE)return t._internalPath;if("string"==typeof t)return bT(e,t);throw wT("Field path arguments must be of type string or ",e,!1,void 0,n)}var kT=new RegExp("[~\\*/\\[\\]]");function bT(e,t,n){if(t.search(kT)>=0)throw wT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Pn(HE,lr(t.split(".")))._internalPath}catch(R){throw wT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function wT(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new _y(xy.INVALID_ARGUMENT,u+e+s)}function xT(e,t){return e.some((function(e){return e.isEqual(t)}))}var _T=function(){function e(t,n,r,i,a){xn(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return In(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new CE(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new IT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(ST("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),IT=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.apply(this,arguments)}return In(n,[{key:"data",value:function(){return Mi(Nn(n.prototype),"data",this).call(this)}}]),n}(_T);function ST(e,t){return"string"==typeof t?bT(e,t):t instanceof HE?t._internalPath:t._delegate._internalPath}var ET=function(){function e(t,n){xn(this,e),this.hasPendingWrites=t,this.fromCache=n}return In(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),TT=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i,a,o,u){var s;return xn(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return In(n,[{key:"exists",value:function(){return Mi(Nn(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new CT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ST("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(_T),CT=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.apply(this,arguments)}return In(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Mi(Nn(n.prototype),"data",this).call(this,e)}}]),n}(TT),NT=function(){function e(t,n,r,i){xn(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new ET(i.hasPendingWrites,i.fromCache),this.query=r}return In(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new CT(n._firestore,n._userDataWriter,r.key,r,new ET(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _y(xy.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new CT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ET(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new CT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ET(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:AT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function AT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ky()}}function OT(e,t){return e instanceof TT&&t instanceof TT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof NT&&t instanceof NT&&e._firestore===t._firestore&&RE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function DT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new _y(xy.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var PT=In((function e(){xn(this,e)}));function RT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var LT=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){var a;return xn(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return In(n,[{key:"_apply",value:function(e){var t=rT(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new _y(xy.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){WT(o,a);var s,c=[],l=Sn(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(GT(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=GT(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||WT(o,a),u=dT(n,"where",o,"in"===a||"not-in"===a);var h=gg.create(i,a,u);return function(e,t){if(t.ht()){var n=Fg(e);if(null!==n&&!n.isEqual(t.field))throw new _y(xy.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Mg(e);null!==r&&HT(e,t.field,r)}var i=function(e,t){var n,r=Sn(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new _y(xy.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new _y(xy.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new NE(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Dg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(PT);var MT=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return In(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new _y(xy.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new _y(xy.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Cg(t,n);return function(e,t){if(null===Mg(e)){var n=Fg(e);null!==n&&HT(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new NE(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Dg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(PT);var FT=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){var a;return xn(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return In(n,[{key:"_apply",value:function(e){return new NE(e.firestore,e.converter,Bg(e._query,this.ma,this.ga))}}]),n}(PT);var UT=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){var a;return xn(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return In(n,[{key:"_apply",value:function(e){var t=KT(e,this.type,this.ya,this.pa);return new NE(e.firestore,e.converter,function(e,t){return new Dg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(PT);function VT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new UT("startAt",t,!0)}function jT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new UT("startAfter",t,!1)}var BT=function(e){Cn(n,e);var t=Dn(n);function n(e,r,i){var a;return xn(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return In(n,[{key:"_apply",value:function(e){var t=KT(e,this.type,this.ya,this.pa);return new NE(e.firestore,e.converter,function(e,t){return new Dg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(PT);function zT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BT("endBefore",t,!1)}function qT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BT("endAt",t,!0)}function KT(e,t,n,r){if(n[0]=sr(n[0]),n[0]instanceof _T)return function(e,t,n,r,i){if(!r)throw new _y(xy.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Sn(Vg(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push($m(t,r.key));else{var c=r.data.field(s.field);if(Dm(c))throw new _y(xy.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new _y(xy.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Tg(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=rT(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new _y(xy.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new _y(xy.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ug(e)&&-1!==c.indexOf("/"))throw new _y(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(By.fromString(c));if(!Ky.isDocumentKey(l))throw new _y(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Ky(l);u.push($m(t,f))}else{var h=dT(n,r,c);u.push(h)}}return new Tg(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function GT(e,t,n){if("string"==typeof(n=sr(n))){if(""===n)throw new _y(xy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ug(t)&&-1!==n.indexOf("/"))throw new _y(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(By.fromString(n));if(!Ky.isDocumentKey(r))throw new _y(xy.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return $m(e,new Ky(r))}if(n instanceof CE)return $m(e,n._key);throw new _y(xy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(xE(n),"."))}function WT(e,t){if(!Array.isArray(e)||0===e.length)throw new _y(xy.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new _y(xy.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function HT(e,t,n){if(!n.isEqual(t))throw new _y(xy.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var QT={maxAttempts:5},$T=function(){function e(){xn(this,e)}return In(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(zm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Am(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Om(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ky()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return gm(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new JE(Am(e.latitude),Am(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Pm(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Rm(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Nm(e);return new Uy(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=By.fromString(e);by(Db(n));var r=new Mm(n.get(1),n.get(3)),i=new Ky(n.popFirst(5));return r.isEqual(t)||yy("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function JT(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var YT=function(e){Cn(n,e);var t=Dn(n);function n(e){var r;return xn(this,n),(r=t.call(this)).firestore=e,r}return In(n,[{key:"convertBytes",value:function(e){return new QE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new CE(this.firestore,null,t)}}]),n}($T),XT=function(){function e(t,n){xn(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=rT(t)}return In(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=ZT(e,this._firestore),i=JT(r.converter,t,n),a=iT(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,hk.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=ZT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=sr(t))||t instanceof HE?hT(this._dataReader,"WriteBatch.update",i._key,t,n,o):fT(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,hk.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=ZT(e,this._firestore);return this._mutations=this._mutations.concat(new Tk(t._key,hk.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new _y(xy.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function ZT(e,t){if((e=sr(e)).firestore!==t)throw new _y(xy.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var eC=function(e){Cn(n,e);var t=Dn(n);function n(e){var r;return xn(this,n),(r=t.call(this)).firestore=e,r}return In(n,[{key:"convertBytes",value:function(e){return new QE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new CE(this.firestore,null,t)}}]),n}($T);function tC(e){e=_E(e,CE);var t=_E(e.firestore,UE),n=VE(t),r=new eC(t);return function(e,t){var n=new Iy;return e.asyncQueue.enqueueAndForget(mt(vt().mark((function r(){return vt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=mt(vt().mark((function e(t,n,r){var i,a;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=wy(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new _y(xy.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=SI(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,lE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new TT(t,r,e._key,n,new ET(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function nC(e){e=_E(e,NE);var t=_E(e.firestore,UE),n=VE(t),r=new eC(t);return function(e,t){var n=new Iy;return e.asyncQueue.enqueueAndForget(mt(vt().mark((function r(){return vt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=mt(vt().mark((function e(t,n,r){var i,a,o,u,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i_(t,n,!0);case 3:i=e.sent,a=new GI(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=SI(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,lE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new NT(t,r,e,n)}))}function rC(e,t,n){e=_E(e,CE);var r=_E(e.firestore,UE),i=JT(e.converter,t,n);return uC(r,[iT(rT(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,hk.none())])}function iC(e,t,n){e=_E(e,CE);for(var r=_E(e.firestore,UE),i=rT(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return uC(r,[("string"==typeof(t=sr(t))||t instanceof HE?hT(i,"updateDoc",e._key,t,n,o):fT(i,"updateDoc",e._key,t)).toMutation(e._key,hk.exists(!0))])}function aC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=sr(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||ME(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(ME(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof CE)l=_E(e.firestore,UE),f=Rg(e._key.path),c={next:function(t){n[s]&&n[s](sC(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=_E(e,NE);l=_E(p.firestore,UE),f=p._query;var v=new eC(l);c={next:function(e){n[s]&&n[s](new NT(l,v,p,e))},error:n[s+1],complete:n[s+2]},DT(e._query)}return function(e,t,n,r){var i=new JS(r),a=new UI(t,i,n);return e.asyncQueue.enqueueAndForget(mt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=OI,t.next=3,dE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(mt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=PI,t.next=3,dE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(VE(l),f,h,c)}function oC(e,t){return function(e,t){var n=new JS(t);return e.asyncQueue.enqueueAndForget(mt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wy(e).Tu.add(t),t.next()},t.next=3,dE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(mt(vt().mark((function t(){return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wy(e).Tu.delete(t)},t.next=3,dE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(VE(e=_E(e,UE)),ME(t)?t:{next:t})}function uC(e,t){return function(e,t){var n=new Iy;return e.asyncQueue.enqueueAndForget(mt(vt().mark((function r(){return vt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=tS,r.next=3,hE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(VE(e),t)}function sC(e,t,n){var r=n.docs.get(t._key),i=new eC(e);return new TT(e,i,t._key,r,new ET(n.hasPendingWrites,n.fromCache),t.converter)}var cC=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this,e,r))._firestore=e,i}return In(n,[{key:"get",value:function(e){var t=this,r=ZT(e,this._firestore),i=new eC(this._firestore);return Mi(Nn(n.prototype),"get",this).call(this,e).then((function(e){return new TT(t._firestore,i,r._key,e._document,new ET(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){xn(this,e),this._firestore=t,this._transaction=n,this._dataReader=rT(t)}return In(e,[{key:"get",value:function(e){var t=this,n=ZT(e,this._firestore),r=new YT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ky();var i=e[0];if(i.isFoundDocument())return new _T(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new _T(t._firestore,r,n._key,null,n.converter);throw ky()}))}},{key:"set",value:function(e,t,n){var r=ZT(e,this._firestore),i=JT(r.converter,t,n),a=iT(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=ZT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=sr(t))||t instanceof HE?hT(this._dataReader,"Transaction.update",i._key,t,n,o):fT(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=ZT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function lC(e,t,n){e=_E(e,UE);var r=Object.assign(Object.assign({},QT),n);return function(e){if(e.maxAttempts<1)throw new _y(xy.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Iy;return e.asyncQueue.enqueueAndForget(mt(vt().mark((function i(){var a;return vt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return uE(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new ZS(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(VE(e),(function(n){return t(new cC(e,n))}),r)}function fC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sT("arrayUnion",t)}function hC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cT("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){hy=e}(ii),Yr(new fr("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new UE(i,new Cy(e.getProvider("auth-internal")),new Dy(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),li(ly,"3.4.14",e),li(ly,"3.4.14","esm2017")}();function dC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new _y("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function pC(){if("undefined"===typeof Uint8Array)throw new _y("unimplemented","Uint8Arrays are not available in this environment.")}function vC(){if("undefined"==typeof atob)throw new _y("unimplemented","Blobs are unavailable in Firestore in this environment.")}var yC=function(){function e(t){xn(this,e),this._delegate=t}return In(e,[{key:"toBase64",value:function(){return vC(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return pC(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return vC(),new e(QE.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return pC(),new e(QE.fromUint8Array(t))}}]),e}();function mC(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Sn(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var gC=function(){function e(){xn(this,e)}return In(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){WE(e=_E(e,UE));var n=VE(e),r=e._freezeSettings(),i=new QS;return BE(n,i,new WS(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){WE(e=_E(e,UE));var t=VE(e),n=e._freezeSettings(),r=new QS;return BE(t,r,new HS(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new _y(xy.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Iy;return e._queue.enqueueAndForgetEvenWhileRestricted(mt(vt().mark((function n(){return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=mt(vt().mark((function e(t){var n;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(om.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,om.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(qx(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),kC=function(){function e(t,n,r){var i=this;xn(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Mm||(this._appCompat=t)}return In(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||my("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};TE(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return zE(this._delegate)}},{key:"disableNetwork",value:function(){return qE(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&kE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Iy;return e.asyncQueue.enqueueAndForget(mt(vt().mark((function n(){return vt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=hS,n.next=3,hE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(VE(e=_E(e,UE)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return oC(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new _y("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new PC(this,OE(this._delegate,e))}catch(t){throw SC(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new IC(this,DE(this._delegate,e))}catch(t){throw SC(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new AC(this,function(e,t){if(e=_E(e,EE),gE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new _y(xy.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new NE(e,null,function(e){return new Dg(By.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw SC(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return lC(this._delegate,(function(n){return e(new wC(t,n))}))}},{key:"batch",value:function(){var e=this;return VE(this._delegate),new xC(new XT(this._delegate,(function(t){return uC(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return KE(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return GE(this._delegate,e).then((function(e){return e?new AC(t,e):null}))}}]),e}(),bC=function(e){Cn(n,e);var t=Dn(n);function n(e){var r;return xn(this,n),(r=t.call(this)).firestore=e,r}return In(n,[{key:"convertBytes",value:function(e){return new yC(new QE(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return IC.forKey(t,this.firestore,null)}}]),n}($T);var wC=function(){function e(t,n){xn(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new bC(t)}return In(e,[{key:"get",value:function(e){var t=this,n=RC(e);return this._delegate.get(n).then((function(e){return new CC(t._firestore,new TT(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=RC(e);return n?(dC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=RC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=RC(e);return this._delegate.delete(t),this}}]),e}(),xC=function(){function e(t){xn(this,e),this._delegate=t}return In(e,[{key:"set",value:function(e,t,n){var r=RC(e);return n?(dC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=RC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=RC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),_C=function(){function e(t,n,r){xn(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return In(e,[{key:"fromFirestore",value:function(e,t){var n=new CT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new NC(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new bC(t),n),i.set(n,a)),a}}]),e}();_C.INSTANCES=new WeakMap;var IC=function(){function e(t,n){xn(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new bC(t)}return In(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new PC(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new PC(this.firestore,OE(this._delegate,e))}catch(t){throw SC(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=sr(e))instanceof CE&&PE(this._delegate,e)}},{key:"set",value:function(e,t){t=dC("DocumentReference.set",t);try{return t?rC(this._delegate,e,t):rC(this._delegate,e)}catch(n){throw SC(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?iC(this._delegate,e):iC.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw SC(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return uC(_E(e.firestore,UE),[new Tk(e._key,hk.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=EC(n),a=TC(n,(function(t){return new CC(e.firestore,new TT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return aC(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?tC(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=_E(e,CE);var t=_E(e.firestore,UE);return vE(VE(t),e._key,{source:"server"}).then((function(n){return sC(t,e,n)}))}(this._delegate):function(e){e=_E(e,CE);var t=_E(e.firestore,UE);return vE(VE(t),e._key).then((function(n){return sC(t,e,n)}))}(this._delegate),t.then((function(e){return new CC(n.firestore,new TT(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(_C.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new _y("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new CE(n._delegate,r,new Ky(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new CE(n._delegate,r,t))}}]),e}();function SC(e,t,n){return e.message=e.message.replace(t,n),e}function EC(e){var t,n=Sn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!mC(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function TC(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=mC(e[0])?e[0]:mC(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var CC=function(){function e(t,n){xn(this,e),this._firestore=t,this._delegate=n}return In(e,[{key:"ref",get:function(){return new IC(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return OT(this._delegate,e._delegate)}}]),e}(),NC=function(e){Cn(n,e);var t=Dn(n);function n(){return xn(this,n),t.apply(this,arguments)}return In(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ky()}(void 0!==t),t}}]),n}(CC),AC=function(){function e(t,n){xn(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new bC(t)}return In(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,RT(this._delegate,function(e,t,n){var r=t,i=ST("where",e);return new LT(i,r,n)}(t,n,r)))}catch(i){throw SC(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,RT(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ST("orderBy",e);return new MT(n,t)}(t,n)))}catch(r){throw SC(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,RT(this._delegate,function(e){return IE("limit",e),new FT("limit",e,"F")}(t)))}catch(n){throw SC(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,RT(this._delegate,function(e){return IE("limitToLast",e),new FT("limitToLast",e,"L")}(t)))}catch(n){throw SC(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,RT(this._delegate,VT.apply(void 0,arguments)))}catch(t){throw SC(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,RT(this._delegate,jT.apply(void 0,arguments)))}catch(t){throw SC(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,RT(this._delegate,zT.apply(void 0,arguments)))}catch(t){throw SC(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,RT(this._delegate,qT.apply(void 0,arguments)))}catch(t){throw SC(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return RE(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?nC(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=_E(e,NE);var t=_E(e.firestore,UE),n=VE(t),r=new eC(t);return yE(n,e._query,{source:"server"}).then((function(n){return new NT(t,r,e,n)}))}(this._delegate):function(e){e=_E(e,NE);var t=_E(e.firestore,UE),n=VE(t),r=new eC(t);return DT(e._query),yE(n,e._query).then((function(n){return new NT(t,r,e,n)}))}(this._delegate),t.then((function(e){return new DC(n.firestore,new NT(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=EC(n),a=TC(n,(function(t){return new DC(e.firestore,new NT(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return aC(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(_C.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),OC=function(){function e(t,n){xn(this,e),this._firestore=t,this._delegate=n}return In(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new NC(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),DC=function(){function e(t,n){xn(this,e),this._firestore=t,this._delegate=n}return In(e,[{key:"query",get:function(){return new AC(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new NC(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new OC(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new NC(n._firestore,r))}))}},{key:"isEqual",value:function(e){return OT(this._delegate,e._delegate)}}]),e}(),PC=function(e){Cn(n,e);var t=Dn(n);function n(e,r){var i;return xn(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return In(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new IC(this.firestore,e):null}},{key:"doc",value:function(e){try{return new IC(this.firestore,void 0===e?DE(this._delegate):DE(this._delegate,e))}catch(t){throw SC(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=_E(e.firestore,UE),r=DE(e),i=JT(e.converter,t);return uC(n,[iT(rT(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,hk.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new IC(t.firestore,e)}))}},{key:"isEqual",value:function(e){return PE(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(_C.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(AC);function RC(e){return _E(e,CE)}var LC=function(){function e(){xn(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Pn(HE,n)}return In(e,[{key:"isEqual",value:function(e){return(e=sr(e))instanceof HE&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(qy.keyField().canonicalString())}}]),e}(),MC=function(){function e(t){xn(this,e),this._delegate=t}return In(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new uT("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new aT("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=fC.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=hC.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new lT("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),FC={Firestore:kC,GeoPoint:JE,Timestamp:Uy,Blob:yC,Transaction:wC,WriteBatch:xC,DocumentReference:IC,DocumentSnapshot:CC,Query:AC,QueryDocumentSnapshot:NC,QuerySnapshot:DC,CollectionReference:PC,FieldPath:LC,FieldValue:MC,setLogLevel:function(e){!function(e){dy.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new fr("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},FC)))}(e,(function(e,t){return new kC(e,t,new gC)})),e.registerVersion("@firebase/firestore-compat","0.1.23")}(Ri);Ri.initializeApp({apiKey:"AIzaSyBZqcQoXTDeB9Ud2MPUznmaBU14XADaSuU",authDomain:"netflix-build-f75bb.firebaseapp.com",projectId:"netflix-build-f75bb",storageBucket:"netflix-build-f75bb.appspot.com",messagingSenderId:"8193500184",appId:"1:8193500184:web:ee616da50c9c8fba110f6d"}).firestore();var UC=Ri.auth();var VC=function(){var e=(0,t.useRef)(null),n=(0,t.useRef)(null);return(0,hn.jsx)("div",{className:"signupScreen",children:(0,hn.jsxs)("form",{children:[(0,hn.jsx)("h1",{children:"Sign In"}),(0,hn.jsx)("input",{ref:e,placeholder:"Email",type:"email"}),(0,hn.jsx)("input",{ref:n,placeholder:"Password",type:"password"}),(0,hn.jsx)("button",{onClick:function(t){t.preventDefault(),UC.signInWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){return alert(e.message)}))},children:"Sign In"}),(0,hn.jsxs)("h4",{children:[(0,hn.jsx)("span",{className:"signupScreen__gray",children:"New to Netflix? "}),(0,hn.jsx)("span",{className:"signupScreen__link",onClick:function(t){t.preventDefault(),UC.createUserWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){alert(e.message)}))},children:"Sign Up Now."})]})]})})};var jC=function(){var e=At(t.useState(!1),2),n=e[0],r=e[1];return(0,hn.jsxs)("div",{className:"loginScreen",children:[(0,hn.jsxs)("div",{className:"loginScreen__background",children:[(0,hn.jsx)("img",{className:"loginScreen__logo",src:"./netflixnb.png",alt:""}),(0,hn.jsx)("button",{onClick:function(){return r(!0)},className:"loginScreen__button",children:"Sign In"}),(0,hn.jsx)("div",{className:"loginScreen__gradient"})]}),(0,hn.jsx)("div",{className:"loginScreen__body",children:n?(0,hn.jsx)(VC,{}):(0,hn.jsxs)("div",{className:"test",children:[(0,hn.jsx)("h1",{children:"Unlimited films, TV programmes and more."}),(0,hn.jsx)("h2",{children:"Watch anywhere. Cancel at any time."}),(0,hn.jsx)("h3",{children:"Ready to watch? Enter your email to create or restart your membership."}),(0,hn.jsx)("div",{className:"loginScreen__input",children:(0,hn.jsxs)("form",{children:[(0,hn.jsx)("input",{type:"email",placeholder:"Email Address"}),(0,hn.jsx)("button",{onClick:function(){return r(!0)},className:"loginScreen__getStarted",children:"GET STARTED"})]})})]})})]})};var BC=function(){var e=v(It);return(0,hn.jsxs)("div",{className:"profileScreen",children:[(0,hn.jsx)(dn,{}),(0,hn.jsxs)("div",{className:"profileScreen__body",children:[(0,hn.jsx)("h1",{children:"Edit Profile"}),(0,hn.jsxs)("div",{className:"profileScreen__info",children:[(0,hn.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/0/0b/Netflix-avatar.png",alt:""}),(0,hn.jsxs)("div",{className:"profileScreen__details",children:[(0,hn.jsx)("h2",{children:e.email}),(0,hn.jsxs)("div",{className:"profileScreen__plans",children:[(0,hn.jsx)("h3",{children:"Plans"}),(0,hn.jsx)("p",{children:"Renewal date: 30/09/2022"}),(0,hn.jsxs)("div",{children:[(0,hn.jsxs)("div",{className:"profileScreen__plan plan1",children:[(0,hn.jsxs)("p",{children:["Netflix Standard ",(0,hn.jsx)("br",{}),"1080p"]}),(0,hn.jsx)("button",{children:"Subscribe"})]}),(0,hn.jsxs)("div",{className:"profileScreen__plan",children:[(0,hn.jsxs)("p",{children:["Netflix Basic ",(0,hn.jsx)("br",{}),"480p"]}),(0,hn.jsx)("button",{children:"Subscribe"})]}),(0,hn.jsxs)("div",{className:"profileScreen__plan",children:[(0,hn.jsxs)("p",{children:["Netflix Premium",(0,hn.jsx)("br",{}),"4k HDR"]}),(0,hn.jsx)("button",{children:"Subscribe"})]})]}),(0,hn.jsx)("button",{onClick:function(){return UC.signOut()},className:"profileScreen__signOut",children:"Sign Out"})]})]})]})]})]})};var zC=function(){var e=v(It),n=I();return(0,t.useEffect)((function(){return UC.onAuthStateChanged((function(e){n(e?xt({uid:e.uid,email:e.email}):_t())}))}),[n]),(0,hn.jsx)("div",{className:"app",children:(0,hn.jsx)(wn,{children:e?(0,hn.jsxs)(ln,{children:[(0,hn.jsx)(sn,{path:"/profile",element:(0,hn.jsx)(BC,{})}),(0,hn.jsx)(sn,{path:"/",element:(0,hn.jsx)(bn,{})})]}):(0,hn.jsx)(jC,{})})})},qC=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},KC=document.getElementById("root");(0,r.s)(KC).render((0,hn.jsx)(t.StrictMode,{children:(0,hn.jsx)(k,{store:St,children:(0,hn.jsx)(zC,{})})})),qC()}()}();
//# sourceMappingURL=main.25e46f05.js.map